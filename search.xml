<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Lombok: ä»£ç ç®€æ´ä¹‹é“]]></title>
    <url>%2F2019%2F07%2F28%2FLombok-%E4%BB%A3%E7%A0%81%E7%AE%80%E6%B4%81%E4%B9%8B%E9%81%93%2F</url>
    <content type="text"><![CDATA[åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦é‡å†™ getter / setter , toString , equals / hashCode ç­‰ï¼Œè™½ç„¶çŽ°åœ¨ IDE éƒ½æ”¯æŒ generate , ä½†æ˜¯å­—æ®µå˜æ›´åŽè¿˜éœ€è¦å†ä¿®æ”¹ï¼Œæœ€é‡è¦çš„æ˜¯ï¼šé‡å¤è€Œç¹ççš„ä»£ç ä¼šå½±å“å…³é”®ä»£ç çš„å¯è¯»æ€§ã€‚æœ¬æ–‡å°±ä»‹ç» Lombok å¼€å‘æ’ä»¶ï¼Œä½¿ç”¨æ³¨è§£æ¥æœ‰æ•ˆçš„ç®€åŒ–ä»£ç ã€‚ è®¤è¯† LombokLombok æ˜¯ä¸€ä¸ªJava åº“ï¼Œå¯ä»¥é€šè¿‡æ³¨è§£çš„æ–¹å¼ç®€åŒ–ä»£ç ï¼Œå¦‚ getter , equals æˆ–æ—¥å¿—å˜é‡ç­‰ã€‚ Lombok éžå¸¸é€‚ç”¨äºŽ pojo ç­‰å¯¹è±¡ã€‚ å·¥ä½œåŽŸç†Lombok æœ¬è´¨ä¸Šæ˜¯å®žçŽ° JSR 269 API çš„ç¨‹åºï¼Œè‡ª JDK6 åŽå°±è¢« javac æ”¯æŒï¼Œå…¶å¯ä»¥åœ¨ javac æ—¶åŠ¨æ€ä¿®æ”¹è¯­æ³•æ ‘ï¼Œäº§ç”ŸçœŸå®žæ‰€éœ€å­—èŠ‚ç æ–‡ä»¶ã€‚ ç”±æ­¤å¯çŸ¥ï¼Œåœ¨ç¼–è¯‘åŽï¼Œæˆ‘ä»¬çœŸå®žæ‰€éœ€çš„ä»£ç å°±ä¼šäº§ç”Ÿï¼Œè¿™ç§å·¥ä½œæ–¹å¼ä¸åŒä¸Ž åå°„ ï¼Œ Lombok ä¸ä¼šå½±å“ç¨‹åºæ€§èƒ½ ã€‚ åˆ©ç”¨ javap å¯ä»¥éªŒè¯ Lombok çš„å·¥ä½œåŽŸç†ã€‚ä½¿ç”¨ jd-GUI ç­‰å·¥å…·å¯ä»¥æŸ¥çœ‹è¯¦ç»†å†…å®¹ã€‚ 123456789101112package org.demo.pojo;import lombok.Getter;@Getterpublic class Lombok &#123; private Integer id; private String name;&#125; 1234567891011121314151617181920Compiled from "Lombok.java"public class org.demo.pojo.Lombok &#123; public org.demo.pojo.Lombok(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object."&lt;init&gt;":()V 4: return public java.lang.Integer getId(); Code: 0: aload_0 1: getfield #2 // Field id:Ljava/lang/Integer; 4: areturn public java.lang.String getName(); Code: 0: aload_0 1: getfield #3 // Field name:Ljava/lang/String; 4: areturn&#125; å¸¸ç”¨æ³¨è§£ å¸¸ç”¨æ³¨è§£ è¯´æ˜Ž @Getter / @Setter ä½œç”¨äºŽ ç±» æˆ– å­—æ®µ ï¼Œåœ¨ç±»ä¸Šï¼Œä¸ºæ‰€æœ‰å­—æ®µç”Ÿæˆï¼Œåœ¨å­—æ®µä¸Šåˆ™åªå•ç‹¬ç”Ÿæˆã€‚ @ToString ä½œç”¨äºŽ ç±» ï¼Œç”Ÿæˆ toString æ–¹æ³•ã€‚ @EqualsAndHashCode ä½œç”¨äºŽ ç±» ï¼Œç”Ÿæˆ hashCode å’Œ equals ã€‚ @NoArgsConstructor ä½œç”¨äºŽ ç±» ï¼Œç”Ÿæˆæ— å‚çš„æž„é€ æ–¹æ³•ã€‚ @RequiredArgsConstructor ä½œç”¨äºŽ ç±» ï¼Œä¸ºå¿…éœ€å‚æ•°ç”Ÿæˆæž„é€ æ–¹æ³•ï¼Œæ¯”å¦‚ final å’Œè¢« @NonNull æ³¨è§£çš„å­—æ®µã€‚ @AllArgsConstructor ä½œç”¨äºŽ ç±» ï¼Œç”ŸæˆåŒ…å«ç±»ä¸­æ‰€æœ‰å­—æ®µçš„æž„é€ æ–¹æ³•ã€‚ @Data ä½œç”¨äºŽ ç±» ï¼ŒåŒ…å« : @Getter , @Setter , @RequiredArgsConstructor , @ToString , @EqualsAndHashCode ã€‚ @Slf4j ä½œç”¨äºŽ ç±» ï¼Œç”Ÿæˆæ—¥å¿—å¸¸é‡ log ï¼ŒåŸºäºŽ logback ã€‚å¯¹åº”çš„è¿˜æœ‰ @Log4j ç­‰æ³¨è§£ã€‚ ä½¿ç”¨ Lombokå¿…éœ€æ¡ä»¶å¼•ç”¨ä¾èµ– 123456&lt;!-- lombok --&gt;&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.16.18&lt;/version&gt;&lt;/dependency&gt; Lombokæ’ä»¶ ç”±å·¥å…·åŽŸç†å¯çŸ¥ï¼Œ Lombok æ˜¯æ˜¯ç¼–è¯‘åŽæ‰ä¼šäº§ç”Ÿå¯¹åº”çš„æ–¹æ³•ï¼Œè€Œè¿™äº›æ–¹æ³•ä¼šåœ¨å¼€å‘ä¸­ï¼ˆç¼–è¯‘å‰ï¼‰ä½¿ç”¨ï¼Œè¿™ä¸ä¼šè¢« IDEç­‰ ç›´æŽ¥æ”¯æŒï¼Œéœ€è¦æ’ä»¶æ”¯æŒã€‚ èŽ·å–æ’ä»¶ : Lombokå®˜ç½‘ ã€‚ @Getter / @Setter@Getter / @Setter å¯ä»¥ä½œç”¨äºŽ ç±» æˆ– å­—æ®µ ï¼Œåœ¨ç±»ä¸Šï¼Œä¸ºæ‰€æœ‰å­—æ®µç”Ÿæˆï¼Œåœ¨å­—æ®µä¸Šåˆ™åªå•ç‹¬ç”Ÿæˆã€‚ é€šè¿‡ value() å¯ä»¥æŽ§åˆ¶è®¿é—®çº§åˆ«ï¼Œé»˜è®¤ä¸º public ã€‚ 123456789101112@Setter(AccessLevel.PROTECTED)public class Lombok &#123; @Getter private Integer id; @Getter private String name; private String password;&#125; @ToString@ToString ä½œç”¨äºŽ ç±» ï¼Œè‡ªåŠ¨ç”Ÿæˆ toString æ–¹æ³•ã€‚ ä½¿ç”¨ exclude å¯ä»¥æŒ‡å®šæŽ’é™¤å­—æ®µã€‚ ä½¿ç”¨ of å¯ä»¥æŒ‡å®šåŒ…å«å­—æ®µã€‚ 12345678910@ToString(exclude = "password")public class Lombok &#123; private Integer id; private String name; private String password;&#125; @EqualsAndHashCode@EqualsAndHashCode ä½œç”¨äºŽ ç±» ï¼Œè‡ªåŠ¨ç”Ÿæˆ hashCode å’Œ equals ã€‚é€‚ç”¨äºŽç®€å•çš„ç”Ÿæˆã€‚ ä½¿ç”¨ exclude å¯ä»¥æŒ‡å®šæŽ’é™¤å­—æ®µã€‚ ä½¿ç”¨ of å¯ä»¥æŒ‡å®šåŒ…å«å­—æ®µã€‚ 12345678910@EqualsAndHashCode(of="id")public class Lombok &#123; private Integer id; private String name; private String password;&#125; ConstructorLombok æä¾›äº†æž„é€ å™¨ç›¸å…³çš„æ³¨è§£ : @NoArgsConstructor : æ— å‚æž„é€ ã€‚ @AllArgsConstructor : å…¨å‚æž„é€ ã€‚ @RequiredArgsConstructor : å¿…éœ€å‚æ•°æž„é€ ã€‚ @RequiredArgsConstructor ä¼šè‡ªåŠ¨ä¸º @NonNull æˆ– final ç›¸å…³çš„ç‰¹æ®Šå­—æ®µæž„é€ å™¨ã€‚ 12345678910111213@NoArgsConstructor@AllArgsConstructor@RequiredArgsConstructorpublic class Lombok &#123; @NonNull private Integer id; private String name; private String password;&#125; @Data@Data ä½œç”¨äºŽ ç±» ï¼ŒåŒ…å« : @Getter , @Setter , @RequiredArgsConstructor , @ToString , @EqualsAndHashCode ã€‚ 123456789@Datapublic class Lombok &#123; @NonNull private Integer id; private String name;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798//// Source code recreated from a .class file by IntelliJ IDEA// (powered by Fernflower decompiler)//package org.demo.pojo;import java.beans.ConstructorProperties;import lombok.NonNull;public class Lombok &#123; @NonNull private Integer id; private String name; @ConstructorProperties(&#123;"id"&#125;) public Lombok(@NonNull Integer id) &#123; if (id == null) &#123; throw new NullPointerException("id"); &#125; else &#123; this.id = id; &#125; &#125; @NonNull public Integer getId() &#123; return this.id; &#125; public String getName() &#123; return this.name; &#125; public void setId(@NonNull Integer id) &#123; if (id == null) &#123; throw new NullPointerException("id"); &#125; else &#123; this.id = id; &#125; &#125; public void setName(String name) &#123; this.name = name; &#125; public boolean equals(Object o) &#123; if (o == this) &#123; return true; &#125; else if (!(o instanceof Lombok)) &#123; return false; &#125; else &#123; Lombok other = (Lombok)o; if (!other.canEqual(this)) &#123; return false; &#125; else &#123; Object this$id = this.getId(); Object other$id = other.getId(); if (this$id == null) &#123; if (other$id != null) &#123; return false; &#125; &#125; else if (!this$id.equals(other$id)) &#123; return false; &#125; Object this$name = this.getName(); Object other$name = other.getName(); if (this$name == null) &#123; if (other$name != null) &#123; return false; &#125; &#125; else if (!this$name.equals(other$name)) &#123; return false; &#125; return true; &#125; &#125; &#125; protected boolean canEqual(Object other) &#123; return other instanceof Lombok; &#125; public int hashCode() &#123; int PRIME = true; int result = 1; Object $id = this.getId(); int result = result * 59 + ($id == null ? 43 : $id.hashCode()); Object $name = this.getName(); result = result * 59 + ($name == null ? 43 : $name.hashCode()); return result; &#125; public String toString() &#123; return "Lombok(id=" + this.getId() + ", name=" + this.getName() + ")"; &#125;&#125; @Slf4j@Slf4j ä½œç”¨äºŽ ç±» ï¼Œè‡ªåŠ¨ç”Ÿæˆæ—¥å¿—å¸¸é‡ log ï¼ŒåŸºäºŽ logback ã€‚å¯¹åº”çš„è¿˜æœ‰ @Log4j ç­‰æ³¨è§£ã€‚ 12345678@Slf4jpublic class Lombok &#123; public static void main(String[] args) &#123; log.info("info log print ..."); &#125;&#125; 1234567891011121314151617181920//// Source code recreated from a .class file by IntelliJ IDEA// (powered by Fernflower decompiler)//package org.demo.pojo;import org.slf4j.Logger;import org.slf4j.LoggerFactory;public class Lombok &#123; private static final Logger log = LoggerFactory.getLogger(Lombok.class); public Lombok() &#123; &#125; public static void main(String[] args) &#123; log.info("info log print ..."); &#125;&#125;]]></content>
      <categories>
        <category>â‘¢ å¥‡æŠ€æ·«å·§</category>
      </categories>
      <tags>
        <tag>Lombok</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaçœ¼ä¸­çš„XML]]></title>
    <url>%2F2019%2F07%2F01%2FJava%E7%9C%BC%E4%B8%AD%E7%9A%84XML%2F</url>
    <content type="text"><![CDATA[XML å› ä¸ºå…·æœ‰è‰¯å¥½çš„æ•°æ®æè¿°èƒ½åŠ›å’Œè·¨å¹³å°æ€§ï¼Œè¢«å¹¿æ³›åº”ç”¨äºŽæ•°æ®å­˜å‚¨å’Œäº¤æ¢ç­‰ï¼Œæ¯”å¦‚ç”¨ä½œé…ç½®æ–‡ä»¶ç­‰ã€‚ åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¹Ÿéœ€è¦å¤„ç† XMLæ•°æ®ã€‚è¿™é‡Œå°±æ¥ä»‹ç»å‡ ç§åœ¨ Java ä¸­å¸¸è§çš„å¯¹ XML çš„å¤„ç†æ–¹æ³•ã€‚ ä½¿ç”¨å»ºè®®: æŽ¨èç›´æŽ¥ä½¿ç”¨ Dom4j ï¼Œè‹¥è¿½æ±‚æ€§èƒ½å¯å°è¯• SAX ã€‚ DOM å’Œ SAX æ˜¯ Java æä¾›çš„åŸºç¡€çš„å¤„ç†æ–¹æ³•ï¼Œå±žäºŽ JAXP ï¼Œ JDom å’Œ Dom4j æ˜¯å»ºç«‹å…¶ä¸Šçš„ç¬¬ä¸‰æ–¹åº“ã€‚ æ¶‰åŠ è¯´æ˜Ž ä¼˜åŠ£ DOM åŸºäºŽ domæ ‘ çš„å¤„ç†æ–¹å¼ï¼Œä¸Žå¹³å°æ— å…³è§£æžæ–¹å¼ï¼Œéµå¾ª w3c æ ‡å‡† ã€‚ ä»¥æ ‘ç»“æž„å¤„ç†æ•°æ®ï¼Œæ“ä½œæ–¹ä¾¿ã€‚å†…å­˜ä¸€æ¬¡æ€§åŠ è½½ DOMæ ‘ï¼Œä¸åˆ©äºŽå¤§æ•°æ®é‡çš„å¤„ç†ã€‚ SAX åŸºäºŽäº‹ä»¶é©±åŠ¨çš„å¤„ç†æ–¹å¼ã€‚ è¾¹è¯»è¾¹å¤„ç†ï¼Œå†…å­˜å ç”¨å°ï¼Œè§£æžé€Ÿåº¦å¿«ï¼Œå› ä¸ºé€è¡Œè§£æžä¸åˆ©äºŽéšæœºè®¿é—®å’Œæ“ä½œã€‚ JDom ä»…ä½¿ç”¨å…·ä½“ç±»è€Œä¸ä½¿ç”¨æŽ¥å£ï¼ŒAPI å¤§é‡ä½¿ç”¨ Collection ç±»ã€‚ æä¾›çš„ API éžå¸¸åˆ©äºŽç¼–ç ï¼Œä½†æ€§èƒ½è¾ƒå¼±ï¼Œå­˜åœ¨å†…å­˜æº¢å‡ºé£Žé™©ã€‚ Dom4j èµ·æºè‡ª JDom ã€‚ä½¿ç”¨æŽ¥å£å’ŒæŠ½è±¡åŸºç¡€ç±»æ–¹æ³•ã€‚ä¼˜ç§€è€Œå¼ºå¤§çš„ API ã€‚ æ˜“ç”¨æ€§å’Œæ€§èƒ½å…¼é¡¾çš„ API ï¼Œæˆä¸ºäº†è®¸å¤šå¼€æºæ¡†æž¶çš„æ ‡é…å¤„ç†æ–¹å¼ã€‚ æ€§èƒ½å¯¹æ¯” 123è§£æžè€—æ—¶ï¼šJDom &gt; DOM &gt; Dom4j &gt;&gt; SAXç”Ÿæˆè€—æ—¶: DOM &gt; JDom &gt; Dom4j &gt;&gt; SAX è®¤è¯† XMLXML (å¯æ‰©å±•æ ‡è®°è¯­è¨€) ï¼Œä¸€ç§é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œç”±ä¼—å¤šèŠ‚ç‚¹æ ‡ç­¾ç»„æˆï¼Œæ€»ä½“å‘ˆæ ‘ç»“æž„ï¼Œå¯ä»¥æœ‰æ•ˆçš„æè¿°å¤æ‚çš„æ•°æ®ç»“æž„ã€‚ XML å¸¸è§èŠ‚ç‚¹ç±»åž‹ è¯´æ˜Ž document æ–‡æ¡£å¯¹è±¡æ¨¡åž‹ element æ ‡ç­¾å…ƒç´  attribute å±žæ€§ æœ¬æ–‡ä¼šä»¥æ­¤ XML ä¸ºä¾‹ï¼Œä»‹ç»ç›¸å…³åŠŸèƒ½çš„ç®€å•ä½¿ç”¨ã€‚ 1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;transaction&gt; &lt;object id=&quot;1&quot;&gt; &lt;name&gt;Neo&lt;/name&gt; &lt;year&gt;1999&lt;/year&gt; &lt;/object&gt; &lt;object id=&quot;2&quot;&gt; &lt;name&gt;NEO&lt;/name&gt; &lt;year&gt;2199&lt;/year&gt; &lt;/object&gt;&lt;/transaction&gt; DOMDOM ä¼šä¸€æ¬¡æ€§åŠ è½½å°†æ•´ä¸ª XMLï¼Œå¹¶å°†å…¶è§†ä¸ºdomæ ‘ ï¼Œæ ‘ç”±èŠ‚ç‚¹æž„æˆã€‚ æ ‡ç­¾ã€æ ‡ç­¾ä¹‹é—´çš„é—´éš”å†…å®¹ã€å±žæ€§ç­‰éƒ½è¢«è§†ä¸ºèŠ‚ç‚¹ ã€‚ èŠ‚ç‚¹ç±»åž‹ nodeType nodeName nodeValue Element Node.ELEMENT_NODE å…ƒç´ å null Attr Node.ATTRIBUTE_NODE å±žæ€§å å±žæ€§å€¼ Text Node.TEXT_NODE #text èŠ‚ç‚¹å†…å®¹ è§£æž1234567891011121314151617181920212223242526272829303132333435363738@Testpublic void domReader() throws ParserConfigurationException, IOException, SAXException &#123; DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); DocumentBuilder db = dbf.newDocumentBuilder(); // è§£æžæ–‡ä»¶ Document document = db.parse(inputStream); // å…ƒç´ èŠ‚ç‚¹ï¼šé€šè¿‡èŠ‚ç‚¹åèŽ·å– NodeList nodeList = document.getElementsByTagName("object"); for (int i = 0; i &lt; nodeList.getLength(); i++) &#123; Node node = nodeList.item(i); // å±žæ€§ï¼šèŽ·å–æ‰€æœ‰å±žæ€§ NamedNodeMap attrs = node.getAttributes(); for (int j = 0; j &lt; attrs.getLength() ; j++) &#123; // å±žæ€§æœ¬èº«ä¹Ÿæ˜¯èŠ‚ç‚¹ String attrName = attrs.item(j).getNodeName(); // id String attrValue = attrs.item(j).getNodeValue(); // 1 &#125; // å±žæ€§ï¼šé€šè¿‡å±žæ€§åèŽ·å–ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼‰ Element element = (Element) nodeList.item(i); String attrValue = element.getAttribute("id"); // 1 // èŠ‚ç‚¹ï¼šå­èŠ‚ç‚¹ NodeList childNodes = node.getChildNodes(); // length : 5 for (int j = 0; j &lt; childNodes.getLength(); j++) &#123; String nodeName = childNodes.item(j).getNodeName(); // è¿‡æ»¤å‡ºå…ƒç´ èŠ‚ç‚¹ï¼ˆæ ‡ç­¾å’Œæ ‡ç­¾ä¹‹é—´çš„é—´éš”éƒ½è¢«è§†ä¸ºèŠ‚ç‚¹ï¼‰ if (childNodes.item(j).getNodeType() == Node.ELEMENT_NODE) &#123; String no_nodeValue = childNodes.item(j).getNodeValue(); // null String nodeValue = childNodes.item(j).getFirstChild().getNodeValue(); // Neo // ä¼šåŒ…å«å­èŠ‚ç‚¹æ–‡æœ¬å†…å®¹ String nodeText = childNodes.item(j).getTextContent(); // Neo &#125; &#125; &#125;&#125; ç”Ÿæˆ123456789101112131415161718192021222324252627282930313233@Testpublic void domWriter() throws ParserConfigurationException, TransformerException &#123; DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); DocumentBuilder db = dbf.newDocumentBuilder(); Document document = db.newDocument(); // FIXME åŽ»é™¤ standalone ï¼Œä½†æ˜¯ä¼šé€ æˆä¸æ¢è¡Œ document.setXmlStandalone(true); Element rootNode = document.createElement("transaction"); // åˆ›å»ºèŠ‚ç‚¹ Element objectNode = document.createElement("object"); // è®¾ç½®å±žæ€§ objectNode.setAttribute("id", "1"); Element nameNode = document.createElement("name"); // è®¾ç½®èŠ‚ç‚¹å€¼ nameNode.setTextContent("Neo"); Element yearNode = document.createElement("year"); yearNode.setTextContent("1999"); // è¿½åŠ èŠ‚ç‚¹ objectNode.appendChild(nameNode); objectNode.appendChild(yearNode); rootNode.appendChild(objectNode); document.appendChild(rootNode); TransformerFactory transformerFactory = TransformerFactory.newInstance(); Transformer transformer = transformerFactory.newTransformer(); // è®¾ç½®è¾“å‡ºå±žæ€§: æ¢è¡Œ transformer.setOutputProperty(OutputKeys.INDENT, "yes"); // è¾“å‡ºæ–‡ä»¶ transformer.transform(new DOMSource(document), new StreamResult(new File("domTest.xml")));&#125; domTest.xml 123456&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;transaction&gt;&lt;object id="001"&gt;&lt;name&gt;Neo&lt;/name&gt;&lt;year&gt;1999&lt;/year&gt;&lt;/object&gt;&lt;/transaction&gt; SAXSAX ä½¿ç”¨ Hander è¾¹è§£æžè¾¹å¤„ç†ï¼Œåœ¨å¯¹åº”ä½ç½®ä¼šè§¦å‘æ‰§è¡Œå¯¹åº”æ–¹æ³•ã€‚ Handler å¸¸ç”¨æ–¹æ³• è¯´æ˜Ž startDocument() æ–‡æ¡£å¼€å§‹æ—¶è§¦å‘ã€‚ endDocument() æ–‡æ¡£ç»“æŸæ—¶è§¦å‘ã€‚ startElement(String uri, String localName, String qName, Attributes attributes) å…ƒç´ èŠ‚ç‚¹å¼€å§‹æ—¶è§¦å‘ã€‚ endElement(String uri, String localName, String qName) å…ƒç´ èŠ‚ç‚¹ç»“æŸæ—¶è§¦å‘ã€‚ characters(char[] ch, int start, int length) å¯ä»¥æŽ¥æ”¶å…ƒç´ å†…å­—ç¬¦æ•°æ®çš„æ–¹æ³•ã€‚ è§£æž12345678@Testpublic void saxReader() throws ParserConfigurationException, SAXException, IOException &#123; SAXParserFactory factory = SAXParserFactory.newInstance(); SAXParser saxParser = factory.newSAXParser(); // è‡ªå®šä¹‰ä¸€ä¸ª Handler SaxParserHandler handler = new SaxParserHandler(); saxParser.parse(inputStream, handler);&#125; ParserHandlerè‡ªå®šä¹‰ä¸€ä¸ª Handler ç”¨äºŽè§£æžå¤„ç† ï¼Œéœ€è¦ç»§æ‰¿ org.xml.sax.helpers.DefaultHandler ã€‚ characters() å¯ä»¥æ‹¿åˆ°èŠ‚ç‚¹å€¼ï¼Œä½†éœ€è¦æ³¨æ„ï¼š å’Œ DOM ä¸€æ · ç©ºç™½ä¹Ÿè¢«è¯†åˆ«ä¸ºèŠ‚ç‚¹ã€‚ å› ä¸º SAX ä¼šå°† dom åˆ†å—è§£æž ï¼ˆé»˜è®¤2kï¼‰ï¼Œæ‰€ä»¥ç›´æŽ¥èŽ·å–çš„èŠ‚ç‚¹å€¼ä¸ä¸€å®šæ˜¯å®Œæ•´çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192public class SaxParserHandler extends DefaultHandler &#123; /** * è®°å½•å½“å‰èŠ‚ç‚¹å…ƒç´ å */ private String currentNode; private StringBuilder sb = new StringBuilder(); /** * è§£æžDomå¼€å§‹ * @throws SAXException */ @Override public void startDocument() throws SAXException &#123; super.startDocument(); &#125; /** * è§£æžDomç»“æŸ * @throws SAXException */ @Override public void endDocument() throws SAXException &#123; super.endDocument(); &#125; /** * è§£æžæ ‡ç­¾å¼€å§‹ * @param uri * @param localName * @param qName ä¾¿ç­¾å * @param attributes å±žæ€§é›†åˆ * @throws SAXException */ @Override public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException &#123; super.startElement(uri, localName, qName, attributes); currentNode = qName; if ("object".equals(qName))&#123; // å±žæ€§ï¼šé€šè¿‡å±žæ€§åèŽ·å– String attrValue = attributes.getValue("id"); // 1 // å±žæ€§ï¼šéåŽ†ï¼Œé€šè¿‡ç´¢å¼•èŽ·å– for (int i = 0; i &lt; attributes.getLength(); i++) &#123; String attrName = attributes.getQName(i); // id String attrVlaue = attributes.getValue(i); // 1 &#125; &#125; &#125; /** * è§£æžæ ‡ç­¾ç»“æŸ * @param uri * @param localName * @param qName * @throws SAXException */ @Override public void endElement(String uri, String localName, String qName) throws SAXException &#123; super.endElement(uri, localName, qName); if (StringUtils.isNotEmpty(currentNode))&#123; System.out.println(currentNode + ":" + sb.toString()); // name:NEO &#125; currentNode = ""; sb.delete( 0, sb.length()); &#125; /** * èŽ·å–èŠ‚ç‚¹å€¼ ï¼ˆå’Œ DOM ä¸€æ · ç©ºç™½ä¹Ÿè¢«è¯†åˆ«ä¸ºèŠ‚ç‚¹ï¼‰ * @param ch domå—å†…å®¹ , é»˜è®¤2k * @param start * @param length * @throws SAXException */ @Override public void characters(char[] ch, int start, int length) throws SAXException &#123; super.characters(ch, start, length); // FIXME ç”±äºŽ SAX åˆ†å—è§£æžï¼Œç›´æŽ¥èŽ·å–çš„å¯èƒ½ä¸å®Œæ•´ String value = new String(ch, start, length); // Neo ï¼ˆç†æƒ³çŠ¶æ€ï¼‰ if (StringUtils.isNotEmpty(currentNode) &amp;&amp; StringUtils.isNotEmpty(value.trim()))&#123; sb.append(value); &#125; &#125;&#125; ç”Ÿæˆ12345678910111213141516171819202122232425262728293031@Testpublic void saxWriter() throws TransformerConfigurationException, SAXException &#123; SAXTransformerFactory factory = (SAXTransformerFactory) SAXTransformerFactory.newInstance(); TransformerHandler handler = factory.newTransformerHandler(); // è¾“å‡ºè®¾ç½® ï¼ˆç¼–ç ï¼Œæ¢è¡Œï¼‰ Transformer transformer = handler.getTransformer(); transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8"); transformer.setOutputProperty(OutputKeys.INDENT, "yes"); Result result = new StreamResult(new File("saxTest.xml")); // FIXME é…ç½®éœ€è¦åœ¨æ­¤ä¹‹å‰ handler.setResult(result); // start å¿…é¡»åœ¨ setResult ä¹‹åŽ handler.startDocument(); AttributesImpl attr = new AttributesImpl(); attr.addAttribute("", "", "id", "", "1"); handler.startElement("", "", "transaction", attr); attr.clear(); handler.startElement("", "", "name", attr); handler.characters("Neo".toCharArray(), 0, "abc".length()); handler.endElement("", "", "name"); handler.startElement("", "", "year", null); handler.characters("1999".toCharArray(), 0, "1999".length()); handler.endElement("", "", "year"); handler.endElement("", "", "transaction"); handler.endDocument();&#125; saxTest.xml 1234&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;transaction id="1"&gt;&lt;name&gt;Neo&lt;/name&gt;&lt;year&gt;1999&lt;/year&gt;&lt;/transaction&gt; JDomJDom çš„ API ä½¿ç”¨é›†åˆæ¥å­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯ï¼Œæ“ä½œèµ·æ¥ååˆ†ä¾¿åˆ©ã€‚ æ·»åŠ  jdom ä¾èµ–ï¼Œå¦‚ä¸‹ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.jdom&lt;/groupId&gt; &lt;artifactId&gt;jdom2&lt;/artifactId&gt; &lt;version&gt;2.0.6&lt;/version&gt;&lt;/dependency&gt; è§£æž123456789101112131415161718192021222324252627282930@Testpublic void jDomReader() throws IOException, JDOMException &#123; SAXBuilder saxBuilder = new SAXBuilder(); Document document = saxBuilder.build(new InputStreamReader(inputStream, "UTF-8")); // æ ¹èŠ‚ç‚¹ Element rootElement = document.getRootElement(); // å­èŠ‚ç‚¹ List&lt;Element&gt; elementList = rootElement.getChildren(); for (Element element : elementList) &#123; // èŽ·å–å…ƒç´ ç´¢å¼•ä½ int index = elementList.indexOf(element); // å±žæ€§ï¼šéåŽ† List&lt;Attribute&gt; attrs = element.getAttributes(); for (Attribute attr : attrs) &#123; attr.getName(); // id attr.getValue(); // 1 &#125; // å±žæ€§ï¼šé€šè¿‡å±žæ€§åèŽ·å– String attrValue = element.getAttributeValue("id"); // 1 // å…ƒç´  List&lt;Element&gt; childElements = element.getChildren(); for (Element childElement : childElements) &#123; childElement.getName(); // name childElement.getValue(); // Neo &#125; &#125;&#125; ç”Ÿæˆ1234567891011121314151617181920212223242526@Testpublic void jDomWriter() throws IOException &#123; Element rootNode = new Element("transaction"); Element objectNode = new Element("object"); objectNode.setAttribute("id", "1"); Element nameNode = new Element("name"); nameNode.setText("Neo"); objectNode.addContent(nameNode); Element yearNode = new Element("year"); yearNode.setText("1999"); objectNode.addContent(yearNode); rootNode.addContent(objectNode); Document document = new Document(rootNode); // è®¾ç½®è¾“å‡ºæ ¼å¼ï¼ˆæ¢è¡Œç¼©è¿›ï¼Œå­—ç¬¦ï¼‰ Format format = Format.getCompactFormat(); format.setIndent(" "); format.setEncoding("UTF-8"); XMLOutputter outputter = new XMLOutputter(format); outputter.output(document, new FileOutputStream(new File("jDomTest.xml")));&#125; jDomTest.xml 1234567&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;transaction&gt; &lt;object id="1"&gt; &lt;name&gt;Neo&lt;/name&gt; &lt;year&gt;1999&lt;/year&gt; &lt;/object&gt;&lt;/transaction&gt; Dom4jDom4j ä¸­éœ€è¦é€šè¿‡è¿­ä»£å™¨æ¥éåŽ†ç›¸å…³ä¿¡æ¯ã€‚ æ·»åŠ  dom4j ä¾èµ–ï¼Œå¦‚ä¸‹ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.dom4j&lt;/groupId&gt; &lt;artifactId&gt;dom4j&lt;/artifactId&gt; &lt;version&gt;2.1.1&lt;/version&gt;&lt;/dependency&gt; è§£æž1234567891011121314151617181920212223242526272829303132@Testpublic void dom4jReader() throws DocumentException &#123; SAXReader reader = new SAXReader(); Document document = reader.read(inputStream); // æ ¹èŠ‚ç‚¹ Element rootElement = document.getRootElement(); // å­èŠ‚ç‚¹ (æ­¤å¤„æ•ˆæžœç­‰åŒä»¥ä¸‹) Iterator&lt;Element&gt; iterator = rootElement.elementIterator(); // å…ƒç´ ï¼šé€šè¿‡å…ƒç´ åèŽ·å– Iterator&lt;Element&gt; object = rootElement.elementIterator("object"); while (object.hasNext()) &#123; Element element = object.next(); // å±žæ€§ï¼šéåŽ† List&lt;Attribute&gt; attrList = element.attributes(); for (Attribute attribute : attrList) &#123; attribute.getName(); // id attribute.getValue(); // 1 &#125; // å±žæ€§ï¼šé€šè¿‡å±žæ€§åèŽ·å– element.attributeValue("id"); // 1 // å…ƒç´ ï¼šéåŽ† Iterator&lt;Element&gt; childIter = element.elementIterator(); while (childIter.hasNext()) &#123; Element childElement = childIter.next(); childElement.getName(); // name childElement.getStringValue(); // Neo &#125; &#125;&#125; ç”Ÿæˆ123456789101112131415161718192021222324252627@Testpublic void dom4jWriter() &#123; Document document = DocumentHelper.createDocument(); Element rootNode = document.addElement("transaction"); Element objectNode = rootNode.addElement("object"); objectNode.addAttribute("id", "1"); Element nameNode = objectNode.addElement("name"); nameNode.setText("Neo"); Element yearNode = objectNode.addElement("year"); yearNode.setText("1999"); // è®¾ç½®è¾“å‡ºæ ¼å¼ ï¼ˆæ¢è¡Œç¼©è¿›ï¼Œå­—ç¬¦ï¼‰ OutputFormat format = OutputFormat.createPrettyPrint(); format.setEncoding("UTF-8"); XMLWriter writer = null; try &#123; writer = new XMLWriter(new FileOutputStream("dom4jTest.xml"), format); // è®¾ç½®ä¸ºä¸è½¬ä¹‰ ï¼ˆé»˜è®¤è½¬ä¹‰ï¼‰ // writer.setEscapeText(false); writer.write(document); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; writer.close(); &#125;&#125; dom4jTest.xml 12345678&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;transaction&gt; &lt;object id="1"&gt; &lt;name&gt;Neo&lt;/name&gt; &lt;year&gt;1999&lt;/year&gt; &lt;/object&gt;&lt;/transaction&gt;]]></content>
      <categories>
        <category>â‘  Starter</category>
      </categories>
      <tags>
        <tag>XML</tag>
        <tag>DOM</tag>
        <tag>SAX</tag>
        <tag>JDom</tag>
        <tag>Dom4j</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mybatisä¸‰å‰‘å®¢]]></title>
    <url>%2F2019%2F06%2F10%2FMybatis%E4%B8%89%E5%89%91%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[MyBatis è¿™ç§åŠå°è£…çš„ORMæ¡†æž¶ç›¸è¾ƒå…¨å°è£…ï¼Œæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯ SQLä¼˜åŒ–æ–¹ä¾¿ï¼Œ ä½†ä¹Ÿæœ‰ä¸å°‘ç—›ç‚¹ï¼Œå¦‚ ç®€å•çš„ CRUD é€»è¾‘éƒ½éœ€è¦è‡ªè¡Œå¤„ç†ï¼Œ*.xml ä¸èƒ½å’Œ *.java æ–‡ä»¶å‹å¥½å¥‘åˆç­‰ã€‚ å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚è¿™é‡Œä»‹ç»å‡ ä¸ªå·¥å…·ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³ Mybatis çš„ç—›ç‚¹ï¼Œå¤§å¤§çš„æé«˜å·¥ä½œæ•ˆçŽ‡ã€‚ æ¶‰åŠ è¯´æ˜Ž Mybatis Generator ä»£ç ç”Ÿæˆå™¨ã€‚ Mybatis Plugin IDEæ’ä»¶ï¼Œè§£å†³ *.xml ä¸èƒ½å’Œ *.java æ–‡ä»¶å®Œç¾Žå¥‘åˆç­‰ã€‚ Mybatis PageHelper åˆ†é¡µæ’ä»¶ã€‚ Mybatis GeneratorMybatis Generator æ˜¯ Mybatis æä¾›çš„ä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç”ŸæˆDAOå±‚æ‰€éœ€çš„*.java , *.xml å’Œ å®žä½“ç±» ï¼ŒåŒ…æ‹¬å¯ä»¥ç®€å•çš„CRUDç›¸å…³æ‰€éœ€ã€‚ æ³¨æ„ : é»˜è®¤æƒ…å†µä¸‹ï¼Œåå¤è¿è¡Œ *.java æ–‡ä»¶ä¼šè¢«è¦†ç›–ï¼Œè€Œ *.xml ä¼šåˆå¹¶ã€‚ 12345678&lt;!-- generator --&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;scope&gt;compile&lt;/scope&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; generatorConfig.xml123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN" "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;&lt;!-- todo å­—æ®µæ³¨é‡Š --&gt;&lt;!-- æ³¨æ„ç›¸å…³ç›®å½•ä¸€å®šè¦å­˜åœ¨ï¼Œä¸”åˆ†æ¨¡å—æ—¶è¦åŠ æ¨¡å—ç›®å½•å --&gt;&lt;generatorConfiguration&gt; &lt;context id="MysqlContext" targetRuntime="MyBatis3" defaultModelType="flat"&gt; &lt;property name="beginningDelimiter" value="`"/&gt; &lt;property name="endingDelimiter" value="`"/&gt; &lt;!-- optionalï¼Œæ—¨åœ¨åˆ›å»ºclassæ—¶ï¼ŒåŽ»é™¤å¤šä½™è­¦å‘Šæ³¨é‡Šç­‰ --&gt; &lt;commentGenerator&gt; &lt;property name="suppressDate" value="true"/&gt; &lt;property name="suppressAllComments" value="true"/&gt; &lt;/commentGenerator&gt; &lt;jdbcConnection driverClass="com.mysql.jdbc.Driver" connectionURL="jdbc:mysql://localhost:3306/framework-x" userId="root" password="root"&gt; &lt;/jdbcConnection&gt; &lt;!-- ç”Ÿæˆçš„pojoæ‰€åœ¨åŒ… --&gt; &lt;javaModelGenerator targetPackage="tk.gushizone.system.common.pojo" targetProject="system-common/src/main/java"/&gt; &lt;!-- ç”Ÿæˆçš„mapperæ‰€åœ¨ç›®å½• --&gt; &lt;sqlMapGenerator targetPackage="tk.gushizone.system.common.dao.sqlmap" targetProject="system-common/src/main/java"/&gt; &lt;!-- &lt;sqlMapGenerator targetPackage="mapper" targetProject="web/src/main/resources"/&gt; --&gt; &lt;!-- é…ç½®mapperå¯¹åº”çš„javaæ˜ å°„ --&gt; &lt;javaClientGenerator targetPackage="tk.gushizone.system.common.dao" targetProject="system-common/src/main/java" type="XMLMAPPER" /&gt; &lt;!-- ä½œç”¨è¡¨ (å…³é—­æ‰€æœ‰ç¤ºä¾‹) --&gt; &lt;table tableName="sys_user" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false"/&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt; å¯åŠ¨æ–¹å¼generator æœ‰å¾ˆå¤šå¯åŠ¨æ–¹å¼ï¼Œä¸ªäººè®¤ä¸º mainæ–¹æ³• å¯åŠ¨ï¼Œæœ€ä¸ºå‹å¥½ï¼Œä»¥ä¸‹ä¸ºç¤ºä¾‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738package tk.gushizone.system.common.util;import org.mybatis.generator.api.MyBatisGenerator;import org.mybatis.generator.config.Configuration;import org.mybatis.generator.config.xml.ConfigurationParser;import org.mybatis.generator.internal.DefaultShellCallback;import java.io.File;import java.util.ArrayList;import java.util.List;/** * mybatis generator * @author gushizone@gmail.com * @createTime 2019-05-06 15:33 */public class GeneratorDisplay &#123; private static final String ACTIVE_CONFIG = "generatorConfig.xml"; public static void main(String[] args) throws Exception &#123; ClassLoader classLoader = GeneratorDisplay.class.getClassLoader(); GeneratorDisplay.generator(classLoader.getResource(ACTIVE_CONFIG).getFile()); &#125; public static void generator(String configMode) throws Exception &#123; List&lt;String&gt; warnings = new ArrayList&lt;&gt;(); boolean overwrite = true; File configFile = new File(configMode); ConfigurationParser cp = new ConfigurationParser(warnings); Configuration config = cp.parseConfiguration(configFile); DefaultShellCallback callback = new DefaultShellCallback(overwrite); MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config, callback, warnings); myBatisGenerator.generate(null); &#125;&#125; Mybatis Plugin ç›¸å…³IDEæ’ä»¶æœ‰å¾ˆå¤šï¼Œä»¥ IDEA ä¸ºä¾‹ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ Free Mybatis Plugin ã€‚ç±»ä¼¼çš„ Mybatis Plugin å’Œ Mybatis Plus åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä½†æ˜¯æ”¶è´¹ã€‚ ä¸»è¦åŠŸèƒ½ å…³è” *.java å’Œ *.xml ï¼Œå¹¶æä¾›ç›¸å…³éªŒè¯ã€‚ è‡ªåŠ¨è¡¥å…¨å’Œä»£ç ç”Ÿæˆç­‰ã€‚ Mybatis PageHelperMybatis PageHelper æ˜¯ä¸€æ¬¾éžå¸¸å¥½ç”¨çš„ Mybatis åˆ†é¡µæ’ä»¶ã€‚æ”¯æŒå„ç§æ•°æ®åº“ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿååˆ†æ–¹ä¾¿ã€‚ pagehelperå®˜ç½‘ pagehelperæºç  123456&lt;!-- pagehelper --&gt;&lt;dependency&gt; &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt; &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt;&lt;/dependency&gt; 12345pagehelper: helperDialect: mysql reasonable: true supportMethodsArguments: true params: count=countSql åˆ†é¡µæ–¹å¼è¿™é‡Œç®€å•çš„ä»‹ç»ä¸€ä¸‹åˆ©ç”¨ PageHelper å®žçŽ°åˆ†é¡µçš„æ–¹å¼ã€‚ Mybatis PageHelper æä¾›äº†å¾ˆå¤šç§å®žçŽ°æ–¹å¼ï¼Œè¿™é‡Œåªåˆ—ä¸¾å¸¸ç”¨çš„æ–¹å¼ã€‚ æ¶‰åŠ è¯´æ˜Ž PageHelper.startPage é™æ€æ–¹æ³• æŽ¨èå¼€å‘ä½¿ç”¨ï¼Œè€¦åˆåº¦å’Œä»£ç ä¾µå…¥æ€§å°ã€‚ ISelectæŽ¥å£ æ–¹å¼ æŽ¨èæ¡†æž¶ä½¿ç”¨ï¼Œä»£ç ä¾µå…¥æ€§å°ï¼Œä¸”å®‰å…¨æ€§é«˜ã€‚ PageHelper.startPage é™æ€æ–¹æ³•è¿™é‡Œä»‹ç»ä¸€ç§å¸¸ç”¨çš„æ–¹å¼ï¼š PageHelper.startPage + PageInfo ã€‚ åˆ†é¡µæ—¶ï¼Œsql ä¼šè¢«æ‹¦æˆªã€‚åˆ†é¡µåŽï¼Œå®žé™…è¿”å›žæ˜¯ Page&lt;E&gt; ç±»åž‹çš„å¯¹è±¡ï¼ŒPage æ˜¯ ArrayList çš„å­ç±» , å¦‚æžœæƒ³å–å‡ºåˆ†é¡µä¿¡æ¯ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ä¸º Page&lt;E&gt; ï¼Œæˆ–ä½¿ç”¨ PageInfoã€‚ 123456// èŽ·å–ç¬¬1é¡µï¼Œ10æ¡å†…å®¹ï¼Œé»˜è®¤æŸ¥è¯¢æ€»æ•°countPageHelper.startPage(1, 10);//ç´§è·Ÿç€çš„ç¬¬ä¸€ä¸ªselectæ–¹æ³•ä¼šè¢«åˆ†é¡µList&lt;Country&gt; list = countryMapper.selectAll();//ç”¨PageInfoå¯¹ç»“æžœè¿›è¡ŒåŒ…è£…PageInfo page = new PageInfo(list); ISelectæŽ¥å£ æ–¹å¼JDK8åŽï¼Œé…åˆ lambdaè¡¨è¾¾å¼ æ›´é€‚åˆæž¶æž„è®¾è®¡ã€‚ ISelectæŽ¥å£æ–¹å¼ åœ¨ JDK8 ä»¥å‰ä½¿ç”¨å¹¶ä¸å‹å¥½ï¼Œè¿™é‡Œä¸åŠ èµ˜è¿°ã€‚ å¯ä»¥å°†æ­¤æ®µä»£ç å°è£…åˆ°æž¶æž„åº•å±‚ï¼Œå†ç”¨ lambda é…åˆ ISelectæŽ¥å£ ï¼Œå¯ä»¥åšåˆ°åˆ†é¡µä»£ç åœ¨ä¸Šå±‚ä¸šåŠ¡ä»£ç ä¸­è¾¾åˆ°æ— ä¾µå…¥ã€‚ 12345// è¿”å›žPageå¯¹è±¡Page&lt;Country&gt; page = PageHelper.startPage(1, 10).doSelectPage(()-&gt; countryMapper.selectGroupBy());// è¿”å›žPageInfoå¯¹è±¡pageInfo = PageHelper.startPage(1, 10).doSelectPageInfo(() -&gt; countryMapper.selectGroupBy()); æŽ’åº123456789// å¼€å§‹åˆ†é¡µPageHelper.startPage(pageNum, pageSize);// æŽ’åºif (StringUtils.isNotEmpty(sortField))&#123; PageHelper.orderBy(sortField + " " + sortOrder);&#125;List&lt;SysUser001Dto&gt; list = mapper.selectByList(user); æ³¨æ„é¡¹PageHelper.startPageæ–¹æ³•é‡è¦æç¤ºåªæœ‰ç´§è·Ÿåœ¨PageHelper.startPageæ–¹æ³•åŽçš„ç¬¬ä¸€ä¸ªMybatisçš„æŸ¥è¯¢ï¼ˆSelectï¼‰æ–¹æ³•ä¼šè¢«åˆ†é¡µã€‚ çº¿ç¨‹å®‰å…¨æ€§ ï¼šåªè¦ PageHelper.startPage é™æ€æ–¹æ³•åŽè·Ÿç€ä¸€ä¸ªselect æ–¹æ³•å°±ä¼šçº¿ç¨‹å®‰å…¨ï¼Œå› ä¸ºåˆ†é¡µå‚æ•°å’Œçº¿ç¨‹æ˜¯ç»‘å®šçš„ ã€‚åä¹‹ï¼Œç”Ÿäº§çš„åˆ†é¡µå‚æ•°ä¼šä¸€ç›´å­˜äºŽè¯¥çº¿ç¨‹ä¸­ï¼Œæ²¡è¢«æ¶ˆè´¹ï¼Œå½“è¿™ä¸ªè¯¥çº¿ç¨‹è¢«å†æ¬¡è°ƒç”¨æ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿäº†èŽ«åå…¶å¦™çš„åˆ†é¡µã€‚ è¯·ä¸è¦é…ç½®å¤šä¸ªåˆ†é¡µæ’ä»¶è¯·ä¸è¦åœ¨ç³»ç»Ÿä¸­é…ç½®å¤šä¸ªåˆ†é¡µæ’ä»¶(ä½¿ç”¨Springæ—¶,mybatis-config.xmlå’ŒSpring&lt;bean&gt;é…ç½®æ–¹å¼ï¼Œè¯·é€‰æ‹©å…¶ä¸­ä¸€ç§ï¼Œä¸è¦åŒæ—¶é…ç½®å¤šä¸ªåˆ†é¡µæ’ä»¶)ï¼ åˆ†é¡µæ’ä»¶ä¸æ”¯æŒå¸¦æœ‰ for update è¯­å¥çš„åˆ†é¡µå¯¹äºŽå¸¦æœ‰for updateçš„sqlï¼Œä¼šæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯¹äºŽè¿™æ ·çš„sqlå»ºè®®æ‰‹åŠ¨åˆ†é¡µï¼Œæ¯•ç«Ÿè¿™æ ·çš„sqléœ€è¦é‡è§†ã€‚ åˆ†é¡µæ’ä»¶ä¸æ”¯æŒåµŒå¥—ç»“æžœæ˜ å°„ç”±äºŽåµŒå¥—ç»“æžœæ–¹å¼ä¼šå¯¼è‡´ç»“æžœé›†è¢«æŠ˜å ï¼Œå› æ­¤åˆ†é¡µæŸ¥è¯¢çš„ç»“æžœåœ¨æŠ˜å åŽæ€»æ•°ä¼šå‡å°‘ï¼Œæ‰€ä»¥æ— æ³•ä¿è¯åˆ†é¡µç»“æžœæ•°é‡æ­£ç¡®ã€‚]]></content>
      <categories>
        <category>â‘¢ å¥‡æŠ€æ·«å·§</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>Mybatis Generator</tag>
        <tag>Mybatis Plugin</tag>
        <tag>Mybatis PageHelper</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javap: äº†è§£ç¼–è¯‘å™¨çš„å†…éƒ¨å·¥ä½œ]]></title>
    <url>%2F2019%2F06%2F01%2Fjavap-%E4%BA%86%E8%A7%A3%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[javap : Java classæ–‡ä»¶åˆ†è§£å™¨ï¼Œå…¶å¯ä»¥å°†ä¸å¯è¯»å­—èŠ‚ç è½¬æ¢ä¸ºå¯¹åº”çš„å¯è¯»æŒ‡ä»¤ã€‚é€šè¿‡å¯¹ç…§æºç å’ŒæŒ‡ä»¤ï¼Œå¯ä»¥è®©æˆ‘ä»¬äº†è§£ç¼–è¯‘å™¨çš„å†…éƒ¨å·¥ä½œï¼Œå¯¹äºŽç†è§£ç¨‹åºæ‰§è¡Œè¿‡ç¨‹å’Œæ‰§è¡Œæ•ˆçŽ‡ç­‰éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚æœ¬æ–‡å°±æ¥ä»‹ç»ä¸€ä¸‹ javap çš„ç®€å•ä½¿ç”¨ã€‚ è®¤è¯† javapä¼—æ‰€å‘¨çŸ¥ï¼Œ *.java æ–‡ä»¶ä¼šè¢« javaç¼–è¯‘å™¨è½¬å˜ä¸º *.class å­—èŠ‚ç æ–‡ä»¶ï¼Œå†äº¤ç”±JVMè½¬å˜ä¸ºå¯¹åº”å¹³å°çš„æœºå™¨æŒ‡ä»¤ï¼Œè¿™å°±æ˜¯ Javaç¨‹åºå¤šå¹³å°å…¼å®¹çš„å…³é”®ã€‚ 1*.java -&gt; *.class -&gt; æœºå™¨æŒ‡ä»¤ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œç¼–è¯‘å™¨å¹¶ä¸æ˜¯ç®€å•çš„åŽ»é™¤æ‰€ä¸å¿…è¦çš„ä¸œè¥¿ (å¦‚æ³¨é‡Šï¼Œæ¢è¡Œç­‰)ï¼Œå†è½¬å˜ä¸º 16è¿›åˆ¶æ–‡ä»¶ï¼Œè€Œæ˜¯åšäº†ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œè¿™äº›è¡Œä¸ºæ˜¯æ— æ³•ç›´æŽ¥çŸ¥é“çš„ã€‚è™½ç„¶å­—èŠ‚ç ä¹Ÿæ˜¯å¯ä»¥è¢«è§£è¯»çš„ï¼Œä½†è¿™å¯¹äººæ¥è¯´å¹¶ä¸å‹å¥½ï¼Œè€Œä½¿ç”¨ JDK æä¾›çš„ javap å°±å¯ä»¥å°†ä¸å¯è¯»å­—èŠ‚ç è½¬æ¢ä¸ºå¯¹åº”çš„å¯è¯»æŒ‡ä»¤ã€‚ JDK ç›®å½•ç»“æž„ä»Ž JDK ç›®å½•ç»“æž„å¯ä»¥çœ‹å‡º : JDK = JRE + Tools&amp;Tool APIs ã€‚ javap æ­£æ˜¯ JDK æä¾›çš„å¼€å‘å·¥å…·ä¹‹ä¸€ã€‚ 12345678910.â”œâ”€â”€ bin # JDKå¼€å‘å·¥å…·çš„å¯æ‰§è¡Œæ–‡ä»¶â”‚ â”œâ”€â”€ java # Javaè§£é‡Šå™¨ : *.class -&gt; æœºå™¨æŒ‡ä»¤â”‚ â”œâ”€â”€ javac # Javaç¼–è¯‘å™¨ : *.java -&gt; *.classâ”‚ â”œâ”€â”€ javadoc # API æ–‡æ¡£ç”Ÿæˆå™¨â”‚ â”œâ”€â”€ javap # Java classæ–‡ä»¶åˆ†è§£å™¨â”‚ â””â”€â”€ ...â”œâ”€â”€ include # åŒ…å«Cè¯­è¨€å¤´æ–‡ä»¶,æ”¯æŒJavaæœ¬åœ°æŽ¥å£ä¸ŽJavaè™šæ‹Ÿæœºè°ƒè¯•ç¨‹åºæŽ¥å£çš„æœ¬åœ°ç¼–ç¨‹æŠ€æœ¯â”œâ”€â”€ jre # åŒ…å«: JVM + è¿è¡Œæ—¶çš„ç±»åŒ… + Javaåº”ç”¨å¯åŠ¨å™¨â””â”€â”€ lib # å¼€å‘å·¥å…·ä½¿ç”¨çš„å½’æ¡£åŒ…æ–‡ä»¶ ä½¿ç”¨ javapè¿™é‡Œåªåˆ—ä¸¾å¸¸ç”¨ javap çš„å¸¸ç”¨æŒ‡ä»¤ã€‚æ­£å¦‚æ‰€è§ javap -c å’Œ javap -v å¯ä»¥æ»¡è¶³ç»å¤§éƒ¨åˆ†éœ€æ±‚ã€‚ javap [options] class è¯´æ˜Ž -help / â€”help / -? å¸®åŠ©ã€‚ -v / -verbose è¾“å‡ºé™„åŠ ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç»å¤§éƒ¨åˆ†è¯¦ç»†ä¿¡æ¯ã€‚ -l è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨ã€‚ -package æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±»ã€‚ -p / -private æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜ã€‚ -c å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼–ã€‚ -sysinfo æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—)ã€‚ -constants æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡ã€‚ javap -c è¿™é‡Œæ¼”ç¤ºä»¥ä¸‹ javap -c çš„ç”¨æ³•å’ŒåŠŸèƒ½ã€‚ *.java 12345678public class JavapTest &#123; public static void main(String[] args) &#123; String str1 = "a" + "b" + "c"; String str2 = str1 + "dfg"; &#125;&#125; javap æ˜¯ä½œç”¨åœ¨ *.class ä¸Šçš„ï¼Œå…ˆä½¿ç”¨ javac èŽ·å¾— *.java å¯¹åº”çš„ *.class ã€‚ å¦‚æžœå¸Œæœ›ç›´æŽ¥åœ¨ shell ä¸­ä½¿ç”¨ JDKå·¥å…·ï¼Œéœ€è¦é…ç½®çŽ¯å¢ƒå˜é‡ã€‚ 12345678910111213141516171819202122232425262728# åœ¨javaæ–‡ä»¶ç›®å½•æ‰§è¡Œï¼Œä¼šåœ¨å½“å‰ç›®å½•èŽ·å¾—.classæ–‡ä»¶$ javac JavapTest.java# èŽ·å–å¯¹åº”.classæ–‡ä»¶çš„åç¼–è¯‘æŒ‡ä»¤$ javap -c JavapTestCompiled from "JavapTest.java"public class JavapTest &#123; public JavapTest(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object."&lt;init&gt;":()V 4: return public static void main(java.lang.String[]); Code: 0: ldc #2 // String abc 2: astore_1 3: new #3 // class java/lang/StringBuilder 6: dup 7: invokespecial #4 // Method java/lang/StringBuilder."&lt;init&gt;":()V 10: aload_1 11: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 14: ldc #6 // String dfg 16: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 19: invokevirtual #7 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 22: astore_2 23: return&#125; 1) ç¼–è¯‘å™¨å¯¹å­—ç¬¦å¸¸é‡æ‹¼æŽ¥çš„ä¼˜åŒ–ç”±ä»¥ä¸‹å¯ä»¥çœ‹å‡ºï¼Œå½“å¯¹å­—ç¬¦å¸¸é‡çš„æ‹¼æŽ¥æ—¶ï¼Œç¼–è¯‘å™¨ç›´æŽ¥åˆ›å»ºäº†æ‹¼æŽ¥ç»“æžœã€‚ 10: ldc #2 // String abc 2) ç¼–è¯‘å™¨å¯¹å­—ç¬¦å¯¹è±¡æ‹¼æŽ¥çš„ä¼˜åŒ–ç”±ä»¥ä¸‹å¯ä»¥çœ‹å‡ºï¼Œå½“å¯¹å­—ç¬¦å¯¹è±¡çš„æ‹¼æŽ¥æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ›å»º StringBuilder è¿›è¡Œæ‹¼æŽ¥ã€‚ 123456783: new #3 // class java/lang/StringBuilder6: dup7: invokespecial #4 // Method java/lang/StringBuilder."&lt;init&gt;":()V10: aload_111: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;14: ldc #6 // String dfg16: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;19: invokevirtual #7 // Method java/lang/StringBuilder.toString: IDEA æ•´åˆ javapä½¿ç”¨å‘½ä»¤ç¼–è¯‘å†åç¼–è¯‘ï¼Œåœ¨æ—¥å¸¸ä½¿ç”¨æ—¶è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œæ‰€æœ‰è¿™é‡Œä»‹ç»ä¸€ä¸‹ä½¿ç”¨ IDEAå¤–éƒ¨å·¥å…·ï¼ˆExternal Toolsï¼‰ æ·»åŠ  javap ï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥ä¼šååˆ†æ–¹ä¾¿ ã€‚ æŽ¨èä½¿ç”¨ javap -v ï¼Œå› æœªçŸ¥åŽŸå›  javap -c å¹¶ä¸èƒ½æ­£å¸¸è¾“å‡ºå®Œæ•´ä¿¡æ¯ðŸ¤£ã€‚ æ·»åŠ æ–¹æ³• è¿›å…¥ preferences -&gt; Tools -&gt; External Tools æ·»åŠ  è®¾ç½®ç¨‹åºä½ç½®Program : $JDKPath$/bin/javap ã€‚ è®¾ç½®å‚æ•°Arguments : -v $FileClass$ ã€‚ è®¾ç½®å·¥ä½œç©ºé—´ä¸ºç¼–è¯‘è¾“å‡ºä½ç½®Working directory : $OutputPath$ ã€‚ ä½¿ç”¨æ–¹æ³• æœ€å¯¹åº”æ–‡ä»¶å³å‡» External Tools å³å¯ä½¿ç”¨æ‰€é…ç½®çš„å¤–éƒ¨å·¥å…·ã€‚]]></content>
      <categories>
        <category>â‘¢ å¥‡æŠ€æ·«å·§</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDK</tag>
        <tag>javap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringBootå¸¸ç”¨æŠ€æœ¯æ•´åˆå’Œä½¿ç”¨]]></title>
    <url>%2F2019%2F05%2F20%2FSpringBoot%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF%E6%95%B4%E5%90%88%E5%92%8C%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡çŽ¯å¢ƒåŸºäºŽ springboot 2.0.1.RELEASE , springboot è¦æ±‚JDK8+ ã€‚ è®¤è¯† SpringBootSpring Boot : ä¸Ž Spring4 ä¸€èµ·è¯žç”Ÿï¼Œæ˜¯ä¸€ä¸ªå¾®æ¡†æž¶ã€‚ æ•´åˆäº†è®¸å¤šå­é¡¹ç›®ï¼Œä½¿ç”¨å¾ˆå°‘çš„é…ç½®å°±å¯ä»¥ååˆ†å¿«é€Ÿçš„æ­å»ºå’Œè¿è¡Œé¡¹ç›®ã€‚çº¦å®šä¼˜å…ˆäºŽé…ç½®ï¼Œå‡å°‘æ ·æ¿åŒ–çš„é…ç½®ã€‚ è‡ªåŠ¨è£…é…ï¼šspringMVCï¼Œjdbcï¼Œäº‹åŠ¡ç­‰ã€‚ ä½¿ç”¨åµŒå…¥å¼å®¹å™¨ï¼štomcatï¼Œnettyï¼Œjettyç­‰ã€‚ä¸éœ€è¦æ‰“æˆ war åŒ…ï¼Œå°±å¯ä»¥æ”¾å…¥ tomcat ä¸­è¿è¡Œã€‚ æä¾›å¯è§†åŒ–çš„ç›¸å…³åŠŸèƒ½ï¼Œæ–¹ä¾¿ç›‘æµ‹ï¼Œæ¯”å¦‚æ€§èƒ½ï¼Œåº”ç”¨çš„å¥åº·ç¨‹åº¦ç­‰ã€‚ ä¸ºå¾®æœåŠ¡ SpringCloud é“ºè·¯ï¼ŒSpringBoot å¯ä»¥æ•´åˆå¾ˆå¤šæ¡†æž¶æ¥æž„å»ºå¾®æœåŠ¡ï¼Œæ¯”å¦‚ dubboï¼Œthrift ç­‰ã€‚ ç›¸å…³æ¯”è¾ƒ è¯´æ˜Ž spring framework spring æ¡†æž¶ã€‚ spring boot å¿«é€Ÿæž„å»º spring åº”ç”¨ã€‚ spring cloud springboot åˆ†å¸ƒå¼äº‘åº”ç”¨ã€‚ å¿«é€Ÿèµ·æ­¥ Building an Application with Spring Boot SpringBoot æä¾›äº†ä¸€ä¸ªå¿«é€Ÿåˆå§‹åŒ–é¡¹ç›®çš„ç½‘ç«™ https://start.spring.io ã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æž„å»ºä¸€ä¸ªæ™®é€šçš„ Maven é¡¹ç›®å¹¶å¼•å…¥ç›¸å…³ä¾èµ–ã€‚ springboot é¡¹ç›®éœ€è¦ç»§æ‰¿ spring-boot-starter-parent ï¼Œå…¶ä¼šæä¾›ä¸€äº›é»˜è®¤å‚æ•°ã€‚ 123456&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.4.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;/parent&gt; å¿«é€Ÿæž„å»º web é¡¹ç›®ï¼Œåªè¦å¼•å…¥ spring-boot-starter-web å³å¯ï¼Œå…¶å·²åŒ…å«äº† tomcat æ’ä»¶ã€‚æ­£å¦‚æ‰€è§ï¼Œå…¶ä¼šç»§æ‰¿çˆ¶ pom çš„ç‰ˆæœ¬å·ã€‚ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; springboot ä½¿ç”¨ mainæ–¹æ³• å¯åŠ¨ï¼Œå…¶ä¼šè‡ªåŠ¨æ‰«æå­åŒ…å†…çš„ç›¸å…³é…ç½®ç­‰ã€‚ æ³¨æ„ : å¦‚ä¸‹çš„ç¤ºä¾‹ï¼Œåªä¼šæ‰«æ kt.gushizone.framework å­åŒ…çš„å†…å®¹ã€‚ 123456789101112package kt.gushizone.demo;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class DemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoApplication.class); &#125;&#125; ä»…éœ€ä»¥ä¸Šçš„é…ç½®ï¼Œå³å¯å¯åŠ¨è¿è¡Œä¸€ä¸ªç®€å•çš„ Web é¡¹ç›®ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼ ä¾‹å¦‚æ·»åŠ å¦‚ä¸‹ Rest é£Žæ ¼çš„ Controllerï¼Œè¿›è¡Œæµ‹è¯•ã€‚ 1234567891011121314package kt.gushizone.demo.controller;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RestController;@RestControllerpublic class UserController &#123; @PostMapping("/hello") public User save()&#123; return "Hello SpringBoot!"; &#125;&#125; ç›®å½•ç»“æž„ä¸€ä¸ªç®€å•çš„ springboot çš„ç›®å½•å¦‚ä¸‹æ‰€ç¤ºã€‚ 12345678910111213141516demoâ”œâ”€â”€ pom.xmlâ””â”€â”€ src â”œâ”€â”€ main â”‚ â”œâ”€â”€ java â”‚ â”‚ â””â”€â”€ kt â”‚ â”‚ â””â”€â”€ gushizone â”‚ â”‚ â””â”€â”€ demo | â”‚ â”œâ”€â”€ ... # å¯æ‰«æçš„åŒ… â”‚ â”‚ â””â”€â”€ DemoApplication.java # å¯åŠ¨ç±» â”‚ â”‚ â”‚ â””â”€â”€ resources â”‚ â”œâ”€â”€ application.yml # é…ç½®æ–‡ä»¶ â”‚ â”œâ”€â”€ static # é™æ€èµ„æº â”‚ â””â”€â”€ templates # æ¨¡æ¿ â””â”€â”€ test é…ç½®æ–‡ä»¶springboot é»˜è®¤æ”¯æŒé€šè¿‡ application.properties å’Œ application.yml é…ç½®å±žæ€§ã€‚ä¸¤è€…å¯ä»¥å¹¶å­˜ï¼Œä¸”ä¼šä¼˜å…ˆå‚è€ƒ .properties ï¼Œè‹¥ç›¸å…³é…ç½®æ²¡æœ‰ï¼Œä¼šå°è¯•ä»Ž .yml ä¸­èŽ·å–ã€‚ 1234567# api ç«¯å£å·server.port=8080# url è·¯å¾„server.servlet.context-path=/demo# session è¶…æ—¶æ—¶é—´server.servlet.session.timeout=60mserver.tomcat.uri-encoding=utf-8 yaml æ˜¯å½“å‰æµè¡Œçš„é…ç½®æ–¹å¼ï¼Œè¾ƒ .properties å±•ç¤ºæ ‘çŠ¶ç»“æž„æ›´æ¸…æ™°ï¼Œè¾ƒ .xml æ›´åŠ ç®€æ´ã€‚ ä¸‹æ–‡ä¸­ä¸ºä½¿é…ç½®é¡¹æ›´æ¸…æ™°ï¼Œä¼šä»¥ .properties çš„æ–¹å¼é…ç½®ã€‚ 12345678server: port: 8080 servlet:# context-path: /demo session: timeout: 60m tomcat: uri-encoding: utf-8 çŽ¯å¢ƒéš”ç¦»ä¸€èˆ¬å¼€å‘ ï¼Œæµ‹è¯•ï¼Œä¸Šçº¿ç­‰çŽ¯å¢ƒæ˜¯ä¸åŒçš„ï¼Œspringboot æ”¯æŒå¤šçŽ¯å¢ƒçš„æ–‡ä»¶é…ç½®ã€‚å¯ä»¥åˆ›å»º application-{profile}.properties æˆ– application-{profile}.yml ç­‰é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨ spring.profiles.active æŒ‡å®šå½“å‰ç”Ÿæ•ˆçš„é…ç½®æ–‡ä»¶ã€‚ 1spring.profiles.active: dev ä½¿ç”¨ yml é…ç½®æ—¶ï¼Œä¹Ÿå¯ä»¥é…ç½®åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­é…ç½®ã€‚ ä¸æŽ¨è ! 123456789spring: profiles: active: dev---spring: profiles: dev---spring: profiles: prod è¯»å–é…ç½®å¯ä»¥åœ¨ .yml ä¸­ç›´æŽ¥ä½¿ç”¨å·²å®šä¹‰çš„å€¼ã€‚ 12345default: value: 123456 system: username: admin password: $&#123;default.value&#125; åœ¨ Java ä¸­èŽ·å–å€¼ï¼Œå¹¶è®¾ç½®é»˜è®¤å€¼ã€‚ 123456789import org.springframework.beans.factory.annotation.Value;...@Value("$&#123;default.system.username:admin&#125;")private String defaultUsername;@Value("$&#123;default.system.password:123&#125;")private Integer defaultPassword; è¯»å–è‡ªå®šä¹‰æ–‡ä»¶ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†é…ç½®æ–‡ä»¶æ”¾åœ¨ resource ç›®å½•ï¼Œé»˜è®¤ç¼–è¯‘è¡Œä¸ºä¼šå°†å…¶è¾“å‡ºåˆ°æ›´ç›®å½•ï¼Œé€šè¿‡ ClassLoader å¯ä»¥èŽ·å– classpath æ ¹ç›®å½•è·¯å¾„ã€‚ æ³¨æ„ : æ–‡ä»¶çš„è¯»å–æ˜¯ä¾èµ–å½“å‰çŽ¯å¢ƒçš„ç›®å½•ç»“æž„ï¼Œå¹¶ä¸æ˜¯é¡¹ç›®ç›®å½•ç»“æž„ã€‚ä¾‹å¦‚ ç¼–è¯‘å’Œæ‰“åŒ…åŽï¼Œç›®å½•ç»“æž„éƒ½æ˜¯ä¸åŒçš„ã€‚ 123String fileName = "mmall.properties";ClassLoader classLoader = Test.class.getClassLoader(); 12345// æ–¹å¼ä¸€ï¼ŒæŽ¨èInputStream in = classLoader.class.getResourceAsStream(fileName);// æ–¹å¼äºŒï¼Œä¸æŽ¨èï¼Œåœ¨æ‰“åŒ…åŽå¯èƒ½æ— æ³•æ­£å¸¸èŽ·å–ã€‚File configFile = new File(classLoader.getResource(fileName).getFile();); 123// å±žæ€§æ–‡ä»¶è¯»å–Properties props = new Properties();props.load(new InputStreamReader(classLoader.getResourceAsStream(fileName),"UTF-8")); æ•´åˆ Logspringboot æ•´åˆäº†ä¸€ä¸ª sl4j ä¾èµ–ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ log4j å’Œ logback ã€‚å½“ç„¶ä¹Ÿå¯ä»¥å•ç‹¬å¼•å…¥ã€‚ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;&lt;/dependency&gt; æŽ¨èä½¿ç”¨ Logbackã€‚ Log4jå…·ä½“é…ç½®å‚è€ƒ : æµ…è°ˆLOGä¹‹Log4j Logbackå…·ä½“é…ç½®å‚è€ƒ : æµ…è°ˆLOGä¹‹Logback æ•´åˆThymeleafå®Œæˆå¦‚ä¸‹é…ç½®å³å¯ä½¿ç”¨ Thymeleafï¼Œè¯¦æƒ…å‚è€ƒ : æµ…è°ˆThymeleaf æµ…è°ˆThymeleafä¹‹Layout é™„å½•ä¹‹Thymeleafè¡¨è¾¾å¼å®žç”¨ç¨‹åºå¯¹è±¡ pom.xml Spring Boot 1.x ä¸­åŒ…å«äº†thymeleaf-layout-dialect ï¼Œä½†åœ¨ Spring Boot 2.x ä¸­è¢«ç§»é™¤ã€‚ 123456789&lt;!-- thymeleaf å’Œ å¸ƒå±€æ–¹è¨€ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;&lt;/dependency&gt; application.properties12345678910111213spring.thymeleaf.prefix=classpath:/templates/spring.thymeleaf.suffix=.htmlspring.thymeleaf.mode=HTML5spring.thymeleaf.encoding=UTF-8spring.thymeleaf.servlet.content-type=text/html# å…³é—­ç¼“å­˜ï¼Œå³æ—¶åˆ·æ–°spring.thymeleaf.cache=false# è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„ï¼Œjsï¼Œcss ç­‰# è¯·æ±‚è·¯å¾„spring.mvc.static-path-pattern=/public/**# èµ„æºè·¯å¾„#spring.resources.static-locations=classpath:/static/ messages*.propertiesé¡ºä¾¿æä¸€ä¸‹å›½é™…åŒ–é…ç½®ï¼Œæ–‡ä»¶é»˜è®¤å¿…é¡»ä»¥ messages å¼€å¤´å‘½åï¼Œå¯ä»¥é‡å†™ MessageSourceAutoConfiguration ã€‚ /src/main/resources/i18n/messages_zh_CN.properties 1home.welcome=æ¬¢è¿Žæ¥åˆ°æˆ‘ä»¬çš„æ‚è´§åº—ï¼ æ•´åˆ Mybatispom.xml123456789101112&lt;!-- mybatis --&gt;&lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.1&lt;/version&gt;&lt;/dependency&gt;&lt;!-- pagehelper --&gt;&lt;dependency&gt; &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt; &lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.2.3&lt;/version&gt;&lt;/dependency&gt; 1234567891011&lt;!-- DB --&gt;&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.1.9&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.41&lt;/version&gt;&lt;/dependency&gt; ä¸€èˆ¬ *Mapper.xml ä¼šæ”¾åœ¨ resources ä¸‹ï¼Œä½†æ˜¯è¿™æ ·å¼€å‘å’Œç®¡ç†æ—¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚è¿™æ—¶å¯ä»¥æ”¾åœ¨ java ç›®å½•å†…ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œå¯ä»¥ç¡®ä¿è¢«å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ã€‚ 12345678910&lt;build&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; application.properties æ²¡æœ‰æ‰«æçš„xmlå¹¶ä¸å½±å“å¯åŠ¨ï¼Œä½†ä½¿ç”¨æ—¶ä¼šå‡ºçŽ° org.apache.ibatis.binding.BindingException: Invalid bound statement (not found) å¼‚å¸¸ ã€‚ 1234567891011# mybatis# pojo çš„ä½ç½® (é…ç½®è¯¥é¡¹åŽï¼Œå¯ä»¥åœ¨xmlä¸­ä¸ä½¿ç”¨å…¨è·¯å¾„å¼•ç”¨å®žä½“ç±»)mybatis.type-aliases-package=tk.gushizone.common.pojo# xml çš„ä½ç½®mybatis.mapper-locations=classpath*:tk/gushizone/**/dao/sqlmap/*.xml,classpath*:mapper/*.xml# pagehelperpagehelper.helperDialect=mysqlpagehelper.reasonable=truepagehelper.supportMethodsArguments=truepagehelper.params=count=countSql 123456789101112# dbspring.datasource.url=jdbc:mysql://localhost:3306/testspring.datasource.username=rootspring.datasource.password=rootspring.datasource.driver-class-name=com.mysql.jdbc.Driver# druidspring.datasource.druid.initial-size=1spring.datasource.druid.min-idle=1spring.datasource.druid.max-active=20spring.datasource.druid.test-on-borrow=truespring.datasource.druid.stat-view-servlet.allow=true 123# çƒ­éƒ¨ç½² - mybatisç›¸å…³ ( éœ€è¦é…ç½®devtools )restart.include.mapper=/mapper-[\\w=\\.]+jarrestart.include.pagehelper=/pagehelper-[\\w=\\.]+jar Application.java @MapperScan ç”¨äºŽæ‰«æ DAOå±‚ æŽ¥å£ï¼Œç”Ÿæˆå¯¹åº”çš„ beanã€‚ 12345678@SpringBootApplication@MapperScan(basePackages = &#123;"tk.gushizone.**.dao"&#125;)public class Application &#123; public static void main(String[] args) &#123; SpringApplication.run(Application.class); &#125;&#125; çƒ­æ›´æ–°çƒ­éƒ¨ç½² å’Œ çƒ­åŠ è½½ éƒ½æ˜¯æŒ‡ä¸é‡å¯æœåŠ¡ï¼Œå®Œæˆæ›´æ–°ç¼–è¯‘/éƒ¨ç½²é¡¹ç›®ï¼Œå…¶éƒ½æ˜¯åŸºäºŽJavaçš„ç±»åŠ è½½å™¨å®žçŽ°ã€‚ æ¶‰åŠ éƒ¨ç½²æ–¹å¼ å®žçŽ°åŽŸç† ä½¿ç”¨åœºæ™¯ çƒ­éƒ¨ç½² çƒ­éƒ¨ç½²åœ¨æœåŠ¡å™¨è¿è¡Œæ—¶é‡æ–°éƒ¨ç½²é¡¹ç›® çƒ­éƒ¨ç½²ç›´æŽ¥é‡æ–°åŠ è½½æ•´ä¸ªåº”ç”¨ï¼Œå­˜åœ¨å†…å­˜é‡Šæ”¾ã€‚ çƒ­éƒ¨ç½²æ›´å¤šåœ¨ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨ã€‚ çƒ­åŠ è½½ çƒ­åŠ è½½åœ¨è¿è¡Œæ—¶é‡æ–°åŠ è½½class çƒ­åŠ è½½åœ¨è¿è¡Œæ—¶é‡æ–°åŠ è½½classï¼Œç›‘æŽ§æ–‡ä»¶æ˜¯å¦æ”¹å˜ï¼Œç›´æŽ¥ä¿®æ”¹ JVM å†…çš„å­—èŠ‚ç æ–‡ä»¶ã€‚ çƒ­åŠ è½½æ›´å¤šåœ¨å¼€å‘çŽ¯å¢ƒä½¿ç”¨ã€‚ å¯ä»¥çœ‹å‡ºæˆ‘ä»¬ä¸€èˆ¬è¯´çš„çƒ­éƒ¨ç½²å…¶å®žéƒ½æ˜¯çƒ­åŠ è½½ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä»‹ç»ä¸€ä¸‹springbootçƒ­åŠ è½½æ–¹å¼ã€‚ çƒ­åŠ è½½æ–¹å¼ è¯´æ˜Ž - é»˜è®¤æƒ…å†µä¸‹springbootå¯ä»¥å®Œæˆå¯¹ .java çš„çƒ­æ›´æ–°ï¼Œè‡³å°‘åœ¨ IDE ä¸­æ˜¯è¿™æ · ðŸ¤£ ã€‚ Devtools ä½¿ç”¨å¿«é€Ÿé‡å¯çš„æ–¹å¼ï¼Œå¯ä»¥å®Œæˆå¯¹ .java å’Œ .xml çš„çƒ­æ›´æ–°ã€‚ Springloaded å¯ä»¥å®Œæˆå¯¹ .java çš„çƒ­æ›´æ–°ã€‚ IDE æ’ä»¶ å¦‚ JRebel ï¼Œæ”¶è´¹æ’ä»¶ï¼Œè¿™é‡Œä¸ä¼šä»‹ç»ã€‚ -Eclipseeclipse é»˜è®¤ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œä¸éœ€è¦ä»»ä½•è®¾ç½®ï¼Œå³å¯å®Œæˆçƒ­æ›´æ–°ã€‚ IDEAIDEA é»˜è®¤ä¸ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œéœ€è¦è®¾ç½®ã€‚ Preferences -&gt; Build,Execution,Deployment -&gt; Compiler -&gt; Build project automaticaly ã€‚ command + shift + ctrl + / -&gt; Registry -&gt; compiler.automake.allow.when.app.running ã€‚ ç¼–è¾‘åº”ç”¨å¯åŠ¨é…ç½®: Edit Configuration -&gt; Running Application Update Policies -&gt; Update classes and resources ã€‚ å¦‚æžœè¿˜æ˜¯ä¸è¡Œï¼Œå¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„å°é”¤å­ï¼Œæˆ– command + F9 ã€‚ Devtools Devtools åœ¨é¡¹ç›®è¾ƒå¤§æ—¶ï¼Œå¯åŠ¨ä¾ç„¶ä¼šæ…¢ ðŸ¤£ã€‚ å®žçŽ°å¯¹ç±»æ–‡ä»¶çš„çƒ­éƒ¨ç½²ï¼Œæ–‡ä»¶å‘ç”Ÿæ”¹å˜æ—¶ä¼šç«‹å³é‡å¯åº”ç”¨ï¼Œå› ä¸ºé‡‡ç”¨è™šæ‹Ÿæœºæœºåˆ¶ï¼Œé‡å¯ä¼šå¾ˆå¿«ã€‚ pom.xml1234567&lt;!-- devtools --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt; &lt;!-- optional=true, ä¾èµ–ä¸ä¼šä¼ é€’ --&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; application.properties123456# çƒ­éƒ¨ç½² - thymeleafspring.thymeleaf.cache=false# çƒ­éƒ¨ç½² - mybatisç›¸å…³restart.include.mapper=/mapper-[\\w=\\.]+jarrestart.include.pagehelper=/pagehelper-[\\w=\\.]+jar Springloadedåœ¨ spring-boot-maven-plugin æ’ä»¶ä¸‹æ·»åŠ  springloaded ä¾èµ–ã€‚ å¦‚æžœä¸èƒ½è‡ªåŠ¨ä¸‹è½½ï¼Œå…ˆæ”¾åˆ°ä¸Šé¢çš„ dependencies ä¸­å³å¯ä¸‹è½½ã€‚ 12345678910111213141516171819&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;mainClass&gt;tk.gushizone.system.SystemApplication&lt;/mainClass&gt; &lt;/configuration&gt; &lt;!--mvn spring-boot:run--&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;springloaded&lt;/artifactId&gt; &lt;version&gt;1.2.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; mavenæ–¹å¼ IDEA ä¸­ç›´æŽ¥ Terminal è¿›è¡Œ clean install å† mvn spring-boot:run å³å¯ã€‚ 12345678# é¡¹ç›®æ ¹ç›®å½•cd ../app-demo # å°†é¡¹ç›®ä¾èµ–æ‰“åŒ…å¹¶æ”¾å…¥æœ¬åœ°ä»“åº“mvn -Dmaven.test.skip -U clean install # ä¸»æ¨¡å—ç›®å½•cd web # mavenæ–¹å¼ å¯åŠ¨ springbooté¡¹ç›®mvn spring-boot:run JVM å¯åŠ¨å‚æ•°éœ€è¦ä¸‹è½½ jar åŒ…ï¼Œè®°ä½è·¯å¾„ï¼Œå¹¶ç»™ JVM æ·»åŠ å¯åŠ¨å‚æ•°ã€‚ 1-javaagent:/users/username/developer/lib/springloaded-1.2.6.RELEASE.jar -noverify Junit12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; Junit çš„æµ‹è¯•æ–¹æ³•ä¸€å®šè¦æ˜¯ public ã€‚ 12345678910111213141516171819202122232425package org.demo.test;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.ActiveProfiles;import org.springframework.test.context.junit4.SpringRunner;import org.demo.Application;import org.demo.user.UserService;@RunWith(SpringRunner.class)@ActiveProfiles("dev")@SpringBootTest(classes = Application.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)public class JunitTest &#123; @Autowired private UserService userService; @Test public void test1() throws BatchException &#123; userService.queryByPage(); &#125;&#125; æ‰“åŒ… &amp; è¿è¡Œè¿™é‡Œä»…ä»‹ç» jar å’Œ war çš„æ‰“åŒ…å’Œè¿è¡Œã€‚ æ‰“åŒ…ç§ç±»åœ¨åº”ç”¨å¯åŠ¨æ¨¡å— çš„ pom è§„å®šæ‰“åŒ…æ–¹å¼ , å…¶é»˜è®¤ä¸º jar ã€‚ æ³¨æ„ ï¼šå½“è®¾ç½®ä¸º war æ—¶ï¼Œéœ€è¦æ»¡è¶³å«æœ‰ main/webapp/WEB-INF/web.xml ï¼Œå³ä½¿ä¸ºç©ºæ–‡ä»¶ã€‚ 1&lt;packaging&gt;war&lt;/packaging&gt; ä¸€èˆ¬çš„æ‰“åŒ…ç§ç±»æœ‰ : jar , war , ear ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š æ‰“åŒ…æ–¹å¼ è¯´æ˜Ž jar Java Archive file ï¼Œä¸€èˆ¬æŠŠå¼€å‘æ—¶è¦å¼•ç”¨é€šç”¨(JAVA)ç±»åŠèµ„æºåšå°è£…ï¼Œæ‰“æˆåŒ…åŽä¾¿äºŽå­˜æ”¾ç®¡ç†ã€‚ war Web Archive file ï¼Œä¸€ä¸ª(web)å®Œæ•´çš„åº”ç”¨ï¼Œé€šå¸¸æ˜¯ç½‘ç«™æˆ–WEBå¹³å°ï¼Œæ‰“æˆåŒ…åŽå¯ä»¥éƒ¨ç½²åˆ°å®¹å™¨ä¸­ã€‚ ear Enterprise Archive file ï¼Œä¼ä¸šçº§åº”ç”¨ï¼Œå®žé™…ä¸ŠEARåŒ…ä¸­åŒ…å«WARåŒ…å’Œå‡ ä¸ªä¼ä¸šçº§é¡¹ç›®çš„é…ç½®æ–‡ä»¶è€Œå·²ï¼ŒæœåŠ¡å™¨ä¸­é—´ä»¶é€šå¸¸é€‰æ‹©WebSphereç­‰éƒ½ä¼šä½¿ç”¨EARåŒ…ã€‚é€šå¸¸æ˜¯EJBæ‰“æˆearåŒ…ã€‚ å¯åŠ¨ç±» : mainClasså¦‚æžœå¸Œæœ›å¯ä»¥ç›´æŽ¥è¿è¡Œé¡¹ç›®åŒ…ï¼Œéœ€è¦é…ç½® mainClass ï¼Œä½œä¸ºå¯åŠ¨ç±»ã€‚ 1234567891011&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;mainClass&gt;org.demo.DemoApplication&lt;/mainClass&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; æ‰“åŒ…å¹¶è¿è¡Œè¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12# è·³è¿‡æµ‹è¯•ï¼Œæ›´æ–°ç¬¬ä¸‰æ–¹åŒ…ï¼Œcleanï¼Œpackagemvn -Dmaven.test.skip -U clean package æ‰“åŒ…æˆåŠŸåŽï¼Œå¯ä»¥åœ¨ ä¸»æ¨¡å— /web/target ä¸‹çœ‹åˆ°åŽ‹ç¼©åŒ…ã€‚ 1234567# æ‰“åŒ…ä¸º jar æ—¶ï¼š# web-0.0.1-SNAPSHOT.jar # åŒ…å«è¯¥æ‰€æœ‰ä¾èµ– å’Œ é¡¹ç›® class# web-0.0.1-SNAPSHOT.jar.original # é¡¹ç›® class# æ‰“åŒ…ä¸º war æ—¶ï¼š# web-0.0.1-SNAPSHOT.war # åŒ…å«è¯¥æ‰€æœ‰ä¾èµ– å’Œ é¡¹ç›® class# web-0.0.1-SNAPSHOT.war.original # é¡¹ç›® class å’Œä¾èµ– jaræ–¹å¼ï¼Œå¯åŠ¨é¡¹ç›®12345# æ‰“åŒ…ä¸º jar æ—¶ï¼šjava -jar web-0.0.1-SNAPSHOT.jar# æ‰“åŒ…ä¸º war æ—¶ï¼šjava -jar web-0.0.1-SNAPSHOT.war maven æ–¹å¼è¿è¡Œ12345678# é¡¹ç›®æ ¹ç›®å½•cd ../app-demo # å°†é¡¹ç›®ä¾èµ–æ‰“åŒ…å¹¶æ”¾å…¥æœ¬åœ°ä»“åº“mvn -Dmaven.test.skip -U clean install # ä¸»æ¨¡å—ç›®å½•cd web # mavenæ–¹å¼ å¯åŠ¨ springbooté¡¹ç›®mvn spring-boot:run]]></content>
      <categories>
        <category>â‘  Starter</category>
      </categories>
      <tags>
        <tag>Mybatis</tag>
        <tag>Thymeleaf</tag>
        <tag>SpringBoot</tag>
        <tag>Log</tag>
        <tag>Devtools</tag>
        <tag>Springloaded</tag>
        <tag>Junit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆLOGä¹‹Logback]]></title>
    <url>%2F2019%2F05%2F01%2F%E6%B5%85%E8%B0%88LOG%E4%B9%8BLogback%2F</url>
    <content type="text"><![CDATA[logback åŒæ ·æ˜¯ç”±log4jçš„ä½œè€…è®¾è®¡å®Œæˆçš„ï¼Œæ‹¥æœ‰æ›´å¥½çš„ç‰¹æ€§ï¼Œæ˜¯ç”¨æ¥å–ä»£ log4j çš„ä¸€ä¸ªæ—¥å¿—æ¡†æž¶ã€‚logback æ˜¯ slf4j çš„åŽŸç”Ÿå®žçŽ° ã€‚ logback å’Œ log4j çš„å¤§å¤šæ•°æ¦‚å¿µç±»ä¼¼ï¼Œè¿™é‡Œä¸ä½œèµ˜è¿°ã€‚ å®˜æ–¹æ–‡æ¡£ : Logback æµ…è°ˆLOGä¹‹Log4j è®¤è¯† Logbackæ—¥å¿—æž¶æž„ æ¶‰åŠ è¯´æ˜Ž logback-core å…¶å®ƒä¸¤ä¸ªæ¨¡å—çš„åŸºç¡€æ¨¡å—ã€‚åŒ…å«Appender å’Œ LayoutæŽ¥å£ ã€‚ logback-classic å®ƒæ˜¯ log4j çš„ä¸€ä¸ªæ”¹è‰¯ç‰ˆæœ¬ï¼ŒåŒæ—¶å®ƒå®Œæ•´å®žçŽ°äº†slf4j APIä½¿ä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢æˆå…¶å®ƒæ—¥å¿—ç³»ç»Ÿ(å¦‚ log4j æˆ– JDK1.4 Logging) ã€‚åŒ…å« Logger å¯¹è±¡ ã€‚ logback-access è®¿é—®æ¨¡å—ä¸ŽServletå®¹å™¨é›†æˆæä¾›é€šè¿‡Httpæ¥è®¿é—®æ—¥å¿—çš„åŠŸèƒ½ã€‚ æ ¸å¿ƒå¯¹è±¡Loggerå‘½åå±‚æ¬¡ç»“æž„ å’ŒLog4jç›¸åŒçš„å‘½åè§„èŒƒå’Œç»§æ‰¿å…³ç³»ã€‚ å¦‚æžœè®°å½•å™¨çš„åç§°åŽè·Ÿä¸€ä¸ªç‚¹æ˜¯åŽä»£è®°å½•å™¨åç§°çš„å‰ç¼€ï¼Œåˆ™ç§°è¯¥è®°å½•å™¨æ˜¯å¦ä¸€ä¸ªè®°å½•å™¨çš„ç¥–å…ˆã€‚å¦‚æžœè®°å½•å™¨æœ¬èº«å’ŒåŽä»£è®°å½•å™¨ä¹‹é—´æ²¡æœ‰ç¥–å…ˆï¼Œåˆ™ç§°è®°å½•å™¨æ˜¯å­è®°å½•å™¨çš„çˆ¶èŠ‚ç‚¹ã€‚ Appender Appender å’Œ Logger å…·æœ‰ä¸€æ ·çš„ç»§æ‰¿å…³ç³»ã€‚ Appender æŽ§åˆ¶æ—¥å¿—è¾“å‡ºç›®æ ‡ï¼Œä¾‹å¦‚ï¼šæŽ§åˆ¶å°ï¼Œæ–‡ä»¶ï¼Œè¿œç¨‹å¥—æŽ¥å­—æœåŠ¡å™¨ï¼Œæ•°æ®åº“ï¼ŒJMSå’Œè¿œç¨‹UNIX Syslogå®ˆæŠ¤ç¨‹åºç­‰ã€‚ LayoutLayout è´Ÿè´£å®šåˆ¶è¾“å‡ºæ ¼å¼ï¼Œå®ƒæ˜¯é€šè¿‡ Appender ç›¸å…³è”æ¥å®žçŽ°çš„ã€‚ æ”¯æŒå¯¹è±¡LoggerContextå„ä¸ªlogger éƒ½è¢«å…³è”åˆ°ä¸€ä¸ª LoggerContextï¼ŒLoggerContextè´Ÿè´£åˆ¶é€ loggerï¼Œä¹Ÿè´Ÿè´£ä»¥æ ‘ç»“æž„æŽ’åˆ—å„loggerã€‚ Level å¦‚æžœç»™å®šçš„è®°å½•å™¨æ²¡æœ‰åˆ†é…çº§åˆ«ï¼Œé‚£ä¹ˆå®ƒå°† ä»Žå…·æœ‰æŒ‡å®šçº§åˆ«çš„æœ€è¿‘ç¥–å…ˆç»§æ‰¿ ä¸€ä¸ªçº§åˆ«ã€‚ å¦‚æžœLoggerè¯·æ±‚çš„çº§åˆ«é«˜äºŽæˆ–ç­‰äºŽå…¶Loggerçš„æœ‰æ•ˆçº§åˆ«ï¼Œåˆ™ä¸ºå¯åŠ¨ï¼Œåä¹‹ç¦ç”¨ã€‚ çº§åˆ«ï¼ˆä¼˜å…ˆçº§ï¼šdescï¼‰ æè¿° OFF æœ€é«˜çº§åˆ«ï¼Œç”¨äºŽå…³é—­æ—¥å¿—ã€‚ FATAL æŒ‡æ˜Žéžå¸¸ä¸¥é‡çš„é”™è¯¯äº‹ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç»ˆæ­¢æ‰§è¡Œã€‚ ERROR æŒ‡æ˜Žé”™è¯¯äº‹ä»¶ï¼Œä½†åº”ç”¨å¯èƒ½è¿˜èƒ½ç»§ç»­è¿è¡Œã€‚ WARN æŒ‡æ˜Žæ½œåœ¨çš„æœ‰å®³çŠ¶å†µã€‚ INFO æŒ‡æ˜Žæè¿°ä¿¡æ¯ï¼Œä»Žç²—ç²’åº¦ä¸Šæè¿°äº†åº”ç”¨è¿è¡Œè¿‡ç¨‹ã€‚ DEBUG æŒ‡æ˜Žç»†è‡´çš„äº‹ä»¶ä¿¡æ¯ï¼Œå¯¹è°ƒè¯•åº”ç”¨æœ€æœ‰ç”¨ã€‚ TRACE æ¯” DEBUG çº§åˆ«çš„ç²’åº¦æ›´ç»†ã€‚ ALL æ‰€æœ‰çº§åˆ«ï¼ŒåŒ…æ‹¬å®šåˆ¶çº§åˆ«ã€‚ ä½¿ç”¨ LogbackLogbackçš„é»˜è®¤é…ç½® å°è¯•åœ¨ classpath ä¸‹æŸ¥æ‰¾æ–‡ä»¶ logback-test.xml ã€‚ è‹¥æ–‡ä»¶ä¸åœ¨ï¼Œåˆ™æŸ¥æ‰¾ logback.xml ã€‚ è‹¥ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸åœ¨ï¼Œä½¿ç”¨ BasicConfigurator é»˜è®¤é…ç½®ï¼Œæ—¥å¿—è¾“å‡ºåˆ°æŽ§åˆ¶å°ã€‚ 123456&lt;!--logback(è‡ªåŠ¨ä¾èµ–ï¼šlogback-core,slf4j-api)--&gt;&lt;dependency&gt; &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt; &lt;artifactId&gt;logback-classic&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt;&lt;/dependency&gt; logback.xml appender.encoding åœ¨é«˜ç‰ˆæœ¬ä¸­ä¸å†éœ€è¦ï¼Œä½¿ç”¨ä¼šäº§ç”Ÿå¼‚å¸¸ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!-- æ ¹èŠ‚ç‚¹ï¼š scan: é…ç½®æ–‡ä»¶æ”¹å˜æ—¶ï¼Œæ˜¯å¦é‡æ–°åŠ è½½ï¼Œé»˜è®¤ä¸ºtrueï¼› scanPeriod: æ‰«ææ–‡ä»¶é—´éš”æ—¶é—´ï¼Œåœ¨ scan="true" åŽç”Ÿæ•ˆï¼Œé»˜è®¤å•ä½ä¸ºæ¯«ç§’ï¼› debug: æ˜¯å¦æ‰“å°logbackçš„å†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œé»˜è®¤ä¸ºfalseã€‚ --&gt;&lt;configuration scan="true" scanPeriod="60 seconds" debug="false"&gt; &lt;!-- å®šä¹‰å˜é‡: åœ¨ä¸‹æ–‡ä¸­å¯ä»¥ä½¿ç”¨ $&#123;&#125; ä½¿ç”¨è¯¥å˜é‡ --&gt; &lt;property name="logfolder" value="/users/gushi/developer/log/demo" /&gt; &lt;!-- appender: æŽ§åˆ¶å°è¾“å‡º --&gt; &lt;appender name="console" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;encoding&gt;UTF-8&lt;/encoding&gt; &lt;!-- å¯¹æ—¥å¿—è¿›è¡Œæ ¼å¼åŒ– --&gt; &lt;encoder&gt; &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%p][%c&#123;40&#125;][%t] %m%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;!-- è¾“å‡º&gt;=DEBUGçº§åˆ«çš„æ—¥å¿—ï¼ˆå› ä¸ºmybatisçš„sqlæ—¥å¿—çº§åˆ«ä¸ºDEBUGï¼‰ --&gt; &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt; &lt;level&gt;DEBUG&lt;/level&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- appender: æ»šåŠ¨è®°å½•æ—¥å¿—ï¼Œå…ˆè®°å½•æŒ‡å®šæ–‡ä»¶ï¼Œå†æŒ‰ç…§æ»šåŠ¨ç­–ç•¥å°†æ—¥å¿—è®°å½•åˆ°å…¶ä»–æ–‡ä»¶ --&gt; &lt;appender name="demo" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;File&gt;$&#123;logfolder&#125;/demo.log&lt;/File&gt; &lt;!-- æ˜¯å¦è¿½åŠ æ—¥å¿—ï¼Œé»˜è®¤ä¸ºtrueï¼Œç½®ä¸ºfalseä¼šå…ˆæ¸…ç©º --&gt; &lt;append&gt;true&lt;/append&gt; &lt;!-- æ»šåŠ¨ç­–ç•¥: æ ¹æ®æ–‡ä»¶å¤§å°å’Œæ—¶é—´æ¥åˆ¶å®š --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt; &lt;FileNamePattern&gt;$&#123;logfolder&#125;/daily/daily-%d&#123;yyyy-MM-dd&#125;.%i.log&lt;/FileNamePattern&gt; &lt;!-- å½’æ¡£æ–‡ä»¶æœ€å¤§ä¿ç•™æ•° --&gt; &lt;MaxHistory&gt;10&lt;/MaxHistory&gt; &lt;!-- æœ€å¤§æ–‡ä»¶å¤§å° --&gt; &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt; &lt;!-- æ€»å¤§å° --&gt; &lt;totalSizeCap&gt;1GB&lt;/totalSizeCap&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%p][%c&#123;40&#125;][%t] %m%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name="error" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;File&gt;$&#123;logfolder&#125;/demo.log&lt;/File&gt; &lt;!-- æ»šåŠ¨ç­–ç•¥: æ ¹æ®æ—¶é—´æ¥åˆ¶å®š --&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;fileNamePattern&gt;$&#123;logfolder&#125;/demo.log.%d&#123;yyyy-MM-dd&#125;.gz&lt;/fileNamePattern&gt; &lt;append&gt;true&lt;/append&gt; &lt;maxHistory&gt;10&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;][%p][%c&#123;40&#125;][%t] %m%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;!--çº§åˆ«è¿‡æ»¤--&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;/appender&gt; &lt;!-- è®¾ç½®å…·ä½“åŒ…/ç±»çš„æ‰“å°çº§åˆ«ï¼Œä»¥åŠæŒ‡å®šappender name: çº¦æŸæŸä¸ªåŒ…/ç±»; level: æ‰“å°çº§åˆ«ï¼Œå’Œå¤§å°å†™æ— å…³ï¼Œé»˜è®¤ä¸ºDEBUG; additivityï¼šæ˜¯å¦ç»§æ‰¿ä¸Šçº§çš„çº§åˆ«ï¼Œé»˜è®¤ä¸ºtrue; --&gt; &lt;logger name="org.demo" additivity="false" level="INFO" &gt; &lt;appender-ref ref="demo" /&gt; &lt;appender-ref ref="console"/&gt; &lt;/logger&gt; &lt;!-- mybatis log æ—¥å¿— ï¼ˆå› ä¸ºmybatisçš„sqlæ—¥å¿—çº§åˆ«ä¸ºDEBUGï¼‰--&gt; &lt;logger name="org.demo.dao" level="DEBUG"/&gt; &lt;!-- æ ¹loger: æ‰€æœ‰loggerçš„ä¸Šçº§ï¼Œé»˜è®¤ä¸ºDEBUG --&gt; &lt;root level="DEBUG"&gt; &lt;appender-ref ref="console"/&gt; &lt;appender-ref ref="error"/&gt; &lt;/root&gt;&lt;/configuration&gt; *.java123456789101112package org.Demo;import org.slf4j.Logger;public class Demo&#123; // èŽ·å–ä¸Žç±»åŒåçš„æ—¥å¿—å¯¹è±¡ private final static Logger logger = LoggerFactory.getLogger(HelloJob.class); public void log()&#123; logger.info("ç”¨æˆ·**è®¿é—®äº†***"); &#125;&#125; é™„å½•ä¼˜åŒ–logback å·²è‡ªèº«ä¼˜åŒ–ï¼Œä¸ç”¨è€ƒè™‘å› ä¸ºä½¿ç”¨æ—¥å¿—åŠŸèƒ½è€Œé™ä½Žä¸šåŠ¡æ‰§è¡Œæ•ˆçŽ‡ã€‚æ³¨æ„ä½¿ç”¨å ä½ç¬¦å³å¯ã€‚ å…³é—­æ—¥å¿—æ—¶ï¼ˆå¤šå‚æ•°æ—¥å¿—ï¼‰javaä¸­å¯¹Stringçš„ç›´æŽ¥æ‹¼æŽ¥çš„æ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚ ç”±äºŽæ—¥å¿—çº§åˆ«Levelçš„é™åˆ¶ï¼Œä¸€äº›æ—¥å¿—å¯èƒ½ä¸ä¼šè¾“å‡ºï¼Œä½†æ˜¯æž„é€ æ¶ˆæ¯å‚æ•°ä¾ç„¶ä¼šæ¶ˆè€—å·¨å¤§æˆæœ¬ã€‚ 1logger.debug("Entry number: " + i + " is " + String.valueOf(entry[i])); æ–¹å¼ä¸€ å³ä½¿è¾“å‡ºï¼Œæ‰€éœ€æ—¶é—´ä¹Ÿå¢žåŠ ä¸åˆ° 1% ã€‚ 123if(logger.isDebugEnabled()) &#123; logger.debug("Entry number: " + i + " is " + String.valueOf(entry[i]));&#125; æ–¹å¼äºŒ æŽ¨è ä½¿ç”¨ç±»ä¼¼ å ä½ç¬¦ çš„æ–¹å¼ï¼Œåœ¨æ—¥å¿—è¢«ç¦ç”¨çš„æƒ…å†µä¸‹ï¼Œè‡³å°‘ä¼˜åŒ–äº†30å€ã€‚ 123456logger.debug("The new entry is &#123;&#125;.", entry);logger.debug("The new entry is &#123;&#125;. It replaces &#123;&#125;.", entry, oldEntry); Object[] paramArray = &#123;newVal, below, above&#125;;logger.debug("Value &#123;&#125; was inserted between &#123;&#125; and &#123;&#125;.", paramArray); å¼€å¯æ—¥å¿—è®°å½•æ—¶ï¼ˆé»˜è®¤ç»§æ‰¿ï¼‰Loggerå¯¹è±¡åœ¨åˆ›å»ºæ—¶å·²æ˜Žç¡®äº†æ—¥å¿—çº§åˆ«ï¼Œä¸ä¼šåŠ¨æ€ç»§æ‰¿ã€‚åœ¨åŸºäºŽæœ‰æ•ˆçº§åˆ«æŽ¥å—æˆ–æ‹’ç»è¯·æ±‚ä¹‹å‰ï¼Œè®°å½•å™¨å¯ä»¥åšå‡ºå‡†çž¬æ—¶å†³å®šï¼Œè€Œæ— éœ€å’¨è¯¢å…¶ç¥–å…ˆï¼ˆä¸éœ€è¦éåŽ†è®°å½•å™¨å±‚æ¬¡ç»“æž„ã€‚ï¼‰ã€‚ å®žé™…è®°å½•ï¼ˆæ ¼å¼åŒ–å’Œå†™å…¥è¾“å‡ºè®¾å¤‡ï¼‰å·²ä¼˜åŒ–Layoutå’ŒAppdenderï¼Œä¸€äº›logbackç»„ä»¶å·²è¢«é‡å†™å‡ æ¬¡ä»¥æé«˜æ€§èƒ½ã€‚ è®°å½•åˆ°æœ¬åœ°è®¡ç®—æœºä¸Šçš„æ–‡ä»¶æ—¶ï¼Œå®žé™…è®°å½•çš„å…¸åž‹æˆæœ¬çº¦ä¸º9åˆ°12å¾®ç§’ã€‚ç™»å½•åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æ—¶ï¼Œå®ƒä¼šæŒç»­å‡ æ¯«ç§’ã€‚]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>LOG</tag>
        <tag>SL4J</tag>
        <tag>Logback</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆLOGä¹‹Log4j]]></title>
    <url>%2F2019%2F04%2F30%2F%E6%B5%85%E8%B0%88LOG%E4%B9%8BLog4j%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªæˆç†Ÿçš„é¡¹ç›®ï¼Œæ—¥å¿—ç³»ç»Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚å½“å‰æµè¡Œçš„æ¡†æž¶æœ‰ log4j , logback ï¼Œå®ƒä»¬éƒ½æ˜¯åŸºäºŽ slf4j æ—¥å¿—è§„èŒƒ/æŽ¥å£ å¼€å‘ã€‚æœ¬æ–‡å°±æ¥ä»‹ç»ä¸€ä¸‹ Log4j ã€‚ è®¤è¯† Log4Jæ—¥å¿—æž¶æž„Log4j API é‡‡ç”¨åˆ†å±‚æž¶æž„ï¼Œæ¯ä¸€å±‚æœ‰ä¸åŒçš„å¯¹è±¡ï¼Œå®Œæˆä¸åŒçš„ä»»åŠ¡ã€‚è¿™ç§åˆ†å±‚æž¶æž„è®©è®¾è®¡å˜å¾—çµæ´»ï¼Œä¸”æ˜“äºŽæ—¥åŽæ‰©å±•ã€‚ æ ¸å¿ƒå¯¹è±¡â˜… æ¶‰åŠä¸€è§ˆ è¯´æ˜Ž Logger è´Ÿè´£èŽ·å–æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶å­˜å‚¨äºŽä¸€ä¸ªåˆ†å±‚çš„å‘½åç©ºé—´ä¹‹ä¸­ã€‚ Layout è´Ÿè´£æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯çš„å¯¹è±¡ï¼Œåœ¨å‘å¸ƒæ—¥å¿—ä¿¡æ¯ä¹‹å‰ï¼Œå®ƒä¸º appender å¯¹è±¡æä¾›æ”¯æŒã€‚ Appender è´Ÿè´£å°†æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°ä¸åŒç›®çš„åœ°ï¼Œæ¯”å¦‚æ•°æ®åº“ã€æ–‡ä»¶ã€æŽ§åˆ¶å°ã€Unix Syslog ç­‰ã€‚ Loggerè¯¥å¯¹è±¡ä½äºŽåˆ†å±‚æž¶æž„ä¸­çš„æœ€ä¸Šå±‚ï¼Œè´Ÿè´£èŽ·å–æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶å­˜å‚¨äºŽä¸€ä¸ªåˆ†å±‚çš„å‘½åç©ºé—´ä¹‹ä¸­ã€‚ å¯¹è±¡èŽ·å– Logger ç±»ä¸å…è®¸åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å®žä¾‹ï¼Œä½†æä¾›äº†ä¸‰ä¸ªé™æ€æ–¹æ³•ç”¨æ¥èŽ·å– Logger å¯¹è±¡ï¼š å®žé™…ä¸Šæ˜¯ä»Ž LogManager çš„Loggerå·¥åŽ‚ä¸­ èŽ·å– / è®¾ç½® å’Œå‚æ•°åŒåçš„Loggerå¯¹è±¡ã€‚ 123456/** èŽ·å¾—æ ¹æ—¥å¿—å¯¹è±¡*/public static Logger getRootLogger();/** é€šè¿‡calzzçš„åå­—ï¼ˆgetName()ï¼‰èŽ·å–å¯¹åº”çš„æ—¥å¿—å¯¹è±¡ï¼Œåº•å±‚å’Œ getLogger(String name)æ˜¯ç›¸åŒçš„ */public static Logger getLogger(Class clazz);/** é€šè¿‡å­—ç¬¦ä¸²èŽ·å–å¯¹åº”çš„æ—¥å¿—å¯¹è±¡ */public static Logger getLogger(String name); æ—¥å¿—å¯¹è±¡ç»§æ‰¿ &amp; æ—¥å¿—å¯¹è±¡å å¯ä»¥é€šè¿‡Loggerå¯¹è±¡æ¥è§¦å‘æ‰“å°æ—¥å¿—ã€‚ Loggerå…·æœ‰ çˆ¶å­/ç»§æ‰¿å…³ç³» ï¼Œä¸”æ‰€æœ‰æ—¥å¿—å¯¹è±¡éƒ½æ˜¯RootLoggerçš„å­å¯¹è±¡ã€‚å­loggerä¼šç»§æ‰¿çˆ¶loggerçš„appenderç­‰ï¼Œè§¦å‘æ‰“å°åŽä¼šä»Žå­ç±»å‘ä¸Šä¾æ¬¡è°ƒç”¨appenderã€‚ 12345# è®¾ç½®ä¸¤ä¸ªæ—¥å¿—å¯¹è±¡ï¼Œæ—¥å¿—å¯¹è±¡åä¸ºcom.ibatiså’Œcom.ibatis.common.jdbc.SimpleDataSource# å…¶ä¸­com.ibatisæ˜¯com.ibatis.common.jdbc.SimpleDataSourceçš„çˆ¶logger# ä¸”com.ibatisåŒ…ä¸‹æ‰€æœ‰ç±»èŽ·å¾—çš„æ—¥å¿—å¯¹è±¡éƒ½æ˜¯com.ibatisæ—¥å¿—å¯¹è±¡çš„å­loggerlog4j.logger.com.ibatis=DEBUGlog4j.logger.com.ibatis.common.jdbc.SimpleDataSource=INFO Loggerå¯¹è±¡çš„ç»§æ‰¿å…³ç³»æ˜¯é€šè¿‡ æ—¥å¿—å¯¹è±¡å æ¥ç®¡ç†çš„ã€‚ é™¤äº†ä»¥ä¸Šåœ¨èŽ·å–Loggerå¯¹è±¡çš„åŒæ—¶è®¾ç½®æ—¥å¿—å¯¹è±¡åå¤–ï¼Œè¿˜å¯ä»¥åœ¨ log4j.properties è®¾ç½®å¹¶ç»†åŒ–é…ç½® 1234# è‡ªå®šä¹‰ä¸€ä¸ªæ—¥å¿—å¯¹è±¡ï¼Œæ—¥å¿—å¯¹è±¡åä¸ºsecurityLog# ä»Žä¸Šé¢çš„è§£é‡Šå¯èƒ½ä¼šè®¤ä¸ºæ—¥å¿—å¯¹è±¡securityLogæ˜¯ä½œç”¨äºŽsecurityLogåŒ…ä¸‹çš„ç±»# ä½†ä¸€èˆ¬ä¹Ÿå¯ä»¥ç”¨Logger.getLogger(&quot;securityLog&quot;)æ¥èŽ·å–æ—¥å¿—å¯¹è±¡log4j.logger.securityLog = INFO,log_security,database æ—¥å¿—ä¿¡æ¯çº§åˆ« ä¸€æ—¦èŽ·å–ä¸€ä¸ªæœ‰åå­—çš„ logger å®žä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ç”¨äºŽæ‰“å°æ—¥å¿—ä¿¡æ¯ã€‚ æ³¨æ„ ï¼šæ—¥å¿—ä¿¡æ¯ä¸ä¸€å®šä¼šè¢«è¾“å‡ºï¼Œå…¶ä¼šè¢«æ—¥å¿—å¯¹è±¡ï¼ˆåŠå…¶çˆ¶loggerï¼‰çš„æœ€ä½Žæ—¥å¿—çº§åˆ« è¿‡æ»¤ å¹¶ä¸”è¿˜éœ€è¦å¯¹åº”çš„appenderï¼Œæ‰èƒ½è¾“å‡ºåˆ°æŒ‡å®šä½ç½®ã€‚ ä¼˜å…ˆçº§ æ–¹æ³•å’Œæè¿° 1 public void fatal(Object message) ä½¿ç”¨ Level.FATAL çº§åˆ«æ‰“å°æ—¥å¿—ã€‚ 2 public void error(Object message) ä½¿ç”¨ Level.ERROR çº§åˆ«æ‰“å°æ—¥å¿—ã€‚ 3 public void warn(Object message) ä½¿ç”¨ Level.WARN çº§åˆ«æ‰“å°æ—¥å¿—ã€‚ 4 public void info(Object message) ä½¿ç”¨ Level.INFO çº§åˆ«æ‰“å°æ—¥å¿—ã€‚ 5 public void debug(Object message) ä½¿ç”¨ Level.DEBUG çº§åˆ«æ‰“å°æ—¥å¿—ã€‚ 6 public void trace(Object message) ä½¿ç”¨ Level.TRACE çº§åˆ«æ‰“å°æ—¥å¿—ã€‚ æœ€ä½Žæ—¥å¿—çº§åˆ« å¯ä»¥è®¾ç½®Loggerå¯¹è±¡æ‰“å°æ—¥å¿—ä¿¡æ¯çš„æœ€ä½Žçº§åˆ«ï¼Œåªæœ‰å¤§äºŽæˆ–ç­‰äºŽè¯¥çº§åˆ«çš„ä¿¡æ¯æ‰ä¼šè¢«è¾“å‡º ä¾‹å¦‚ä»¥ä¸‹é…ç½®ä¸­ï¼šcom.ibatis.common.jdbc.SimpleDataSource æ—¥å¿—å¯¹è±¡ä¼šæ— æ³•è¾“å‡ºæ—¥å¿—ï¼Œè€Œ com.ibatis.Demo æ—¥å¿—å¯¹è±¡å¯ä»¥ä½¿ç”¨æ ¹æ—¥å¿—å¯¹è±¡çš„appender(CONSOLE)å°†æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°æŽ§åˆ¶å°ã€‚ 12345678910# è®¾ç½®æ ¹æ—¥å¿—å¯¹è±¡æœ€ä½Žæ—¥å¿—çº§åˆ«ä¸ºINFOï¼Œå¹¶è®¾ç½®ä¸€ä¸ªappender(CONSOLE)log4j.rootLogger = INFO,CONSOLElog4j.logger.com.ibatis=INFOlog4j.logger.com.ibatis.common.jdbc.SimpleDataSource=DEBUG# print the message to console(ENABLE)log4j.appender.CONSOLE = org.apache.log4j.ConsoleAppenderlog4j.appender.CONSOLE.layout = org.apache.log4j.PatternLayoutlog4j.appender.CONSOLE.layout.ConversionPattern = %p %d&#123;yyyy-MM-dd HH:mm:ss&#125; [%c] - %m%n 12//æœ€ä½Žæ—¥å¿—çº§åˆ«ä¹Ÿå¯ä»¥åœ¨javaä¸­è®¾ç½®log.setLevel(Level.WARN); Layoutè´Ÿè´£æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯çš„å¯¹è±¡ï¼Œåœ¨å‘å¸ƒæ—¥å¿—ä¿¡æ¯ä¹‹å‰ï¼Œå®ƒä¸º appender å¯¹è±¡æä¾›æ”¯æŒã€‚ æ‰€æœ‰ Layout å¯¹è±¡ä»Ž Appender å¯¹è±¡é‚£é‡ŒæŽ¥æ”¶ä¸€ä¸ª LoggingEvent å¯¹è±¡ï¼Œç„¶åŽä»Ž LoggingEvent å¯¹è±¡é‚£é‡ŒèŽ·å–ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨æ°å½“çš„ ObjectRenderer å¯¹è±¡èŽ·å–è¯¥ä¿¡æ¯çš„å­—ç¬¦ä¸²å½¢å¼ã€‚ ä½äºŽç»§æ‰¿å…³ç³»é¡¶å±‚çš„æ˜¯æŠ½è±¡ç±» org.apache.Log4j.Layoutï¼Œè¿™æ˜¯æ‰€æœ‰ Log4j API ä¸­ Layout ç±»çš„åŸºç±»ã€‚ åœ¨åº”ç”¨ä¸­æˆ‘ä»¬ä»Žä¸ç›´æŽ¥ä½¿ç”¨è¯¥ç±»ï¼Œè€Œæ˜¯ä½¿ç”¨å®ƒçš„å­ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯ PatternLayout , æœ¬wikiä¸»è¦ä¸»è¦é’ˆå¯¹å…¶è¿›è¡Œè®²è§£ã€‚ DateLayout HTMLLayout PatternLayout SimpleLayout XMLLayout Appenderè¯¥å¯¹è±¡ä½äºŽåˆ†å±‚æž¶æž„ä¸­çš„è¾ƒä½Žä¸€å±‚ï¼Œè´Ÿè´£å°†æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°ä¸åŒç›®çš„åœ°ï¼Œæ¯”å¦‚æ•°æ®åº“ã€æ–‡ä»¶ã€æŽ§åˆ¶å°ã€Unix Syslog ç­‰ã€‚ æ”¯æŒå¯¹è±¡â˜†è¿™äº›æ˜¯æ¡†æž¶çš„å¯é€‰å¯¹è±¡ï¼Œå®ƒä»¬æ”¯æŒæ ¸å¿ƒå¯¹è±¡åšä¸€äº›é¢å¤–çš„ä»»åŠ¡ï¼ŒåŒæ ·åœ¨æ¡†æž¶ä¸­å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚ LevelLevel å¯¹è±¡å®šä¹‰äº†æ—¥å¿—ä¿¡æ¯çš„ç²’åº¦å’Œä¼˜å…ˆçº§ã€‚ org.apache.Log4j.Level ç±»å®šä¹‰äº†æ—¥å¿—çº§åˆ«ï¼Œæ‚¨å¯é€šè¿‡ç»§æ‰¿ Level ç±»å®šåˆ¶è‡ªå·±çš„çº§åˆ«ã€‚ çº§åˆ«ï¼ˆä¼˜å…ˆçº§ï¼šdescï¼‰ æè¿° OFF æœ€é«˜çº§åˆ«ï¼Œç”¨äºŽå…³é—­æ—¥å¿—ã€‚ FATAL æŒ‡æ˜Žéžå¸¸ä¸¥é‡çš„é”™è¯¯äº‹ä»¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç»ˆæ­¢æ‰§è¡Œã€‚ ERROR æŒ‡æ˜Žé”™è¯¯äº‹ä»¶ï¼Œä½†åº”ç”¨å¯èƒ½è¿˜èƒ½ç»§ç»­è¿è¡Œã€‚ WARN æŒ‡æ˜Žæ½œåœ¨çš„æœ‰å®³çŠ¶å†µã€‚ INFO æŒ‡æ˜Žæè¿°ä¿¡æ¯ï¼Œä»Žç²—ç²’åº¦ä¸Šæè¿°äº†åº”ç”¨è¿è¡Œè¿‡ç¨‹ã€‚ DEBUG æŒ‡æ˜Žç»†è‡´çš„äº‹ä»¶ä¿¡æ¯ï¼Œå¯¹è°ƒè¯•åº”ç”¨æœ€æœ‰ç”¨ã€‚ TRACE æ¯” DEBUG çº§åˆ«çš„ç²’åº¦æ›´ç»†ã€‚ ALL æ‰€æœ‰çº§åˆ«ï¼ŒåŒ…æ‹¬å®šåˆ¶çº§åˆ«ã€‚ FilterFilter å¯¹è±¡ç”¨æ¥åˆ†æžæ—¥å¿—ä¿¡æ¯ï¼Œè¿›è€Œå†³å®šè¯¥æ¡æ—¥å¿—æ˜¯å¦è¢«è®°å½•ã€‚ ä¸€ä¸ª Appender å¯¹è±¡å¯å¯¹åº”å¤šä¸ª Filter å¯¹è±¡ï¼Œå½“æ—¥å¿—ä¿¡æ¯ä¼ ç»™ Appender å¯¹è±¡æ—¶ï¼Œä¸Žå…¶å…³è”çš„æ‰€æœ‰ Filter å¯¹è±¡éœ€è¦åˆ¤æ–­æ˜¯å¦å°†æ—¥å¿—ä¿¡æ¯å‘å¸ƒåˆ°ç›®çš„åœ°ã€‚ ObjectRendererObjectRenderer å¯¹è±¡è´Ÿè´£ä¸ºä¼ å…¥æ—¥å¿—æ¡†æž¶çš„ä¸åŒå¯¹è±¡æä¾›å­—ç¬¦ä¸²å½¢å¼çš„è¡¨ç¤ºï¼ŒLayout å¯¹è±¡ä½¿ç”¨è¯¥å¯¹è±¡æ¥å‡†å¤‡æœ€ç»ˆçš„æ—¥å¿—ä¿¡æ¯ã€‚ LogManagerLogManager å¯¹è±¡ç®¡ç†æ—¥å¿—æ¡†æž¶ï¼Œå®ƒè´Ÿè´£ä»Žç³»ç»Ÿçº§çš„é…ç½®æ–‡ä»¶æˆ–ç±»ä¸­è¯»å–åˆå§‹é…ç½®å‚æ•°ã€‚ ä½¿ç”¨ Log4jå•çº¯çš„ä½¿ç”¨åªéœ€è¦ slf4j-api , log4j ; ä¸€äº›é¡¹ç›®éœ€è¦ slf4j-log4j12 ï¼ˆå¦‚ï¼š MyBatis ï¼‰ã€‚ 12345678910111213141516&lt;!-- log (slf4j, log4j, slf4j-log4jæ•´åˆ)--&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;version&gt;1.7.7&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt; &lt;version&gt;1.7.25&lt;/version&gt;&lt;/dependency&gt; log4j.propertiesé»˜è®¤æƒ…å†µä¸‹ï¼Œ LogManager ä¼šåœ¨ classpath ä¸­å¯»æ‰¾ log4j.properties æ–‡ä»¶ã€‚ ä»¥ä¸‹æ˜¯è¾ƒä¸ºè¯¦ç»†çš„é…ç½®ç¤ºä¾‹ï¼Œæ¨¡å¼è½¬æ¢å­—ç¬¦è¯·å‚è€ƒï¼šé™„å½•ï¼šPatternLayout 12345678910111213141516171819202122232425262728293031323334353637# è®¾ç½®æ ¹æ—¥å¿—ï¼Œæœ€ä½Žæ—¥å¿—çº§åˆ«ä¸ºINFOï¼Œå¹¶æ·»åŠ äº†2ä¸ªappenderï¼ˆCONSOLE,log_errorï¼‰ç¡®å®šè¾“å‡ºè¯¦æƒ…log4j.rootLogger = INFO,CONSOLE,log_error# è‡ªå®šä¹‰securityLogæ—¥å¿—å¯¹è±¡ï¼Œæœ€ä½Žæ—¥å¿—çº§åˆ«ä¸ºINFOï¼Œå¹¶æ·»åŠ äº†2ä¸ªappenderï¼ˆlog_security,databaseï¼‰ç¡®å®šè¾“å‡ºè¯¦æƒ…log4j.logger.securityLog = INFO,log_security,databaselog4j.logger.com.ibatis=DEBUGlog4j.logger.com.ibatis.common.jdbc.SimpleDataSource=INFOlog4j.logger.com.ibatis.common.jdbc.ScriptRunner=INFOlog4j.logger.com.ibatis.sqlmap.engine.impl.SqlMapClientDelegate=DEBUGlog4j.logger.java.sql.Connection=DEBUGlog4j.logger.java.sql.Statement=INFOlog4j.logger.java.sql.PreparedStatement=DEBUG,stdout# ä½¿ç”¨æŽ§åˆ¶å°è¾“å‡ºæ—¥å¿—log4j.appender.CONSOLE = org.apache.log4j.ConsoleAppenderlog4j.appender.CONSOLE.layout = org.apache.log4j.PatternLayoutlog4j.appender.CONSOLE.layout.ConversionPattern = %p %d&#123;yyyy-MM-dd HH:mm:ss&#125; [%c] - %m%n# ä½¿ç”¨æ–‡ä»¶è¾“å‡ºæ—¥å¿—log4j.appender.log_security = org.apache.log4j.DailyRollingFileAppenderlog4j.appender.log_security.file = D:/PHIMP/logs/log_securitylog4j.appender.log_security.DatePattern = &apos;_&apos;yyyyMMdd&apos;.log&apos;log4j.appender.log_security.layout = org.apache.log4j.PatternLayoutlog4j.appender.log_security.layout.ConversionPattern = %p %d&#123;yyyy-MM-dd HH:mm:ss&#125; [%c] - %m%n# ä½¿ç”¨æ–‡ä»¶è¾“å‡ºæ—¥å¿—ï¼Œæœ€ä½Žçº§åˆ«ä¸ºerrorlog4j.appender.log_error = org.apache.log4j.DailyRollingFileAppenderlog4j.appender.log_error.Threshold = errorlog4j.appender.log_error.file = D:/PHIMP/logs/log_errorlog4j.appender.log_error.DatePattern = &apos;_&apos;yyyyMMdd&apos;.log&apos;log4j.appender.log_error.layout = org.apache.log4j.PatternLayoutlog4j.appender.log_error.layout.ConversionPattern = %p %d&#123;yyyy-MM-dd HH:mm:ss&#125; [%c] - %m%n# ä½¿ç”¨æ•°æ®åº“è¾“å‡ºæ—¥å¿—ï¼Œæœ€ä½Žçº§åˆ«ä¸ºinfo# æŽ¨èç»§æ‰¿org.apache.Log4j.jdbc.JDBCAppenderï¼ˆorg.log.LogJdbcAppenderï¼‰ç›´æŽ¥èŽ·å¾—æ•°æ®åº“ç›¸å…³ä¿¡æ¯log4j.appender.database = org.log.LogJdbcAppenderlog4j.appender.database.Threshold = infolog4j.appender.database.layout = org.apache.log4j.PatternLayoutlog4j.appender.database.sql = INSERT INTO %X&#123;tableName&#125; (%X&#123;fields&#125;) VALUES (%X&#123;values&#125;) *.javaèŽ·å–æ—¥å¿—å¯¹è±¡ï¼Œè®¾ç½®æ—¥å¿—ä¿¡æ¯ã€‚ æŽ§åˆ¶å° / æ–‡ä»¶ è¾“å‡ºæ—¥å¿— æŽ§åˆ¶å°è¾“å‡º: [INFO] 2017-01-17 17:01:17 [org.Demo] - ç”¨æˆ·**è®¿é—®äº†*** 12345678910package org.Demo;import org.apache.log4j.Logger;public class Demo&#123; // èŽ·å–ä¸Žç±»åŒåçš„æ—¥å¿—å¯¹è±¡ private Logger logger = Logger.getLogger(this.getClass()); public void log()&#123; logger.info("ç”¨æˆ·**è®¿é—®äº†***"); &#125;&#125; æ•°æ®åº“ è¾“å‡ºæ—¥å¿—JDBCAppender.java ç»§æ‰¿org.apache.Log4j.jdbc.JDBCAppenderç›´æŽ¥èŽ·å¾—æ•°æ®åº“ç›¸å…³ä¿¡æ¯ï¼Œä¸éœ€è¦å•ç‹¬é…ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class LogJdbcAppender extends JDBCAppender &#123; protected final Logger logger = Logger.getLogger(getClass()); public LogJdbcAppender() &#123; super(); &#125; @Override protected Connection getConnection() &#123; try &#123; connection =((SqlMapClient)ServiceLocator.getBean("sqlMapClient")).getDataSource().getConnection(); return connection; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125; @Override protected void closeConnection(Connection con) &#123; try &#123; if (con != null &amp;&amp; !con.isClosed()) &#123; con.close(); con = null; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; @Override public void flushBuffer() &#123; removes.ensureCapacity(buffer.size()); for (Iterator i = buffer.iterator(); i.hasNext();) &#123; try &#123; LoggingEvent logEvent = (LoggingEvent)i.next(); String sql = getLogStatement(logEvent); removes.add(logEvent); execute(sql); &#125; catch (SQLException e) &#123; errorHandler.error("Failed to excute sql", e, ErrorCode.FLUSH_FAILURE); &#125; &#125; buffer.removeAll(removes) removes.clear(); &#125;&#125; è°ƒç”¨ æŽ§åˆ¶å°/æ–‡ä»¶è¾“å‡º: [INFO] 2017-01-17 17:01:17 [org.Demo] - ç”¨æˆ·**è®¿é—®äº†*** æ•°æ®åº“è¡¨ VISIT_LOG æ’å…¥äº† values è®°å½•ã€‚ 1234567891011121314151617package org.Demo;public class Demo&#123; // èŽ·å–securityLogæ—¥å¿—å¯¹è±¡ private Logger logger = Logger.getLogger("securityLog"); public void log()&#123; // å­—æ®µ String fields = "ID, USER_ID, USER_NAME, RESOURCES_ID, VISIT_TIME"; StringBuffer values = new StringBuffer(); //...è®¾ç½®valueså€¼ MDC.put("tableName", "VISIT_LOG"); MDC.put("fields", fields); MDC.put("values", values.toString()); logger.info("ç”¨æˆ·**è®¿é—®äº†***"); &#125;&#125; é™„å½•PatternLayoutPatternLayout æ˜¯ä¸€ä¸ªç®€å•çš„ Layout å¯¹è±¡ï¼Œæä¾›äº†å¦‚ä¸‹å±žæ€§ï¼Œè¯¥å±žæ€§å¯é€šè¿‡é…ç½®æ–‡ä»¶æ›´æ”¹ï¼š åºå· å±žæ€§ &amp; æè¿° 1 conversionPatternè®¾ç½®è½¬æ¢æ¨¡å¼ï¼Œé»˜è®¤ä¸º %r [%t] %p %c %x - %m%nã€‚ æ¨¡å¼è½¬æ¢å­—ç¬¦ä¸‹é¢çš„è¡¨æ ¼è§£é‡Šäº†ä¸Šé¢æ¨¡å¼ä¸­ç”¨åˆ°çš„å­—ç¬¦ï¼Œä»¥åŠæ‰€æœ‰å®šåˆ¶æ¨¡å¼æ—¶èƒ½ç”¨åˆ°çš„å­—ç¬¦ï¼š è½¬æ¢å­—ç¬¦ å«ä¹‰ c è¾“å‡ºæ—¥å¿—å¯¹è±¡åï¼Œä¸€èˆ¬ä¸ºå‘èµ·è®°å½•æ—¥å¿—è¯·æ±‚ç±»çš„å…¨å/è‡ªè®¾ç½®çš„æ—¥å¿—å¯¹è±¡åã€‚æ¯”å¦‚å¯¹äºŽç±» org.apache.xyz.SomeClass ï¼Œæ¨¡å¼ %C{1} ä¼šè¾“å‡º SomeClass ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯è‡ªå®šä¹‰æ—¥å¿—å¯¹è±¡åï¼Œæ¯”å¦‚ log4j.logger.securityLog = INFO ä¸º securityLog ã€‚ d è¾“å‡ºè®°å½•æ—¥å¿—çš„æ—¥æœŸï¼Œæ¯”å¦‚ %d{HH:mm:ss,SSS} æˆ– %d{dd MMM yyyy HH:mm:ss,SSS} ã€‚ F åœ¨è®°å½•æ—¥å¿—æ—¶ï¼Œä½¿ç”¨å®ƒè¾“å‡ºæ–‡ä»¶åã€‚ l è¾“å‡ºç”Ÿæˆæ—¥å¿—çš„è°ƒç”¨è€…çš„åœ°åŸŸä¿¡æ¯ã€‚ L è¾“å‡ºå‘èµ·æ—¥å¿—è¯·æ±‚çš„è¡Œå·ã€‚ m è¾“å‡ºå’Œæ—¥å¿—äº‹ä»¶å…³è”çš„ï¼Œç”±åº”ç”¨æä¾›çš„ä¿¡æ¯ã€‚ M è¾“å‡ºå‘èµ·æ—¥å¿—è¯·æ±‚çš„æ–¹æ³•åã€‚ n è¾“å‡ºå¹³å°ç›¸å…³çš„æ¢è¡Œç¬¦ã€‚ p è¾“å‡ºæ—¥å¿—äº‹ä»¶çš„ä¼˜å…ˆçº§ã€‚ r è¾“å‡ºä»Žæž„å»ºå¸ƒå±€åˆ°ç”Ÿæˆæ—¥å¿—äº‹ä»¶æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ t è¾“å‡ºç”Ÿæˆæ—¥å¿—äº‹ä»¶çš„çº¿ç¨‹åã€‚ x è¾“å‡ºå’Œç”Ÿæˆæ—¥å¿—äº‹ä»¶çº¿ç¨‹ç›¸å…³çš„ NDC (åµŒå¥—è¯Šæ–­ä¸Šä¸‹æ–‡)ã€‚ X è¯¥å­—ç¬¦åŽè·Ÿ MDC é”®ï¼Œæ¯”å¦‚ X{clientIP} ä¼šè¾“å‡ºä¿å­˜åœ¨ MDC ä¸­é”® clientIP å¯¹åº”çš„å€¼ã€‚ % ç™¾åˆ†å·ï¼Œ %% ä¼šè¾“å‡ºä¸€ä¸ª % ã€‚ æ ¼å¼ä¿®é¥°ç¬¦ç¼ºçœæƒ…å†µä¸‹ï¼Œä¿¡æ¯ä¿æŒåŽŸæ ·è¾“å‡ºã€‚ä½†æ˜¯å€ŸåŠ©æ ¼å¼ä¿®é¥°ç¬¦çš„å¸®åŠ©ï¼Œå°±å¯è°ƒæ•´æœ€å°åˆ—å®½ã€æœ€å¤§åˆ—å®½ä»¥åŠå¯¹é½ã€‚ ä¸‹é¢çš„è¡¨æ ¼æ¶µç›–äº†å„ç§ä¿®é¥°ç¬¦ï¼š æ ¼å¼ä¿®é¥°ç¬¦ å·¦å¯¹é½ æœ€å°å®½åº¦ æœ€å¤§å®½åº¦ æ³¨é‡Š %20c å¦ 20 æ—  å¦‚æžœåˆ—åå°‘äºŽ 20 ä¸ªå­—ç¬¦ï¼Œå·¦è¾¹ä½¿ç”¨ç©ºæ ¼è¡¥é½ã€‚ %-20c æ˜¯ 20 æ—  å¦‚æžœåˆ—åå°‘äºŽ 20 ä¸ªå­—ç¬¦ï¼Œå³è¾¹ä½¿ç”¨ç©ºæ ¼è¡¥é½ã€‚ %.30c ä¸é€‚ç”¨ æ—  30 å¦‚æžœåˆ—åé•¿äºŽ 30 ä¸ªå­—ç¬¦ï¼Œä»Žå¼€å¤´å‰ªé™¤ã€‚ %20.30c å¦ 20 30 å¦‚æžœåˆ—åå°‘äºŽ 20 ä¸ªå­—ç¬¦ï¼Œå·¦è¾¹ä½¿ç”¨ç©ºæ ¼è¡¥é½ï¼Œå¦‚æžœåˆ—åé•¿äºŽ 30 ä¸ªå­—ç¬¦ï¼Œä»Žå¼€å¤´å‰ªé™¤ã€‚ %-20.30c æ˜¯ 20 30 å¦‚æžœåˆ—åå°‘äºŽ 20 ä¸ªå­—ç¬¦ï¼Œå³è¾¹ä½¿ç”¨ç©ºæ ¼è¡¥é½ï¼Œå¦‚æžœåˆ—åé•¿äºŽ 30 ä¸ªå­—ç¬¦ï¼Œä»Žå¼€å¤´å‰ªé™¤ã€‚]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>LOG</tag>
        <tag>SL4J</tag>
        <tag>Log4j</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆJavaä¹‹æžšä¸¾]]></title>
    <url>%2F2019%2F04%2F08%2F%E6%B5%85%E8%B0%88Java%E4%B9%8B%E6%9E%9A%E4%B8%BE%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨å…³é”®å­— enum å¯ä»¥å®šä¹‰æžšä¸¾ç±»åž‹ï¼Œæžšä¸¾ç±»åž‹å¯ä»¥åŒ…å«ä¸€ç»„åºåˆ—é›†ï¼Œå¯ä»¥ä½œä¸ºå¸¸è§„çš„ç¨‹åºç»„ä»¶ä½¿ç”¨ã€‚å½“æˆ‘ä»¬éœ€è¦ä»Žå›ºå®šçš„åºåˆ—ä¸­èŽ·å–å€¼æ—¶ï¼Œä½¿ç”¨æžšä¸¾ç±»åž‹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼ã€‚ åŸºæœ¬ç‰¹æ€§å°½ç®¡ enum çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®ç±»åž‹ï¼Œä½†æ˜¯è¿™ä¸ªå…³é”®å­—åªæ˜¯ä¸º enum ç”Ÿæˆå¯¹åº”çš„ç±»æ—¶ï¼Œäº§ç”ŸæŸäº›ç¼–è¯‘å™¨è¡Œä¸ºã€‚ å¯ä»¥å°† enum å½“åšå…¶ä»–ä»»ä½•ç±»æ¥å¤„ç†ã€‚ åˆ›å»º enum æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ç±»ï¼Œè¿™ä¸ªç±»ä¼šç»§æ‰¿ java.lang.Enum ã€‚ ç”±æ­¤å¯çŸ¥ï¼Œæžšä¸¾ç±»åž‹å…·æœ‰ä»¥ä¸‹ ç‰¹æ€§ ï¼š enum ä¸èƒ½å†ç»§æ‰¿ã€‚ enum å¯ä»¥ä½¿ç”¨ Enumç±» çš„æ–¹æ³•ã€‚ enum é™¤äº†ä¸èƒ½ç»§æ‰¿ä»¥å¤–ï¼ŒåŸºæœ¬å¯ä»¥çœ‹åšä¸€ä¸ªå¸¸è§„çš„ç±»ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæžšä¸¾ç±»åž‹è¿˜å…·æœ‰ä»¥ä¸‹ ç‰¹æ€§ ï¼š enum ä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ã€‚ enum å†…å¯ä»¥å®šä¹‰ä¸€äº›åºåˆ—ï¼Œè¿™äº›å€¼å®žé™…ä¸Šenumå®žä¾‹ï¼Œé»˜è®¤æ˜¯ public static final ã€‚ enum éœ€è¦æä¾›å’Œå®žä¾‹å£°æ˜Žå¯¹åº”çš„æž„é€ å‡½æ•°ï¼Œenumæž„é€ å‡½æ•°é»˜è®¤æ˜¯ private ã€‚ 123public enum SimpleEnum &#123; SUCCESS, WARNING, ERROR;&#125; ç»§æ‰¿äºŽ Enumçš„æ–¹æ³• è¯´æ˜Ž ordinal() è¿”å›ž enumå®žä¾‹ åœ¨å£°æ˜Žæ—¶çš„æ¬¡åºã€‚ name() è¿”å›ž enumå®žä¾‹ åœ¨å£°æ˜Žæ—¶çš„åå­—ã€‚ toString() é»˜è®¤ä¸Ž name() ç›¸åŒã€‚ getDeclaringClass() èŽ·å– enumå®žä¾‹ æ‰€å±žçš„ç±»ç±»åž‹ã€‚ 1234567System.out.println(SimpleEnum.SUCCESS.ordinal());System.out.println(SimpleEnum.SUCCESS == SimpleEnum.SUCCESS);System.out.println(SimpleEnum.WARNING.name());System.out.println(SimpleEnum.WARNING.toString());System.out.println(SimpleEnum.ERROR.getDeclaringClass()); 123450trueWARNINGWARNINGclass org.demo.enumdemo.SimpleEnum ä¸Ž name() æ–¹æ³•å¯¹åº”ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æžšä¸¾çš„åå­—èŽ·å–æžšä¸¾ç±»åž‹ã€‚ æ–¹æ³• è¯´æ˜Ž valueOf(Class&lt;T&gt; enumType, String name) é€šè¿‡æžšä¸¾çš„åå­—èŽ·å–æžšä¸¾ç±»åž‹ï¼Œå¯è¢«ç»§æ‰¿çš„ static æ–¹æ³•ã€‚ valueOf(String name) é€šè¿‡æžšä¸¾çš„åå­—èŽ·å–æžšä¸¾ç±»åž‹ï¼Œç”±ç¼–è¯‘å™¨æ·»åŠ ã€‚ 1234System.out.println(Enum.valueOf(SimpleEnum.class, "ERROR") == SimpleEnum.ERROR);System.out.println(SimpleEnum.valueOf(SimpleEnum.class, "ERROR") == SimpleEnum.ERROR);System.out.println(SimpleEnum.valueOf("ERROR") == SimpleEnum.ERROR); 123truetruetrue æ·»åŠ å±žæ€§å’Œæ–¹æ³•ä¸€èˆ¬æžšä¸¾ä¼šç”¨æ¥å®šä¹‰æ•°æ®å­—å…¸ï¼Œä¸ºäº†å¢žåŠ å¯ç”¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å‘æžšä¸¾ç±»åž‹ä¸­æ·»åŠ å±žæ€§å’Œæ–¹æ³•ã€‚ 12345678910111213141516171819public enum DictCode &#123; SUCCESS("0", "æˆåŠŸ"), WARNING("1", "è­¦å‘Š"), ERROR("2", "é”™è¯¯"); private String code; private String codeName; DictCode(String code, String codeName) &#123; this.code = code; this.codeName = codeName; &#125; // getter and setter ...&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼š å‘æžšä¸¾ä¸­æ·»åŠ å±žæ€§å’Œæ–¹æ³•åŽï¼Œå®žä¾‹å£°æ˜Žä¸€å®šè¦ä½¿ç”¨ ; ç»“å°¾ã€‚ è™½ç„¶å½“enumä¸­åªæœ‰å®žä¾‹æ—¶å¯ä»¥çœç•¥ ; çš„ ï¼Œä½†ä¸æŽ¨èã€‚ å®žä¾‹å£°æ˜Žå®žé™…ä¸Šä¼šè°ƒç”¨æž„é€ æ–¹æ³•ï¼Œæ•…éœ€è¦æä¾›å¯¹åº”çš„æž„é€ æ–¹æ³•ã€‚ è§£æž values()enum æä¾›äº†ä¸€ä¸ªéåŽ†çš„æ–¹æ³• values() ã€‚ 123for (DictCode item : DictCode.values()) &#123; System.out.println(item.name() + ": " + item.getCodeName() + "-" + item.getCode());&#125; 123SUCCESS: æˆåŠŸ-0WARNING: è­¦å‘Š-1ERROR: é”™è¯¯-2 å®žé™…ä¸Šï¼Œ values() æ˜¯ç¼–è¯‘å™¨æ·»åŠ çš„é™æ€æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç»§æ‰¿è‡ªEnumã€‚ å¦‚æžœæˆ‘ä»¬æƒ³éåŽ†Enumå¯ä»¥ä½¿ç”¨ Classç±» çš„ getEnumConstants() æ–¹æ³•ã€‚ å› ä¸ºè¯¥æ–¹æ³•æ¥è‡ª Classç±»ï¼Œæ•…ä¹Ÿå¯ç”¨åœ¨æ²¡æžšä¸¾ç±»åž‹ä¸Šï¼Œä½†ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ 12345678Enum e = DictCode.SUCCESS;// Enum.values(); // Cannot resolve method 'values()'// e.values(); // Cannot resolve method 'values()'for (Enum enumConstant : e.getClass().getEnumConstants()) &#123; DictCode item = (DictCode) enumConstant; System.out.println(item.name() + ": " + item.getCodeName() + "-" + item.getCode());&#125; 123SUCCESS: æˆåŠŸ-0WARNING: è­¦å‘Š-1ERROR: é”™è¯¯-2]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>æžšä¸¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆJavaä¹‹æ³¨è§£]]></title>
    <url>%2F2019%2F03%2F11%2F%E6%B5%85%E8%B0%88Java%E4%B9%8B%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[æ³¨è§£ (åˆè¢«ç§°ä¸º å…ƒæ•°æ® ) ï¼Œæ˜¯ Java æä¾›çš„ä¸€ç§è®©æˆ‘ä»¬å¯ä»¥ä¸ºä»£ç æ·»åŠ ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚ å…ƒæ•°æ® : ä¸­ä»‹æ•°æ®ï¼Œä¸ºæè¿°æ•°æ®çš„æ•°æ®ï¼Œä¸»è¦æ˜¯æè¿°æ•°æ®å±žæ€§çš„ä¿¡æ¯ã€‚ é€šè¿‡æ³¨è§£å¯ä»¥æœ‰æ•ˆçš„å‡å°‘æ ·æ¿å¼ä»£ç  ï¼Œæ‰€ä»¥æ³¨è§£å¼å¼€å‘æ˜¯çŽ°åœ¨æ¡†æž¶çš„ä¸»æµè¶‹åŠ¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ³¨è§£è¿˜å¯ä»¥è¿›è¡Œç±»åž‹æ£€æŸ¥ å’Œ æ³¨é‡Šè¯´æ˜Ž ç­‰ä½œç”¨ã€‚ è®¤è¯†æ³¨è§£ä»Ž Classç±» å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºŽ JVM è€Œè¨€ï¼Œæ³¨è§£æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŽ¥å£ï¼Œå¹¶ä¸”æ‰€æœ‰çš„æ³¨è§£ç±»åž‹éƒ½ç»§æ‰¿äº† AnnotationæŽ¥å£ ã€‚ æˆ‘ä»¬çŸ¥é“ä¸€äº›æ¡†æž¶éœ€è¦ä¸€äº›é¢å¤–ä¿¡æ¯æ‰èƒ½ä¸Žæºä»£ç ååŒå·¥ä½œã€‚ä»¥å‰ä¸€èˆ¬æ˜¯é…ç½®æ–‡ä»¶ï¼ŒçŽ°åœ¨æ›´å–œæ¬¢ä½¿ç”¨æ³¨è§£ã€‚å› ä¸ºæºä»£ç å·²ç»æä¾›äº†ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç±»åï¼ŒåŒ…åç­‰ï¼Œæ‰€ä»¥ä½¿ç”¨æ³¨è§£ä¼šæœ‰æ•ˆçš„å‡å°‘é…ç½®ã€‚ å…ƒæ³¨è§£å…ƒæ³¨è§£ : Java ä¸­å†…ç½®äº†ä¸€äº›å…ƒæ³¨è§£ï¼Œå…ƒæ³¨è§£ä¸“èŒè´Ÿè´£æ³¨é‡Šå…¶ä»–æ³¨è§£ã€‚ æ¶‰åŠ è¯´æ˜Ž @Target ç›®æ ‡ï¼ŒæŒ‡æ³¨è§£çš„ä½œç”¨ä½ç½®ã€‚ @Retention ä¿ç•™æœŸï¼ŒæŒ‡æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸã€‚ @Inherited ç»§æ‰¿ï¼Œå…è®¸å­ç±»ç»§æ‰¿çˆ¶ç±»çš„è¯¥æ³¨è§£ã€‚åªä¼šç»§æ‰¿ä½œç”¨åœ¨ ElementType.TYPE çš„æ³¨è§£ã€‚ @Documented æ–‡æ¡£ï¼Œç”Ÿæˆ javadoc æ—¶ä¼šåŒ…å«æ³¨è§£ä¿¡æ¯ã€‚ @Repeatable å¯é‡å¤ï¼Œè¡¨ç¤ºå¯å¤šæ¬¡ä½¿ç”¨ï¼ŒJDK8æ–°å¢žã€‚ @Target@Target : è¡¨ç¤ºæ³¨è§£çš„ä½œç”¨ä½ç½®ï¼Œéœ€è¦è®¾ç½®å…ƒç´ ç±»åž‹é›† ElementType[] ã€‚ ElementTypeæžšä¸¾å€¼ è¯´æ˜Ž ElementType.TYPE ç±»ï¼ŒæŽ¥å£ï¼ˆåŒ…æ‹¬æ³¨é‡Šç±»åž‹ï¼‰æˆ–æžšä¸¾å£°æ˜Žã€‚ ElementType.FIELD å­—æ®µå£°æ˜Žï¼ˆåŒ…æ‹¬æžšä¸¾å¸¸é‡ï¼‰ã€‚ ElementType.METHOD æ–¹æ³•å£°æ˜Žã€‚ ElementType.PARAMETER æ­£å¼å‚æ•°å£°æ˜Žã€‚ ElementType.CONSTRUCTOR æž„é€ å‡½æ•°å£°æ˜Žã€‚ ElementType.LOCAL_VARIABLE å±€éƒ¨å˜é‡å£°æ˜Žã€‚ ElementType.ANNOTATION_TYPE æ³¨é‡Šç±»åž‹å£°æ˜Žã€‚ ElementType.PACKAGE åŒ…å£°æ˜Žã€‚ ElementType.TYPE_PARAMETER è¾“å…¥å‚æ•°å£°æ˜Žï¼Œ JDK8æ–°å¢žã€‚ ElementType.TYPE_USE ä½¿ç”¨ä¸€ç§ç±»åž‹ï¼Œ JDK8æ–°å¢žã€‚ @Retention@Retention : è¡¨ç¤ºæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œéœ€è¦è®¾ç½®å­˜æ´»ç­–ç•¥ RetentionPolicy ã€‚ RetentionPolicyæžšä¸¾å€¼ è¯´æ˜Ž RetentionPolicy.SOURCE åªå­˜åœ¨äºŽæºç ï¼Œç¼–è¯‘å™¨å°†ä¸¢å¼ƒæ³¨é‡Šã€‚ RetentionPolicy.CLASS æ³¨é‡Šå°†ç”±ç¼–è¯‘å™¨*è®°å½•åœ¨ç±»æ–‡ä»¶ä¸­ï¼Œä½†åœ¨è¿è¡Œæ—¶ä¸éœ€è¦ç”±VMä¿ç•™ã€‚ è¿™æ˜¯é»˜è®¤çš„è¡Œä¸º ã€‚ RetentionPolicy.RUNTIME æ³¨é‡Šå°†ç”±ç¼–è¯‘å™¨è®°å½•åœ¨ç±»æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”åœ¨è¿è¡Œæ—¶ç”±VMä¿ç•™ï¼Œå› æ­¤ å¯ä»¥åå°„æ€§åœ°è¯»å–å®ƒä»¬ ã€‚ @Inherited@Inherited : è¡¨ç¤ºè¢«ä¿®é¥°çš„æ³¨è§£ä½œç”¨äºŽè¶…ç±»åŽï¼Œè¶…ç±»çš„å­ç±»ä¼šç»§æ‰¿è¯¥æ³¨è§£ã€‚ä½†åªä¼šç»§æ‰¿ä½œç”¨åœ¨ ElementType.TYPE çš„æ³¨è§£ã€‚ è¿™ç§ç»§æ‰¿æ˜¯éšè”½çš„ï¼Œå…‰ä»Žå­ç±»æ— æ³•çœ‹å‡ºï¼Œä½†å¯ä»¥é€šè¿‡åå°„èŽ·å–æ‰€ç»§æ‰¿æ³¨è§£ã€‚ @Documented@Documented : è¡¨ç¤ºåœ¨ç”Ÿæˆ javadoc æ—¶ï¼Œè¢«ä¿®é¥°çš„æ³¨è§£ä¼šè¢«åŒ…å«åœ¨æ–‡æ¡£ä¸­ã€‚ @Repeatable@Repeatable : è¡¨ç¤ºè¢«ä¿®é¥°çš„æ³¨è§£å¯å¤šæ¬¡ä½¿ç”¨ï¼Œæ˜¯ JDK8 æ–°å¢žçš„æ³¨è§£ï¼Œä¾‹å¦‚ Spring çš„ @Scheduled å¯ä»¥è®¾ç½®å¤šç§å®šæ—¶ç­–ç•¥ã€‚ æ³¨è§£åˆ†ç±»æŒ‰æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸåˆ†ç±»ï¼š æŒ‰ç”Ÿå‘½å‘¨æœŸåˆ†ç±» è¯´æ˜Ž åº”ç”¨ æºç æ³¨è§£ æ³¨è§£åªåœ¨æºç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘æˆ *.class æ–‡ä»¶å°±ä¸å­˜åœ¨äº†ã€‚ ç¼–è¯‘æ—¶æ³¨è§£ æ³¨è§£åœ¨æºç å’Œ *.class æ–‡ä»¶ä¸­éƒ½å­˜åœ¨ã€‚ TODOä¸€èˆ¬ç”¨äºŽç¼–è¯‘æœŸæ£€æŸ¥ã€‚ è¿è¡Œæ—¶æ³¨è§£ æ³¨è§£åœ¨è¿è¡Œé˜¶æ®µè¿˜ä¼šèµ·ä½œç”¨ï¼Œç”šè‡³ä¼šå½±å“è¿è¡Œé€»è¾‘ã€‚ ç¬¬ä¸‰æ–¹æŠ€æœ¯å–œæ¬¢ç”¨å…¶å®žçŽ°åŠŸèƒ½é€»è¾‘ã€‚ æŒ‰æ³¨è§£æ¥æºåˆ†ç±»ï¼š æŒ‰æ¥æºåˆ†ç±» ç¤ºä¾‹ JDKè‡ªå¸¦ @Override , @Deprecated , @SuppressWarnings ç­‰ æ¥è‡ªç¬¬ä¸‰æ–¹çš„æ³¨è§£ @Service , @Autowired ç­‰Springå¸¸ç”¨æ³¨è§£ã€‚ è‡ªå®šä¹‰çš„æ³¨è§£ å¯ä»¥ä½¿ç”¨ @interface ç­‰æ¥åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£ã€‚ JDKæ³¨è§£è¿™é‡Œä»‹ç»ä¸€ä¸‹ï¼Œæ—¥å¸¸å¼€å‘æ—¶å¸¸ä¼šä½¿ç”¨åˆ°çš„ JDKæ³¨è§£ ã€‚ æ³¨è§£æ˜¯ JDK1.5 æ—¶æ·»åŠ çš„ç‰¹æ€§ï¼ŒJDK5åªæä¾›äº†è¿™3ä¸ªæ³¨è§£ã€‚ æ¶‰åŠ è¯´æ˜Ž @Override è¦†ç›–ï¼Œè¦†ç›–æ¥è‡ªè¶…ç±»åž‹ï¼ˆçˆ¶ç±»æˆ–æŽ¥å£ï¼‰çš„æ–¹æ³•ã€‚ @Deprecated æ ‡è¯†å…ƒç´ è¿‡æ—¶ï¼Œä½¿ç”¨å¤„ç¼–è¯‘å™¨ä¼šæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ã€‚ @SuppressWarnings æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Šï¼Œå¯ä»¥åˆ¶å®šè­¦å‘Šé›†ã€‚ä¾‹å¦‚ @SuppressWarnings(&quot;unchecked&quot;) æŠ‘åˆ¶æœªæ£€æŸ¥çš„è­¦å‘Šã€‚ @Override@Override : å¯ä»¥ä½¿ç”¨å®ƒæ¥è¡¨ç¤ºè¦†ç›–è¶…ç±»åž‹ï¼ˆçˆ¶ç±»æˆ–æŽ¥å£ï¼‰çš„æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ªæºç æ³¨è§£ã€‚ å®žé™…ä¸Šï¼Œ @Override æ˜¯å¯é€‰çš„ï¼Œä¸å†™ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†ä½¿ç”¨åœ¨éžç»§æ‰¿æ¥çš„æ–¹æ³•ä¸Šä¼šæŠ¥é”™ã€‚ 1234@Target(ElementType.METHOD)@Retention(RetentionPolicy.SOURCE)public @interface Override &#123;&#125; @Deprecated@Deprecated : æ ‡è¯†å…ƒç´ è¿‡æ—¶ï¼Œä½¿ç”¨å¤„ç¼–è¯‘å™¨ä¼šæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿è¡Œæ—¶æ³¨è§£ã€‚ 12345@Documented@Retention(RetentionPolicy.RUNTIME)@Target(value=&#123;CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE&#125;)public @interface Deprecated &#123;&#125; @SuppressWarnings@SuppressWarnings : æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Šï¼Œå¯ä»¥åˆ¶å®šè­¦å‘Šé›†ï¼Œå®ƒæ˜¯ä¸€ä¸ªæºç æ³¨è§£ã€‚ 123456789101112/** * @jls 4.8 Raw Types * @jls 4.12.2 Variables of Reference Type * @jls 5.1.9 Unchecked Conversion * @jls 5.5.2 Checked Casts and Unchecked Casts * @jls 9.6.3.5 @SuppressWarnings */@Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)@Retention(RetentionPolicy.SOURCE)public @interface SuppressWarnings &#123; String[] value();&#125; è¿™é‡Œä»…åˆ—å‡ºå‡ ä¸ªå¸¸ç”¨çš„è­¦å‘Šå…³é”®å­—ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹ JLS ã€‚ æŠ‘åˆ¶è­¦å‘Šçš„å…³é”®å­— ç”¨é€” all åŽ‹åˆ¶æ‰€æœ‰è­¦å‘Šã€‚ unchecked ç¦æ­¢ç›¸å¯¹äºŽæœªç»æ£€æŸ¥çš„æ“ä½œçš„è­¦å‘Šã€‚ cast ç¦æ­¢ç›¸å¯¹äºŽå¼ºåˆ¶è½¬æ¢æ“ä½œçš„è­¦å‘Šã€‚ rawtypes åœ¨ç±»paramsä¸Šä½¿ç”¨æ³›åž‹æ—¶ï¼Œç¦æ­¢ç›¸å¯¹äºŽéžç‰¹å®šç±»åž‹çš„è­¦å‘Šã€‚ deprecation ç¦æ­¢ç›¸å¯¹äºŽå¼ƒç”¨çš„è­¦å‘Šã€‚ ä½¿ç”¨æ³¨è§£é™¤åŽ» JDK å’Œ æ¡†æž¶æŠ€æœ¯å¤–ï¼Œå¤§å¤šæ•°æ—¶å€™éœ€è¦ è‡ªå®šä¹‰æ³¨è§£ å¹¶ ç¼–å†™å¤„ç†å™¨æ¥è§£æžå®ƒä»¬ã€‚ è‡ªå®šä¹‰æ³¨è§£åŸºç¡€è¯­æ³• å®šä¹‰æ³¨è§£éœ€è¦ä½¿ç”¨å…³é”®å­— @interface ï¼Œå…¶è¯­æ³•ç±»ä¼¼æŽ¥å£ ï¼Œä½†ä¸å…è®¸ç»§æ‰¿ã€‚ æ³¨è§£ä¸­å¯ä»¥æ·»åŠ  å…ƒç´  ï¼Œçœ‹èµ·æ¥ååˆ†åƒæŽ¥å£çš„æ–¹æ³•ã€‚ æ³¨è§£ç±»å¯ä»¥æ²¡æœ‰å…ƒç´ ï¼Œæ²¡æœ‰å…ƒç´ çš„æ³¨è§£ç§°ä¸º æ ‡è¯†æ³¨è§£ ã€‚ å…ƒç´  çš„ç±»åž‹å—é™ï¼Œåªèƒ½ä½¿ç”¨ : åŸºæœ¬ç±»åž‹ , String , Class , enum , Annotation å’Œ ä»¥ä¸Šç±»åž‹çš„æ•°ç»„ ã€‚ ä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»åž‹çš„åŒ…è£…ç±»åž‹ï¼Œä½†æ”¯æŒè‡ªåŠ¨è£…ç®±ã€‚ è™½ç„¶çœ‹ä¸ŠåŽ»åƒæŠ½è±¡æ–¹æ³•ï¼Œä½† å…ƒç´  æ˜¯ä¸å…è®¸æœ‰ å…¥å‚ å’Œ å¼‚å¸¸å£°æ˜Žçš„ã€‚ å…ƒç´  ä¸èƒ½æœ‰ä¸ç¡®å®šçš„å€¼ï¼Œå³è¦ä¹ˆä½¿ç”¨ default è®¾ç½®é»˜è®¤å€¼ï¼Œè¦ä¹ˆä½¿ç”¨æ—¶æä¾›å…ƒç´ å€¼ã€‚ é»˜è®¤å€¼ä¸å…è®¸ä½¿ç”¨ null ï¼Œä¸ºç»•å¼€è¿™ä¸ªçº¦æŸï¼Œå¯ä»¥ä½¿ç”¨ ç©ºå­—ç¬¦ä¸² æˆ– è´Ÿæ•°ï¼Œæ¥è¡¨ç¤ºä¸å­˜åœ¨ã€‚ çº¦å®šä¿—æˆçš„è§„èŒƒ : å¦‚æžœåªæœ‰ä¸€ä¸ªæ³¨è§£å…ƒç´ ï¼Œåˆ™å–åä¸º value() ï¼Œè¿™æ ·åœ¨ä½¿ç”¨æ—¶å¯ä»¥å¿½ç•¥æˆå‘˜åå’Œèµ‹å€¼å· = ã€‚ 1234567891011@Target(&#123;ElementType.TYPE, ElementType.METHOD&#125;)@Retention(RetentionPolicy.RUNTIME)@Inherited@Documentedpublic @interface Description &#123; String value(); // å¯ä»¥ç”¨defaultæŒ‡å®šé»˜è®¤å€¼ int id() default 100;&#125; è‡ªå®šä¹‰æ³¨è§£ @Description æ³¨è§£å¯ä»¥ä½œç”¨äºŽ ç±»åž‹ å’Œ æ–¹æ³• ä¸Šã€‚ æ³¨è§£çš„å…ƒç´ èµ‹å€¼ä¸€èˆ¬é‡‡ç”¨ å…ƒç´ å=å…ƒç´ å€¼ çš„æ–¹å¼è®¾ç½®ï¼Œç¬¦åˆçº¦å®šä¿—ç§°çš„è§„èŒƒé™¤å¤–ã€‚ 1234567891011121314151617181920212223@Description(value="It's Person class annotation.", id=10 )public class Person &#123; private String name; private int age; @Description("It's Person method annotation.") public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125;&#125; @Description æ³¨è§£å¯ä»¥è¢«ç»§æ‰¿ï¼Œå¯ä»¥çœ‹å‡ºæ³¨è§£çš„ç»§æ‰¿æ˜¯æ¯”è¾ƒéšè”½çš„ï¼Œæ— æ³•ç›´æŽ¥çœ‹å‡ºã€‚ 1234567891011121314151617181920212223public class User extends Person &#123; private String name; private int age; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Description("It's User method annotation.") public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125;&#125; ç¼–å†™æ³¨è§£å¤„ç†å™¨å¦‚æžœæ²¡æœ‰ç”¨æ¥è¯»å–æ³¨è§£çš„å·¥å…·ï¼Œé‚£æ³¨è§£ä¹Ÿä¸ä¼šæ¯”æ³¨é‡Šæ›´æœ‰ç”¨ã€‚ ä½¿ç”¨ åå°„ å¯ä»¥èŽ·å– æ³¨è§£ æä¾›çš„ å…ƒæ•°æ® ã€‚ ä»Žæ²¡æœ‰æ‰“å° getName:It&#39;s User method annotation. ï¼Œå¯ä»¥çœ‹å‡º @Inherited åªä¼šç»§æ‰¿ä½œç”¨åœ¨ ElementType.TYPE çš„æ³¨è§£ã€‚ 12345678910111213141516171819202122@Testpublic void test()&#123; Class clazz = User.class; boolean isExist = clazz.isAnnotationPresent(Description.class); if (isExist)&#123; Description d1 = (Description) clazz.getAnnotation(Description.class); System.out.println(d1.value()); // It's Person class annotation. &#125; Method[] methods = clazz.getDeclaredMethods(); for (Method method : methods) &#123; boolean isMExist = method.isAnnotationPresent(Description.class); if (isMExist)&#123; Description d2 = method.getAnnotation(Description.class); System.out.println(method.getName() + ":" + d2.value()); // getAge:It's User method annotation. &#125; &#125;&#125; å¸¸è§åº”ç”¨ORMè¿™é‡Œç”¨æ³¨è§£ç®€å•å®žçŽ°ä¸€ä¸ªORMæ¡†æž¶çš„æŸ¥è¯¢åŠŸèƒ½ï¼Œç±»ä¼¼äºŽ Hibernateã€‚ å®šä¹‰æ³¨è§£å…ˆå®šä¹‰ä¸¤ä¸ªæ³¨è§£ï¼Œç”¨äºŽè¡¨ç¤º æ•°æ®è¡¨ å’Œ å­—æ®µ ã€‚ 123456@Target(&#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)public @interface Table &#123; String value();&#125; 123456@Target(&#123;ElementType.FIELD&#125;)@Retention(RetentionPolicy.RUNTIME)public @interface Column &#123; String value();&#125; å®šä¹‰æ³¨è§£è§£æžå™¨å®šä¹‰ä¸€ä¸ªå·¥å…·ç±»ç”¨äºŽè§£æžæ³¨è§£ï¼Œå¹¶å®Œæˆç®€å•æŸ¥è¯¢çš„ SQL æ‹¼æŽ¥ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061public class ORM &#123; private static final String SELECT = "SELECT"; private static final String FROM = "FROM"; private static final String WHERE = "WHERE"; private static final String SPLIT_BLANK = " "; private static final String EQUALS = "="; private static final String AND = "AND"; public static &lt;T&gt; String query(T obj) throws Exception &#123; StringBuilder sql = new StringBuilder(); Class clazz = obj.getClass(); Field[] fields = clazz.getDeclaredFields(); String BASE_COLUMN_LIST = Arrays.stream(fields) .filter(item -&gt; item.isAnnotationPresent(Column.class)) .map(item -&gt; item.getAnnotation(Column.class).value()) .collect(Collectors.joining(",")); String TABLE_NAME = ((Table) clazz.getAnnotation(Table.class)).value(); sql.append(SELECT).append(SPLIT_BLANK) .append(BASE_COLUMN_LIST).append(SPLIT_BLANK) .append(FROM).append(SPLIT_BLANK) .append(TABLE_NAME); StringBuilder condition = new StringBuilder(); for (Field field : fields) &#123; String fieldName = field.getAnnotation(Column.class).value(); PropertyDescriptor descriptor = new PropertyDescriptor(field.getName(), clazz); Method getter = descriptor.getReadMethod(); Object fieldValue = getter.invoke(obj); if (fieldValue == null || (fieldValue instanceof Integer &amp;&amp; fieldValue.equals(0))) &#123; continue; &#125; condition.append(AND).append(SPLIT_BLANK).append(fieldName).append(EQUALS); if (fieldValue instanceof String) &#123; condition.append("'").append((String) fieldValue).append("'"); &#125; else if (fieldValue instanceof Integer) &#123; condition.append((Integer) fieldValue); &#125; &#125; if (condition.length() &gt; 0) &#123; sql.append(SPLIT_BLANK).append(WHERE).append(SPLIT_BLANK).append(condition.substring(4)); &#125; return sql.toString(); &#125;&#125; æ³¨è§£çš„ä½¿ç”¨å°†ä¸¤ä¸ªæ³¨è§£ç”¨äºŽå®žä½“ç±»ä¸Šï¼Œå½¢æˆå¯¹è±¡å’Œæ•°æ®è¡¨çš„æ˜ å°„å…³ç³»ã€‚ 12345678910111213141516171819202122232425@Table("USER")public class Filter &#123; @Column("USER_NAME") private String userName; @Column("USER_AGE") private int userAge; public String getUserName() &#123; return userName; &#125; public void setUserName(String userName) &#123; this.userName = userName; &#125; public int getUserAge() &#123; return userAge; &#125; public void setUserAge(int userAge) &#123; this.userAge = userAge; &#125;&#125; å¦‚æ­¤è¿™èˆ¬ï¼Œä¸€ä¸ªç®€å•çš„åŠ¨æ€çš„æ¡ä»¶æŸ¥è¯¢å°±å®Œæˆäº†ã€‚ 123456789@Testpublic void test() throws Exception &#123; Filter filter = new Filter(); filter.setUserName("å¼ ä¸‰"); filter.setUserAge(18); System.out.println(ORM.query(filter)); // SELECT USER_NAME,USER_AGE FROM USER WHERE USER_NAME='å¼ ä¸‰'AND USER_AGE=18&#125;]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>æ³¨è§£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆJavaä¹‹RTTIä¸Žåå°„]]></title>
    <url>%2F2019%2F03%2F01%2F%E6%B5%85%E8%B0%88Java%E4%B9%8BRTTI%E4%B8%8E%E5%8F%8D%E5%B0%84%2F</url>
    <content type="text"><![CDATA[åå°„æœºåˆ¶ æ˜¯ Java æä¾›çš„ä¸€ç§è®©æˆ‘ä»¬åœ¨è¿è¡Œæ—¶è¯†åˆ«å¯¹è±¡ç±»åž‹çš„æ–¹å¼ã€‚ é€šè¿‡åå°„å¯ä»¥è¿›è¡Œæ›´åŠ åŠ¨æ€çš„ç¼–ç¨‹ï¼Œè¿™ä¹Ÿæ­£æ˜¯æ¡†æž¶æŠ€æœ¯ååˆ†å–œæ¬¢ä½¿ç”¨çš„æ–¹å¼ï¼Œäº†è§£åå°„åŽï¼Œä¹Ÿä¼šå¯¹ Java æœ‰æ›´åŠ æ·±åˆ»çš„è®¤è¯†ã€‚ RTTIRTTIï¼ˆRun-Time Type Identificationï¼‰ : è¿è¡Œæ—¶è¯†åˆ«å¯¹è±¡ç±»åž‹ã€‚ Java æä¾›äº†ä¸‰ç§æ–¹å¼ï¼Œ è®©æˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶è¯†åˆ«ä¸€ä¸ªå¯¹è±¡çš„ç±»åž‹ã€‚ RTTIæ–¹å¼ è¯´æ˜Ž è¡¨çŽ°å½¢å¼ ä¼ ç»Ÿçš„RTTI å‡å®šåœ¨ç¼–è¯‘æ—¶å·²çŸ¥é“äº†æ‰€æœ‰çš„ç±»åž‹ã€‚ ä¸»è¦æ˜¯ç±»åž‹è½¬æ¢ï¼Œä¾‹å¦‚ ä¸»åŠ¨å¼ºåˆ¶ç±»åž‹è½¬æ¢ å’Œ æ³›åž‹çš„è‡ªåŠ¨è½¬æ¢ ç­‰ã€‚ åå°„ åœ¨è¿è¡Œæ—¶å‘çŽ°å’Œä½¿ç”¨ç±»çš„ä¿¡æ¯ã€‚ é€šè¿‡ Classç±» å’Œ reflectåŒ… å‘çŽ°å’Œä½¿ç”¨ç±»ä¿¡æ¯ã€‚ instanceof / isInstance java å…³é”®å­—å’ŒClass æ–¹æ³•ï¼Œå¯ä»¥åˆ¤æ–­å¯¹è±¡æ˜¯ä¸æ˜¯æŸä¸ªç‰¹å®šç±»åž‹çš„å®žä¾‹ã€‚ æ¯”ç›´æŽ¥è¿›è¡Œ Class çš„ == å’Œ equal() åˆ¤æ–­æ›´å¥½ï¼Œä¿æŒäº†ç±»åž‹çš„æ¦‚å¿µï¼Œæ˜¯è€ƒè™‘ç»§æ‰¿çš„ã€‚ ä¼ ç»ŸRTTI å’Œ åå°„ çš„ çœŸæ­£åŒºåˆ« ä¼ ç»Ÿçš„ RTTI æ˜¯åœ¨ç¼–è¯‘æ—¶æ‰“å¼€å’Œæ£€æŸ¥ *.class æ–‡ä»¶çš„ï¼› åå°„æœºåˆ¶ä¸­ï¼Œç¼–è¯‘æ—¶æ— æ³•èŽ·å¾— *.class æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶æ‰æ‰“å¼€å’Œæ£€æŸ¥çš„ã€‚ è®¤è¯†åå°„JDK æä¾›äº† Classç±» å’Œ java.lang.reflectåŒ… æ¥æ”¯æŒåå°„åŠŸèƒ½ã€‚ Classç®€å•ç†è§£ Java ä¸­ä¸‡ç‰©çš†å¯¹è±¡ï¼Œç±»æœ¬èº«ä¹Ÿæ˜¯ Classç±» çš„å¯¹è±¡ã€‚é€šè¿‡ Classç±» å¯ä»¥èŽ·å–ç±»çš„ç›¸å…³ä¿¡æ¯ï¼Œä½†æœ‰ä¸ä»…é™äºŽç±»ã€‚ java ä¸­åªæœ‰ä¸¤ç§ä¸æ˜¯é¢å‘å¯¹è±¡çš„ åŸºæœ¬æ•°æ®ç±»åž‹ï¼šä¼šæœ‰å¯¹åº”çš„å°è£…ç±»ã€‚ é™æ€çš„æˆå‘˜ï¼šå±žäºŽç±»ï¼Œä¸é¢å‘å¯¹è±¡ã€‚ æ·±å…¥äº†è§£ Classç±» çš„å®žä¾‹è¡¨ç¤º Java åº”ç”¨è¿è¡Œæ—¶çš„ç±»å’ŒæŽ¥å£ã€‚ enum æ˜¯ä¸€ç§ç±»ï¼Œæ³¨è§£ æ˜¯ä¸€ç§æŽ¥å£ã€‚æ‰€æœ‰ æ•°ç»„ å±žäºŽç±»ã€‚ åŸºæœ¬ç±»åž‹ å’Œ void ä¹Ÿæœ‰ ç±»Class çš„å®žä¾‹å¯¹è±¡ã€‚ ä¸€èˆ¬ç§° Classå¯¹è±¡ ä¸ºå¯¹åº”ç±»çš„ ç±»ç±»åž‹ï¼ˆclass typeï¼‰ æˆ– å­—èŠ‚ç å¯¹è±¡ ã€‚ *.java æ–‡ä»¶ç¼–è¯‘åŽä¼šç”Ÿæˆå­—èŠ‚ç  *.class æ–‡ä»¶ï¼Œå…¶åœ¨åº”ç”¨è¿è¡Œæ—¶ï¼Œè¢«ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰ä¼šè¢« JVM åŠ¨æ€åŠ è½½ã€‚ èŽ·å–æ–¹å¼ä»»ä½•ç±»éƒ½å¯ä»¥èŽ·å– Classå®žä¾‹å¯¹è±¡ã€‚Classçš„æž„é€ æ–¹æ³•å¼ç§æœ‰çš„ï¼Œä½†æä¾›äº† ä¸‰ç§èŽ·å–æ–¹å¼ ï¼š 12345678910Foo foo1 = new Foo();// 1. é€šè¿‡ç±»èŽ·å–ã€‚ ç±»å­—é¢å¸¸é‡ï¼šå¯ä»¥çœ‹åšï¼Œä»»ä½•ä¸€ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªéšå«çš„é™æ€æˆå‘˜å˜é‡classã€‚Class c1 = Foo.class;// 2. é€šè¿‡å¯¹è±¡èŽ·å–ã€‚å·²çŸ¥è¯¥ç±»çš„å¯¹è±¡ï¼Œé€šè¿‡getClass()æ–¹æ³•ã€‚Class c2 = foo1.getClass();// 3. é€šè¿‡ç±»çš„å…¨ç§°èŽ·å–ã€‚ä¹Ÿç§°ä¹‹ä¸ºåŠ¨æ€åŠ è½½ç±» (throws ClassNotFoundException)ã€‚Class c3 = Class.forName("org.demo.reflect.Foo"); ä»»ä½•ç±»çš„ç±»ç±»åž‹åªæœ‰ä¸€ä¸ªã€‚ 12System.out.println(c1 == c2 &amp;&amp; c2 == c3);// true é€šè¿‡è¯¥å¯¹è±¡ä¹Ÿå¯ä»¥å¯¹åº”ç±»çš„å®žä¾‹å¯¹è±¡ã€‚ 12// éœ€è¦æœ‰æ— å‚æ•°çš„æž„é€ æ–¹æ³•Foo foo2 = (Foo) c1.newInstance(); èŽ·å–ç±»ä¿¡æ¯ ç±»Class çš„å®žä¾‹è¡¨ç¤º Java åº”ç”¨è¿è¡Œæ—¶çš„ç±»å’ŒæŽ¥å£ã€‚ enum æ˜¯ä¸€ç§ç±»ï¼Œæ³¨è§£ æ˜¯ä¸€ç§æŽ¥å£ã€‚æ‰€æœ‰ æ•°ç»„ å±žäºŽç±»ã€‚ åŸºæœ¬ç±»åž‹ å’Œ void ä¹Ÿæœ‰ ç±»Class çš„å®žä¾‹å¯¹è±¡ã€‚ 12345678910111213Class c1 = Integer.class; Class c2 = Collection.class;Class c3 = ElementType.class;Class c4 = Override.class;Class c5 = int[].class;Class c6 = int.class;Class c7 = void.class;// åŸºæœ¬ç±»åž‹å’Œå¯¹åº”åŒ…è£…ç±»çš„ç±»ç±»åž‹ä¸ç›¸åŒï¼Œä½†å’ŒåŒ…è£…ç±»åž‹çš„æ ‡å‡†å­—æ®µç›¸åŒã€‚System.out.println(c1 == c6);// falseSystem.out.println(c6 == Integer.TYPE);// true é€šè¿‡ ç±»ç±»åž‹ å¯ä»¥èŽ·å¾—å¯¹åº”ç±»çš„ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ç±»åï¼š 1234567System.out.println(c1.getSimpleName());// IntegerSystem.out.println(c2.getName());//java.util.CollectionSystem.out.println(c3.getName());// java.lang.annotation.ElementTypeSystem.out.println(c4.getName());// java.lang.OverrideSystem.out.println(c5.getName());// [ISystem.out.println(c6.getName());// intSystem.out.println(c7.getName());// void è¿™é‡Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„èŽ·å–ç±»ä¿¡æ¯çš„æ–¹æ³•ï¼Œ Field ã€ Method å’Œ Constructor ç­‰ä¼šåœ¨ä¹‹åŽç€é‡è¯´æ˜Žã€‚ Class å¸¸ç”¨æ–¹æ³• è¯´æ˜Ž String getName() èŽ·å–å®Œæ•´ç±»åï¼ŒåŒ…æ‹¬åŒ…åã€‚ String getSimpleName() èŽ·å–ç®€å•ç±»åï¼Œä¸åŒ…æ‹¬æŠ¥åã€‚ Field[] getDeclaredFields() èŽ·å–æ‰€æœ‰è¯¥ç±»è‡ªå·±å£°æ˜Žçš„æˆå‘˜å˜é‡ï¼Œä¸è®ºè®¿é—®æƒé™ã€‚ Method[] getDeclaredMethods() èŽ·å–æ‰€æœ‰è¯¥ç±»è‡ªå·±å£°æ˜Žçš„æ–¹æ³•ï¼Œä¸è®ºè®¿é—®æƒé™ã€‚ Constructor[] getDeclaredConstructors èŽ·å–æ‰€æœ‰è¯¥ç±»è‡ªå·±å£°æ˜Žçš„æž„é€ å‡½æ•°ï¼Œä¸è®ºè®¿é—®æƒé™ã€‚ Field : å­—æ®µFieldç±» : é€šè¿‡ Field å¯ä»¥èŽ·å–å’Œæ“ä½œå­—æ®µã€‚ 1234567891011121314public static void printFieldMessage(Object obj) &#123; Class clazz = obj.getClass(); // Fieldç±»: æˆå‘˜å˜é‡ä¹Ÿæ˜¯å¯¹è±¡ // getFields(): æ‰€æœ‰publicæˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬ç”±çˆ¶ç±»ç»§æ‰¿æ¥çš„ // getDeclaredFields: æ‰€æœ‰è¯¥ç±»è‡ªå·±å£°æ˜Žçš„æˆå‘˜å˜é‡ï¼Œä¸è®ºè®¿é—®æƒé™ Field[] fields = clazz.getDeclaredFields(); for (Field field : fields) &#123; Class fieldType = field.getType(); String fieldName = field.getName(); System.out.println(fieldType + " " + fieldName + ";"); &#125;&#125; 123456// èŽ·å–æˆå‘˜å˜é‡ä¿¡æ¯ClassUtil.printFieldMessage(1);// int MIN_VALUE;// int MAX_VALUE;// class java.lang.Class TYPE;// ... Method : æ–¹æ³•Methodç±» : é€šè¿‡ Method å¯ä»¥èŽ·å–å’Œæ“ä½œæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425public static void printClassMethodMessage(Object obj)&#123; // èŽ·å–ç±»ç±»åž‹: JNIæœ¬åœ°æ–¹æ³•èŽ·å–ï¼Œé€šè¿‡cè¯­è¨€å®žçŽ°ã€‚ Class clazz = obj.getClass(); System.out.println("ç±»çš„åç§°: " + clazz.getName()); // Methodç±»ï¼šæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªMethodå¯¹è±¡ // getMethods(): æ‰€æœ‰publicæ–¹æ³•ï¼ŒåŒ…æ‹¬ç”±çˆ¶ç±»ç»§æ‰¿æ¥çš„ // getDeclaredMethods(): æ‰€æœ‰è¯¥ç±»è‡ªå·±å£°æ˜Žçš„æ–¹æ³•ï¼Œä¸è®ºè®¿é—®æƒé™ Method[] methods = clazz.getDeclaredMethods(); for (Method method : methods) &#123; Class returnType = method.getReturnType(); String methodName = method.getName(); Class[] paramTypes = method.getParameterTypes(); String methodInfo = returnType.getName() + " " + methodName; methodInfo += "("; for (Class item : paramTypes) &#123; methodInfo += item.getName() + ","; &#125; methodInfo += ")"; System.out.println(methodInfo); &#125;&#125; 12345// èŽ·å–æ–¹æ³•ä¿¡æ¯ClassUtil.printClassMethodMessage(Class.class);//ç±»çš„åç§°: java.lang.Class//void checkPackageAccess(java.lang.ClassLoader,boolean,)//java.lang.Class forName(java.lang.String,) Constructor : æž„é€ å™¨Constructorç±» : é€šè¿‡ Constructor å¯ä»¥èŽ·å–å’Œæ“ä½œæž„é€ æ–¹æ³•ã€‚ 12345678910111213141516171819public static void printConstructMessage(Object obj)&#123; Class clazz = obj.getClass(); // Constructor æž„é€ æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•° // getFields(): æ‰€æœ‰publicæˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬ç”±çˆ¶ç±»ç»§æ‰¿æ¥çš„ // getDeclaredFields: æ‰€æœ‰è¯¥ç±»è‡ªå·±å£°æ˜Žçš„æž„é€ å‡½æ•° Constructor[] constructors = clazz.getDeclaredConstructors(); for (Constructor cs : constructors) &#123; String csName = cs.getName(); Class[] paramTypes = cs.getParameterTypes(); String csInfo = csName + "("; for (Class item : paramTypes) &#123; csInfo += item.getName() + ","; &#125; csInfo += ")"; System.out.println(csInfo); &#125;&#125; 12345// æž„é€ æ–¹æ³•ä¿¡æ¯ClassUtil.printConstructMessage("hello");// java.lang.String([B,int,int,)// java.lang.String([B,java.nio.charset.Charset,)// java.lang.String([B,java.lang.String,) ä½¿ç”¨åå°„æ–¹æ³•åå°„1234567891011121314public class Foo &#123; public void print()&#123; System.out.println("I'm Foo!"); &#125; public void print(String s1, String s2)&#123; System.out.println(s1 + " " + s2); &#125; public void print(Integer n1, Integer n2)&#123; System.out.println(n1 + " " + n2); &#125;&#125; 1234567891011Foo foo = new Foo();Class clazz = Foo.class;Method method1 = clazz.getMethod("print", String.class, String.class);method1.invoke(foo, "abc", "def");// abc defMethod method2 = clazz.getMethod("print", new Class[]&#123;Integer.class, Integer.class&#125;);method2.invoke(foo, 12, 21);// 12 21Method method3 = clazz.getDeclaredMethod("print");method3.invoke(foo);// I'm Foo! å­—æ®µåå°„åå°„å­—æ®µå¯ä»¥è®©æˆ‘ä»¬ç›´æŽ¥è®¿é—®å’Œæ“ä½œå­—æ®µï¼Œä¸‹é¢é€šè¿‡ä¸¤ä¸ªç¤ºä¾‹æ¥çœ‹ä¸€ä¸‹ã€‚ æä¾›æ¨¡æ‹Ÿæ•°æ®ï¼š å¸¸è§çš„æ•°æ®æº : xml , json ç­‰æ–‡ä»¶ã€‚ 12345Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();map.put("username", "å¼ ä¸‰");map.put("age", 10);map.put("birthdate", new Date());map.put("salary", new BigDecimal("123.321")); ç›´æŽ¥åå°„åå°„ä¼šè¿›è¡Œè®¿é—®åŸŸæ£€æŸ¥ï¼Œä¸€èˆ¬åªèƒ½è®¿é—®åˆ° public åŸŸï¼Œå¯ä»¥ä½¿ç”¨ setAccessible(true) æ¥è·³è¿‡æ£€æŸ¥ã€‚ è™½ç„¶ä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Œä½† ä¸€èˆ¬è¿˜æ˜¯ä¸æŽ¨èä½¿ç”¨è¿™ç§æ–¹å¼ ã€‚ 1234567891011121314151617Class clazz = User.class;Object obj = clazz.newInstance();Field[] fields = clazz.getDeclaredFields();for (Field field : fields) &#123; int mod = field.getModifiers(); if (Modifier.isStatic(mod) || Modifier.isFinal(mod)) &#123; continue; &#125; // æ“ä½œç§æœ‰åŸŸï¼šä¸è¿›è¡Œè®¿é—®åŸŸæ£€æŸ¥ field.setAccessible(true); field.set(obj, map.get(field.getName()));&#125;System.out.println(obj);// User&#123;username='å¼ ä¸‰', age=10, birthdate=Mon Mar 04 15:50:19 CST 2019, salary=123.321&#125; åå°„Getterå’ŒSetterè¿™é‡ŒæŽ¨èä½¿ç”¨ PropertyDescriptor ï¼Œé€šè¿‡å®ƒå¯ä»¥å‹å¥½çš„ä½¿ç”¨ Getter å’Œ Setter ã€‚ 123456789101112Class clazz = User.class;Object obj = clazz.newInstance();Field[] fields = clazz.getDeclaredFields();for (Field field : fields) &#123; PropertyDescriptor pd = new PropertyDescriptor(field.getName(), clazz); Method wm = pd.getWriteMethod(); // å†™æ–¹æ³• wm.invoke(obj, map.get(field.getName()));&#125;System.out.println(obj);// User&#123;username='å¼ ä¸‰', age=10, birthdate=Mon Mar 04 16:13:26 CST 2019, salary=123.321&#125; æž„é€ åå°„åå°„æ— å‚æž„é€ å™¨ï¼š 1234Class c1 = Foo.class;// éœ€è¦æœ‰æ— å‚æ•°çš„æž„é€ æ–¹æ³•Foo foo = (Foo) c1.newInstance(); åå°„æœ‰å‚æž„é€ å™¨ï¼š 123456Class clazz = User.class;Constructor constructor = clazz.getConstructor(new Class[]&#123;String.class, int.class&#125;);Object object = constructor.newInstance("Hello", 123);System.out.println(object);// User&#123;username='Hello', age=123, birthdate=null, salary=null&#125; å¸¸è§åº”ç”¨åŠ¨æ€ä»£ç†ä»£ç† æ˜¯ä¸€ç§åŸºç¡€çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡å®ƒå¯ä»¥æœ‰æ•ˆçš„æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½æˆ–åšä¸€äº›é¢å¤–çš„æ“ä½œã€‚ JDK æä¾›äº† java.lang.reflect.Proxy ç±»ï¼Œå…¶åˆ©ç”¨åå°„å¯ä»¥ç®€å•çš„å®ŒæˆåŠ¨æ€ä»£ç†ã€‚ é€šè¿‡ Proxy.newProxyInstance() å¯ä»¥èŽ·å¾—ä¸€ä¸ªä»£ç†å¯¹è±¡å®žä¾‹ã€‚é€šè¿‡å‚æ•°åˆ—è¡¨ç­‰ï¼Œå¯ä»¥è½»æ¾çš„çœ‹å‡ºï¼Œ JDK ä»£ç†åªèƒ½ä»£ç†æŽ¥å£æ–¹æ³•ã€‚ 1234567891011121314151617181920@Test@SuppressWarnings("unchecked")public void test() &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); Class clazz = list.getClass(); List&lt;String&gt; proxyInstance = (List&lt;String&gt;) Proxy.newProxyInstance( clazz.getClassLoader(), clazz.getInterfaces(), new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; return method.invoke(list, args); // éœ€è¦è¢«ä»£ç†çš„å¯¹è±¡ã€‚ &#125; &#125;); proxyInstance.add("abc"); System.out.println(list); // [abc]&#125; Proxy.newProxyInstance() 12345678/** * èŽ·å–ä»£ç†å¯¹è±¡å®žä¾‹ * @param loader ç±»åŠ è½½å™¨ * @param interfaces æŽ¥å£åˆ—è¡¨ * @param h è°ƒç”¨å¤„ç†å™¨ * @return ä»£ç†å¯¹è±¡å®žä¾‹ */public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h); InvocationHandler æ³¨æ„ : å› ä¸ºè¦åå°„è°ƒç”¨æ–¹æ³•ï¼Œæ‰€ä»¥ InvocationHandler ä¸€å®šéœ€è¦è¢«ä»£ç†çš„å¯¹è±¡ã€‚ 12345678910111213141516package java.lang.reflect;/** * è°ƒç”¨å¤„ç†å™¨(ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šç”±å®ƒå¤„ç†) */public interface InvocationHandler &#123; /** * ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå®žé™…ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚ * @param proxy å½“å‰ä»£ç†å®žä¾‹ã€‚ * @param method ä»£ç†çš„æ–¹æ³•ï¼Œå…¶åªä¼šæ¥è‡ªäºŽè¢«ä»£ç†å¯¹è±¡æ‰€å®žçŽ°çš„æŽ¥å£(æˆ–è¶…æŽ¥å£)ã€‚ * @param args æ–¹æ³•å…¥å‚ã€‚ * @return æ–¹æ³•è¿”å›žå€¼ï¼Œå…¶ç±»åž‹ä¸ºè¢«ä»£ç†çš„æ–¹æ³•å†³å®šä¸èƒ½æ”¹å˜ã€‚ * @throws Throwable */ public Object invoke(Object proxy, Method method, Object[] args) throws Throwable;&#125; åŠ¨æ€åŠ è½½ Class.forName(...) æ–¹æ³•åˆç§°ä¹‹ä¸º åŠ¨æ€åŠ è½½ ã€‚ é™æ€åŠ è½½ ä½œç”¨äºŽç¼–è¯‘æœŸï¼Œè€Œ åŠ¨æ€åŠ è½½ ä½œç”¨äºŽè¿è¡ŒæœŸã€‚ JVMåœ¨è¿è¡Œæ—¶æ‰ä¼šåŽ»åŠ è½½ *.class æ–‡ä»¶ï¼Œè‹¥æ‰¾ä¸åˆ°ä¼š throw ClassNotFoundException ã€‚ æˆ‘ä»¬å¸¸ä¼šçœ‹åˆ°ä½¿ç”¨å®ƒæ¥åŠ è½½æ•°æ®åº“é©±åŠ¨ã€‚ JDBCDriver éƒ½è¦æ±‚è‡ªæˆ‘æ³¨å†Œ DriverManager.registerDriver(...) ï¼Œæ‰€ä»¥åªè¦åŠ è½½å³å¯ï¼Œä¸éœ€è¦åˆå§‹åŒ–ã€‚ 1Class.forName("com.mysql.jdbc.Driver"); ç»•è¿‡ç¼–è¯‘: è®¤è¯†æ³›åž‹åå°„æ–¹æ³•ä½œç”¨äºŽè¿è¡ŒæœŸï¼Œé€šè¿‡åå°„å¯ä»¥ç»•è¿‡æ³›åž‹æ£€æŸ¥ï¼Œè¯´æ˜Žç¼–è¯‘åŽæ˜¯åŽ»æ³›åž‹åŒ–çš„ã€‚ å®žé™…ä¸Šï¼Œç¼–è¯‘ä¼šæ“¦é™¤æ³›åž‹ï¼Œè¿™äº›å®¹å™¨æŒæœ‰å¯¹è±¡æ—¶ä¼šå°†å…¶éƒ½è§†ä¸º Object å¯¹è±¡ï¼Œå–å‡ºæ—¶ä¼šè¿›è¡Œç±»åž‹è½¬æ¢ã€‚ 123456789101112131415161718192021222324252627@Testpublic void test() throws NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123; List list1 = new ArrayList(); List&lt;String&gt; list2 = new ArrayList&lt;&gt;(); List&lt;Integer&gt; list3 = new ArrayList&lt;&gt;(); list1.add(1d); list2.add("abc"); list3.add(1000); Class c1 = list1.getClass(); Class c2 = list2.getClass(); Class c3 = list3.getClass(); // æ³›åž‹ä¸ä¼šå½±å“ç±»ç±»åž‹ System.out.println(c1 == c2 &amp;&amp; c2 == c3);//true Method method = c2.getMethod("add", Object.class); // åå°„æ–¹æ³•ä½œç”¨äºŽè¿è¡ŒæœŸï¼Œé€šè¿‡åå°„å¯ä»¥ç»•è¿‡æ³›åž‹æ£€æŸ¥ï¼Œè¯´æ˜Žç¼–è¯‘åŽæ˜¯åŽ»æ³›åž‹åŒ–çš„ã€‚ method.invoke(list2, 100); method.invoke(list3, "def"); System.out.println(list1);// [1.0] System.out.println(list2);// [abc, 100] System.out.println(list3);// [1000, def]&#125;]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>RTTI</tag>
        <tag>åå°„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆJDK8æ–°ç‰¹æ€§]]></title>
    <url>%2F2019%2F02%2F22%2F%E6%B5%85%E8%B0%88JDK8%E6%96%B0%E7%89%B9%E6%80%A7%2F</url>
    <content type="text"><![CDATA[Java8ï¼ˆåˆç§°ä¸º JDK8ï¼‰æ˜¯ Java è¯­è¨€å¼€å‘çš„ä¸€ä¸ªé‡è¦ç‰ˆæœ¬ï¼ŒäºŽ2014å¹´å‘å¸ƒã€‚ JDK8 å¯ä»¥è¯´æ˜¯é‡Œç¨‹ç¢‘å¼çš„ç‰ˆæœ¬ï¼Œæä¾›äº†å¾ˆå¤šçš„æ–°åŠŸèƒ½ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œæ–°çš„ JavaScript å¼•æ“Žï¼Œæ–°çš„æ—¥æœŸ APIï¼Œæ–°çš„Stream API ç­‰ã€‚ æœ¬æ–‡ä»…æ¶‰åŠç¼–ç¨‹å¼€å‘ä¸­å¸¸ç”¨çš„ç‰¹æ€§ ã€‚ å®˜ç½‘ï¼šJDK8æ–°åŠŸèƒ½ å‡½æ•°å¼ç¼–ç¨‹JDK8 æä¾›äº†å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒï¼Œä¸å†æ˜¯å•çº¯çš„é¢å¯¹å¯¹è±¡ã€‚ å‡½æ•°ç¼–ç¨‹è¯­è¨€ æœ€é‡è¦çš„åŸºç¡€æ˜¯Î»æ¼”ç®—ï¼ˆlambda calculusï¼‰ã€‚è€Œä¸”Î»æ¼”ç®—çš„å‡½æ•°å¯ä»¥æŽ¥å—å‡½æ•°å½“ä½œè¾“å…¥å’Œè¾“å‡ºã€‚ JDK8 æä¾›äº†ä¸€äº›ç‰¹æ€§æ¥æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼šLambdaè¡¨è¾¾å¼ , å‡½æ•°å¼æŽ¥å£ , æ–¹æ³•å¼•ç”¨ ç­‰ã€‚ è¿™ä¸‰è€…å…·æœ‰ç´§å¯†è”ç³»ï¼Œéœ€è¦ç»“åˆç†è§£ã€‚ é»˜è®¤æ–¹æ³• å’Œ stream API åŠ å¢žå¼ºAPI ç­‰åˆ™å¦è¡Œè¯´æ˜Žã€‚ å‡½æ•°å¼æŽ¥å£ å°±æ˜¯åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ã€‚ Lambdaè¡¨è¾¾å¼ åªèƒ½ä½œç”¨äºŽ å‡½æ•°å¼æŽ¥å£ ã€‚ è‹¥ Lambda è¡¨è¾¾å¼ è¡¨ç¤ºçš„é€»è¾‘å·²ç»è¢«æŠ½å–ä¸ºæ–¹æ³•ï¼Œ æ–¹æ³•å¼•ç”¨ å¯ä»¥æ›¿æ¢ Lambdaè¡¨è¾¾å¼ ï¼Œç®€åŒ–ä»£ç ã€‚ Lambda è¡¨è¾¾å¼Lambda Expressions : å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰ã€‚ Lambdaè¡¨è¾¾å¼ ä¸»è¦ç”¨æ¥å®šä¹‰è¡Œå†…æ‰§è¡Œçš„ å‡½æ•°å¼æŽ¥å£ï¼ˆåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ï¼‰ã€‚ lambdaè¡¨è¾¾å¼ åˆåï¼šé—­åŒ… ã€ åŒ¿åæ–¹æ³• ã€‚ è¯­æ³•æ ¼å¼1234// æ ¼å¼ä¸€(parameters) -&gt; expression // æ ¼å¼äºŒ(parameters) -&gt;&#123; statements; &#125; è¯­æ³•ç‰¹å¾: å¯é€‰çš„å‚æ•°ç±»åž‹å£°æ˜Žï¼šä¸éœ€è¦å£°æ˜Žå‚æ•°ç±»åž‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼ã€‚ å¯é€‰çš„å‚æ•°åœ†æ‹¬å·ï¼šä¸€ä¸ªå‚æ•°æ— éœ€å®šä¹‰åœ†æ‹¬å·ï¼Œä½†æ²¡æœ‰å‚æ•°æˆ–å¤šä¸ªå‚æ•°éœ€è¦å®šä¹‰åœ†æ‹¬å·ã€‚ å¯é€‰çš„å‚æ•°å¤§æ‹¬å·ï¼šå¦‚æžœä¸»ä½“åŒ…å«äº†ä¸€ä¸ªè¯­å¥ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚ å¯é€‰çš„è¿”å›žå…³é”®å­—ï¼šå¦‚æžœä¸»ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›žå€¼åˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿”å›žå€¼ï¼Œå¤§æ‹¬å·éœ€è¦æŒ‡å®šæ˜Žè¡¨è¾¾å¼è¿”å›žäº†ä¸€ä¸ªæ•°å€¼ã€‚ åŸºæœ¬è¯­æ³•ç‰¹å¾ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738package org.demo.jdk8.lambda;import org.junit.Test;public class LambdaTest &#123; /** * å¸¦è¿”å›žå€¼çš„lambdaè¡¨è¾¾å¼ï¼šå››åˆ™è¿ç®— */ @Test public void test1()&#123; LambdaTest tester = new LambdaTest(); // ç±»åž‹å£°æ˜Ž MathOperation addition = (int a, int b) -&gt; a + b; // ä¸ç”¨ç±»åž‹å£°æ˜Ž MathOperation subtraction = (a, b) -&gt; a - b; // å¤§æ‹¬å·ä¸­çš„è¿”å›žè¯­å¥ MathOperation multiplication = (int a, int b) -&gt; &#123; return a * b; &#125;; // æ²¡æœ‰å¤§æ‹¬å·åŠè¿”å›žè¯­å¥ MathOperation division = (int a, int b) -&gt; a / b; System.out.println("10 + 5 = " + tester.operate(10, 5, addition)); System.out.println("10 - 5 = " + tester.operate(10, 5, subtraction)); System.out.println("10 x 5 = " + tester.operate(10, 5, multiplication)); System.out.println("10 / 5 = " + tester.operate(10, 5, division)); &#125; interface MathOperation &#123; int operation(int a, int b); &#125; private int operate(int a, int b, MathOperation mathOperation)&#123; return mathOperation.operation(a, b); &#125;&#125; å˜é‡ä½œç”¨åŸŸ123public interface Converter&lt;T1, T2&gt; &#123; void convert(int i);&#125; Lambdaè¡¨è¾¾å¼ çš„å±€éƒ¨å˜é‡å…·æœ‰éšæ€§çš„ final çš„è¯­ä¹‰ã€‚ å¯ä»¥ä¸ç”¨å£°æ˜Žä¸º finalï¼Œä½†æ˜¯å¿…é¡»ä¸å¯è¢«åŽé¢çš„ä»£ç ä¿®æ”¹ã€‚ 123456int num = 1;Converter&lt;Integer, String&gt; s = (param) -&gt; System.out.println(String.valueOf(param + num));s.convert(2);// ERROR : Local variable num defined in an enclosing scope must be final or effectively finalnum = 5; åœ¨ Lambdaè¡¨è¾¾å¼ å½“ä¸­ä¸å…è®¸å£°æ˜Žä¸€ä¸ªä¸Žå±€éƒ¨å˜é‡åŒåçš„å‚æ•°æˆ–è€…å±€éƒ¨å˜é‡ã€‚ 1234String first = "";// ERROR : Variable 'first' is already defined in the scopeComparator&lt;String&gt; comparator = (first, second) -&gt; Integer.compare(first.length(), second.length()); æ–¹æ³•å¼•ç”¨Method references : é€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•ã€‚å¯ä»¥ç†è§£ä¸ºLambdaè¡¨è¾¾å¼çš„ç¼©å†™ã€‚ ç”¨é€” : å½“è¦ä¼ é€’ç»™Lambdaä½“å†…çš„æ“ä½œï¼Œå·²ç»æœ‰å®žçŽ°çš„æ–¹æ³•äº†ï¼Œå°±ç›´æŽ¥å¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ã€‚ æŽ¨èä¼˜å…ˆä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼Œæ›¿ä»£ lambda è¡¨è¾¾å¼ ï¼Œè¿™æ ·ä»£ç ä¼šæ›´åŠ ç®€æ´æ¸…æ™°ã€‚ è¯­æ³•æ ¼å¼ æ•°ç»„ä¹Ÿå¯ä»¥ä½¿ç”¨æž„é€ å™¨æ–¹æ³•å¼•ç”¨ï¼Œä¾‹å¦‚ : int[3]::new ã€‚ å¼•ç”¨ç±»åž‹ è¯­æ³•æ ¼å¼ æž„é€ å™¨æ–¹æ³•å¼•ç”¨ï¼ˆè°ƒç”¨é»˜è®¤æž„é€ å™¨ï¼‰ Class::new ç±»é™æ€æ–¹æ³•å¼•ç”¨ Class::static_method ç±»æ™®é€šæ–¹æ³•å¼•ç”¨ï¼ˆè¢«è°ƒç”¨æ–¹æ³•ä¸èƒ½å…·æœ‰å‚æ•°ï¼‰ Class::method å®žä¾‹æ–¹æ³•å¼•ç”¨ instance::method æ–¹æ³•å¼•ç”¨çš„è¯­æ³•æ ¼å¼ç¤ºä¾‹ï¼š 1234567891011121314151617181920@Testpublic void test()&#123; // 1. æž„é€ å™¨æ–¹æ³•å¼•ç”¨(è°ƒç”¨é»˜è®¤æž„é€ å™¨) : Class::newï¼Œæˆ–è€…æ›´ä¸€èˆ¬çš„Class&lt; T &gt;::new Car car1 = Car.create( Car::new ); Car car2 = Car.create( Car::new ); Car car3 = Car.create( Car::new ); List&lt; Car &gt; cars = Arrays.asList( car1, car2, car3 ); // 2. ç±»é™æ€æ–¹æ³•å¼•ç”¨ : Class::static_method cars.forEach( Car::collide ); // 3. ç±»æ™®é€šæ–¹æ³•å¼•ç”¨(è¢«è°ƒç”¨æ–¹æ³•ä¸èƒ½å…·æœ‰å‚æ•°) : Class::method cars.forEach( Car::repair ); // 4. å®žä¾‹æ–¹æ³•å¼•ç”¨ : instance::method Car police = Car.create( Car::new ); cars.forEach( police::follow );&#125; 12345678910111213141516171819202122class Car &#123; /** åˆ›é€  **/ public static Car create(Supplier&lt;Car&gt; supplier) &#123; return supplier.get(); &#125; /** ç¢°æ’ž **/ public static void collide(Car car) &#123; System.out.println("Collided " + car.toString()); &#125; /** è·Ÿéš **/ public void follow( Car another) &#123; System.out.println(this.toString() + " Following the " + another.toString()); &#125; /** ä¿®ç† **/ public void repair() &#123; System.out.println("Repaired " + this.toString()); &#125;&#125; å‡½æ•°å¼æŽ¥å£functional interfaces : ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ï¼Œå¯ä»¥æœ‰å¤šä¸ªéžæŠ½è±¡æ–¹æ³•ã€‚ å‡½æ•°å¼æŽ¥å£å¯ä»¥åŒ…å«Objectçš„publicæ–¹æ³•ï¼ˆå³ä½¿å®ƒä»¬æ˜¯æŠ½è±¡æ–¹æ³•ï¼‰ï¼Œå› ä¸ºä»»ä½•ä¸€ä¸ªå‡½æ•°å¼æŽ¥å£çš„å®žçŽ°ï¼Œé»˜è®¤éƒ½ç»§æ‰¿äº† Object ç±»ï¼ŒåŒ…å«äº†æ¥è‡ª java.lang.Object é‡Œå¯¹è¿™äº›æŠ½è±¡æ–¹æ³•çš„å®žçŽ°ã€‚ JDK8 å¼•å…¥äº†æ–°æ³¨è§£ @FunctionalInterface ï¼Œç”¨äºŽå‡½æ•°å¼æŽ¥å£çš„ç¼–è¯‘çº§é”™è¯¯æ£€æŸ¥ï¼ˆéžå¿…é¡»ï¼‰ã€‚ ç”¨é€” : å‡½æ•°å¼æŽ¥å£å¯ä»¥è¢«éšå¼è½¬æ¢ä¸º lambdaè¡¨è¾¾å¼ ï¼Œä¸Ž lambda é…åˆä½¿ç”¨ã€‚ å¸¸ç”¨å‡½æ•°å¼æŽ¥å£ä½¿ç”¨ lambdaè¡¨è¾¾å¼ å°±éœ€è¦å‡½æ•°å¼æŽ¥å£ï¼Œé™¤äº†çŽ°æœ‰çš„å‡½æ•°å¼æŽ¥å£ï¼ŒJDK8è¿˜æä¾›äº† java.util.functionåŒ… ï¼Œå…¶åŒ…å«ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å¼æŽ¥å£ã€‚ å¸¸ç”¨æŽ¥å£ è¯´æ˜Ž Function&lt;T,R&gt; æŽ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•° T ï¼Œè¿”å›žä¸€ä¸ªç»“æžœ R ã€‚ Supplier&lt;T&gt; æ— å‚æ•°ï¼Œè¿”å›žä¸€ä¸ªç»“æžœ T ã€‚ Consumer&lt;T&gt; æŽ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•° T ï¼Œæ— è¿”å›žç»“æžœã€‚ è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°å¼æŽ¥å£ä¸Žä½¿ç”¨ç¤ºä¾‹ï¼š 1234567891011121314151617/** * è‡ªå®šä¹‰ç±»Functionå‡½æ•°å¼æŽ¥å£ * æ•°ç»„æž„é€ å¼•ç”¨ */@Testpublic void test()&#123; FunctionInterfaceDemo&lt;Integer, int[]&gt; fid1 = (i) -&gt; new int[i]; int[] arr1 = fid1.get(5); System.out.println(arr1 + ":" + arr1.length); // æ•°ç»„æž„é€ å¼•ç”¨ FunctionInterfaceDemo&lt;Integer, int[]&gt; fid2 = int[]::new; int[] arr2 = fid2.get(5); System.out.println(arr2 + ":" + arr2.length);&#125; 1234567891011121314/** * å‡½æ•°å¼æŽ¥å£ç¤ºä¾‹ * è¯¥æŽ¥å£ç±»ä¼¼ï¼šFunction * @FunctionalInterface jdk8 æ–°å¢žï¼Œç”¨äºŽå‡½æ•°å¼æŽ¥å£çš„ç¼–è¯‘çº§é”™è¯¯æ£€æŸ¥ï¼ˆéžå¿…é¡»ï¼‰ã€‚ */@FunctionalInterfacepublic interface FunctionInterfaceDemo&lt;T, R&gt; &#123; R get(T t); /** å‡½æ•°å¼æŽ¥å£ï¼Œä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒObjectçš„publicæ–¹æ³•é™¤å¤–ã€‚ **/ boolean equals(Object obj);&#125; é»˜è®¤æ–¹æ³•Default methods : å…è®¸å°†æ–°åŠŸèƒ½æ·»åŠ åˆ°åº“çš„æŽ¥å£ï¼Œå¹¶ç¡®ä¿ä¸Žä¸ºè¿™äº›æŽ¥å£çš„æ—§ç‰ˆæœ¬ç¼–å†™çš„ä»£ç çš„äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ ç®€å•çš„è¯´ï¼Œé»˜è®¤æ–¹æ³•å°±æ˜¯æŽ¥å£å¯ä»¥æœ‰å®žçŽ°æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦å®žçŽ°ç±»åŽ»å®žçŽ°å…¶æ–¹æ³•ã€‚(ðŸ¤£æŽ¥å£å’ŒæŠ½è±¡ç±»éƒ½å¯ä»¥æœ‰å®žçŽ°æ–¹æ³•äº†) ç”¨é€” : è§£å†³æŽ¥å£çš„ä¿®æ”¹ä¸ŽçŽ°æœ‰çš„å®žçŽ°ä¸å…¼å®¹çš„é—®é¢˜ã€‚ JDK8 ä»¥å‰ï¼ŒæŽ¥å£æ˜¯ä¸ªåŒåˆƒå‰‘ï¼Œ å¥½å¤„æ˜¯é¢å‘æŠ½è±¡è€Œä¸æ˜¯é¢å‘å…·ä½“ç¼–ç¨‹ï¼Œ ç¼ºé™·æ˜¯å½“éœ€è¦ä¿®æ”¹æŽ¥å£æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å…¨éƒ¨å®žçŽ°è¯¥æŽ¥å£çš„ç±»ã€‚ 123456789101112131415161718/** è½¦ **/public interface Vehicle &#123; /** * åœ¨æŽ¥å£ä¸­ä½¿ç”¨ default å°±å¯ä»¥æ·»åŠ å®žçŽ°æ–¹æ³•äº† */ default void print()&#123; System.out.println("æˆ‘æ˜¯ä¸€è¾†è½¦!"); &#125; /** * jdk8åŽï¼Œå¯ä»¥åœ¨æŽ¥å£ä¸­æ·»åŠ é™æ€çš„å®žçŽ°æ–¹æ³•ï¼ˆé™æ€é»˜è®¤æ–¹æ³•ï¼ŒðŸ¤£ä¸èƒ½ç”¨defaultä¿®é¥°ï¼‰ */ static void blowHorn()&#123; System.out.println("æŒ‰å–‡å­!!!"); &#125;&#125; 12345678/** å››è½®è½¦ */public interface FourWheeler &#123; default void print()&#123; System.out.println("æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!"); &#125;&#125; 1234567891011public class Car implements Vehicle, FourWheeler &#123; public void print()&#123; // ä½¿ç”¨ super æ¥è°ƒç”¨æŒ‡å®šæŽ¥å£çš„é»˜è®¤æ–¹æ³•ï¼š Vehicle.super.print(); FourWheeler.super.print(); Vehicle.blowHorn(); &#125;&#125; forEach è§£æžforEach æ˜¯ç»å…¸çš„é»˜è®¤æ–¹æ³•ï¼Œæ˜¯ jdk8 é›†åˆæ¡†æž¶å¯ä½¿ç”¨çš„éåŽ†æ–¹æ³•ï¼ˆå®žçŽ°äºŽIterableæŽ¥å£ï¼‰ã€‚ 12345678910@Testpublic void test() &#123; List names = new ArrayList(); names.add("Google"); names.add("Runoob"); names.forEach(System.out::println); // names.forEach(item -&gt; System.out.println(item)); // ç­‰åŒäºŽä»¥ä¸Šçš„å‡½æ•°å¼•ç”¨&#125; JDK8 åœ¨ IterableæŽ¥å£ ä¸­æ–°å¢žäº†é»˜è®¤æ–¹æ³• forEach ã€‚ å…¶ä¼šéåŽ†é›†åˆï¼Œå¹¶è°ƒç”¨ ConsumeræŽ¥å£ çš„ acceptæ–¹æ³• ã€‚ 123456default void forEach(Consumer&lt;? super T&gt; action) &#123; Objects.requireNonNull(action); for (T t : this) &#123; action.accept(t); &#125;&#125; ConsumeræŽ¥å£ æ˜¯ jdk8æ–°å¢žçš„ å‡½æ•°å¼æŽ¥å£ ã€‚ å…¶æä¾›çš„æŽ¥å£æ–¹æ³•æ˜¯ï¼šä¸€ä¸ªå…¥å‚ï¼Œæ²¡æœ‰å‡ºå‚ã€‚ 123456package java.util.function;@FunctionalInterfacepublic interface Consumer&lt;T&gt; &#123; void accept(T t);&#125; è¿™é‡Œ System.out::println å’Œ ConsumeræŽ¥å£ æœ‰ç›¸åŒçš„å‡ºå…¥å‚ã€‚ æ•…ï¼Œè¿™é‡Œé›†åˆä¼šéåŽ†æ‰§è¡Œ ç›¸åº”é€»è¾‘ï¼Œå³éåŽ†æ‰“å°ã€‚ 1names.forEach(System.out::println); Stream APIStream(æµ) : ä¸€ä¸ªæ¥è‡ªæ•°æ®æºçš„å…ƒç´ é˜Ÿåˆ—å¹¶æ”¯æŒèšåˆæ“ä½œã€‚ å…ƒç´  : ç‰¹å®šç±»åž‹çš„å¯¹è±¡ï¼Œå½¢æˆä¸€ä¸ªé˜Ÿåˆ—ã€‚ Javaä¸­çš„Streamå¹¶ä¸ä¼šå­˜å‚¨å…ƒç´ ï¼Œè€Œæ˜¯æŒ‰éœ€è®¡ç®—ã€‚ æ•°æ®æº : æµçš„æ¥æºã€‚ å¯ä»¥æ˜¯é›†åˆï¼Œæ•°ç»„ï¼ŒI/O channelï¼Œ äº§ç”Ÿå™¨generator ç­‰ã€‚ èšåˆæ“ä½œ : ç±»ä¼¼SQLè¯­å¥ä¸€æ ·çš„æ“ä½œï¼Œ æ¯”å¦‚filter, map, reduce, find, match, sortedç­‰ã€‚å’Œä»¥å‰çš„Collectionæ“ä½œä¸åŒï¼Œ Streamæ“ä½œè¿˜æœ‰ä¸¤ä¸ªåŸºç¡€çš„ç‰¹å¾ï¼š Pipelining : ä¸­é—´æ“ä½œéƒ½ä¼šè¿”å›žæµå¯¹è±¡æœ¬èº«ã€‚ è¿™æ ·å¤šä¸ªæ“ä½œå¯ä»¥ä¸²è”æˆä¸€ä¸ªç®¡é“ï¼Œ å¦‚åŒæµå¼é£Žæ ¼ï¼ˆfluent styleï¼‰ã€‚è¿™æ ·åšå¯ä»¥å¯¹æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼Œ æ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œ(laziness)å’ŒçŸ­è·¯( short-circuiting)ã€‚ å†…éƒ¨è¿­ä»£ ï¼š ä»¥å‰å¯¹é›†åˆéåŽ†éƒ½æ˜¯é€šè¿‡ Iterator æˆ–è€… For-Each çš„æ–¹å¼, æ˜¾å¼çš„åœ¨é›†åˆå¤–éƒ¨è¿›è¡Œè¿­ä»£ï¼Œ è¿™å«åšå¤–éƒ¨è¿­ä»£ã€‚Streamæä¾›äº†å†…éƒ¨è¿­ä»£çš„æ–¹å¼ï¼Œ é€šè¿‡è®¿é—®è€…æ¨¡å¼(Visitor)å®žçŽ°ã€‚ å¾—ç›ŠäºŽ é»˜è®¤æ–¹æ³• ï¼Œ Streamæ–¹æ³• è¢«æ•´åˆåˆ°äº† CollectionæŽ¥å£ ä¸­ã€‚çŽ°åœ¨å¯ä»¥ä½¿ç”¨ç±»ä¼¼ SQL æ–¹å¼æ“ä½œå…ƒç´ é›†åˆï¼Œååˆ†é«˜æ•ˆç®€æ´ã€‚ Streamæ“ä½œ çš„ä¸€èˆ¬æµç¨‹ : è½¬æ¢ä¸ºStream -&gt; ä¸­é—´æ“ä½œ -&gt; æœ€ç»ˆæ“ä½œ ã€‚ 123456789List&lt;String&gt; strings = Arrays.asList("abc", "", "bc", "efg", "abc", "", "jkl");List&lt;String&gt; filtered = strings.stream() .filter(string -&gt; !string.isEmpty()) .distinct() .collect(Collectors.toList());System.out.println(filtered);// [abc, bc, efg, jkl] Streamç§ç±»JDK8 ä¸­ï¼Œé›†åˆæŽ¥å£æä¾›äº†ä¸¤ç§æ–¹æ³•ç”Ÿæˆæµã€‚ æ¶‰åŠæ–¹æ³• è¯´æ˜Ž stream() ä¸ºé›†åˆåˆ›å»ºä¸²è¡Œæµã€‚ parallelStream() ä¸ºé›†åˆåˆ›å»ºå¹¶è¡Œæµï¼Œç›¸å½“äºŽå¤šçº¿ç¨‹æ“ä½œã€‚ ä¸­é—´æ“ä½œ æ¶‰åŠ è¯´æ˜Ž ç¤ºä¾‹ filter(..) ç­›é€‰å‡ºå…ƒç´ ã€‚ .filter(String::isEmpty) ä¸ºç­›é€‰å‡ºæ‰€æœ‰ç©ºå­—ç¬¦ä¸²ã€‚ map(..) æ˜ å°„æ¯ä¸ªå…ƒç´ åˆ°å¯¹åº”çš„ç»“æžœã€‚ .map(i -&gt; i * i) ä¸ºèŽ·å–èŽ·å–å¯¹åº”çš„å¹³æ–¹æ•°ã€‚ sorted() / sorted(..) æŽ’åºï¼ˆå‡åºï¼‰ï¼Œé€šè¿‡ ComparableæŽ¥å£ åˆ¤æ–­ã€‚ .sorted(Comparator.reverseOrder()) ä¸ºé™åºï¼Œå¯ä¼ å…¥ lambdaè¡¨è¾¾å¼ã€‚ distinct() é€šè¿‡ equalsæ–¹æ³• åˆ¤æ–­ã€‚ - count() ç»Ÿè®¡ä¸ªæ•°ã€‚ - collect(..) æ”¶é›†å½’çº¦ã€‚ä¸€èˆ¬ä¸ºæœ€ç»ˆæ“ä½œï¼Œé…åˆ Collectors ä½¿ç”¨ã€‚ .collect(Collectors.toList()) ä¸ºæ”¶é›†åˆ—è¡¨ reduce(..) èšåˆå½’çº¦ã€‚ä¸€èˆ¬ä¸ºæœ€ç»ˆæ“ä½œï¼Œå¯ä»¥å®žçŽ°å¸¸è§çš„è®¡ç®—ã€‚ .reduce(BigDecimal.ZERO, BigDecimal::add) ä¸ºç´¯åŠ æ±‚å’Œã€‚ æœ€ç»ˆæ“ä½œå¸¸è§çš„ æœ€ç»ˆæ“ä½œ æ˜¯ å½’çº¦æ“ä½œ ï¼Œå³è½¬æ¢ç±»åž‹ã€‚ æ¶‰åŠ è¯´æ˜Ž ç¤ºä¾‹ toArray() / toArray(..) è½¬æ¢ä¸ºæ•°ç»„ã€‚ .toArray(String[]::new) 12345678910111213141516@Testpublic void test()&#123; // æ±‚æœ€å¤§å€¼ 3 List&lt;Integer&gt; list = Arrays.asList(1, 2, 3); Integer maxValue = list.stream().collect(Collectors.collectingAndThen(Collectors.maxBy((a, b) -&gt; a - b), Optional::get)); // æ±‚æœ€å°å€¼ 1 Integer minValue = list.stream().collect(Collectors.collectingAndThen(Collectors.minBy((a, b) -&gt; a - b), Optional::get)); // æ±‚å’Œ 6 Integer sumValue = list.stream().collect(Collectors.summingInt(item -&gt; item)); // æ±‚å¹³å‡å€¼ 2.0 Double avg = list.stream().collect(Collectors.averagingDouble(x -&gt; x));&#125; CollectorsCollectors ç±»å®žçŽ°äº†å¾ˆå¤šæ”¶é›†å½’çº¦æ“ä½œï¼Œä¾‹å¦‚å°†æµè½¬æ¢æˆé›†åˆå’Œèšåˆå…ƒç´ ã€‚ æ¶‰åŠ è¯´æ˜Ž ç¤ºä¾‹ toList() / toSet() / toMap() / toCollection(..) è½¬æ¢æˆé›†åˆã€‚ Collectors.toCollection(HashSet::new) joining(..) è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚ Collectors.joining(&quot;, &quot;) / Collectors.joining(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;) groupingBy(..) åˆ†ç»„ï¼Œæ ¹æ®å‡½æ•°å¼æŽ¥å£çš„è¿”å›žå€¼åˆ†ç»„ã€‚ Collectors.groupingBy(item -&gt; item.getAge() &gt;= 18) ç±»SQLæ“ä½œåˆ©äºŽ Stream å¯ä»¥åœ¨ Java ä¸­å®Œæˆä¸€äº›ç±»ä¼¼çš„ SQL æ“ä½œã€‚ è®¡ç®— 1234567891011121314151617181920212223242526272829303132333435@Testpublic void test() &#123; List&lt;BigDecimal&gt; list = Arrays.asList(null, new BigDecimal("2.13"), new BigDecimal("1.1"), new BigDecimal("3.141")); // åŽ» null list = list.stream().filter(Objects::nonNull).collect(Collectors.toList()); // æ±‚æœ€å¤§å€¼ // BigDecimal maxValue = list.stream().collect(Collectors.collectingAndThen(Collectors.maxBy((a, b) -&gt; a.compareTo(b)), Optional::get)); BigDecimal maxValue = list.stream().reduce(BigDecimal.ZERO, BigDecimal::max); System.out.println("æœ€å¤§å€¼: " + maxValue); // æ±‚æœ€å°å€¼ // BigDecimal minValue = list.stream().collect(Collectors.collectingAndThen(Collectors.minBy(BigDecimal::compareTo), Optional::get)); BigDecimal minValue = list.stream().reduce(BigDecimal.ZERO, BigDecimal::min); System.out.println("æœ€å°å€¼: " + minValue); // æ±‚å’Œï¼ˆå…¶ä»–è¿ç®—ç±»ä¼¼ï¼‰ BigDecimal sumValue = list.stream().reduce(BigDecimal.ZERO, BigDecimal::add); System.out.println("å’Œ: " + sumValue); // æ±‚å¹³å‡å€¼ ï¼ˆå››èˆäº”å…¥ï¼Œä¿ç•™å°æ•°ä½ï¼‰ BigDecimal avg = list.stream().reduce(BigDecimal.ZERO, BigDecimal::add) .divide(BigDecimal.valueOf(list.size()), 6, RoundingMode.HALF_UP); System.out.println("å¹³å‡å€¼: " + avg); // å‡åº List&lt;BigDecimal&gt; sortList = list.stream().sorted().collect(Collectors.toList()); System.out.println("ASC: " + sortList); // é™åº List&lt;BigDecimal&gt; revList = list.stream().sorted(Comparator.reverseOrder()).collect(Collectors.toList()); System.out.println("DESC: " + revList);&#125; åˆ†ç»„ 1234567891011121314@Testpublic void test() &#123; List&lt;User&gt; userList = Arrays.asList(new User("å¼ ä¸‰", 18), new User("æŽå››", 32), new User("çŽ‹äºŒ", 16), new User("æŽäº”", 26), new User("çŽ‹ä¸‰", 17)); // åˆ†ç»„ : æ ¹æ®å§“æ° Map&lt;String, List&lt;User&gt;&gt; map1 = userList.stream().collect(Collectors.groupingBy(item -&gt; item.getUsername().substring(0, 1))); System.out.println(map1); // åˆ†ç»„ : æ ¹æ®æ˜¯å¦æˆå¹´ Map&lt;Boolean, List&lt;User&gt;&gt; map2 = userList.stream().collect(Collectors.groupingBy(item -&gt; item.getAge() &gt; 18)); System.out.println(map2);&#125; ç»Ÿè®¡åˆ†æž : SummaryStatistics123456789101112131415161718/** * ç»Ÿè®¡ * å®ƒä»¬ä¸»è¦ç”¨äºŽintã€doubleã€longç­‰åŸºæœ¬ç±»åž‹ä¸Šï¼Œ * å®ƒä»¬å¯ä»¥ç”¨æ¥äº§ç”Ÿç±»ä¼¼å¦‚ä¸‹çš„ç»Ÿè®¡ç»“æžœã€‚ * å¦å¤–ï¼Œä¸€äº›äº§ç”Ÿç»Ÿè®¡ç»“æžœçš„æ”¶é›†å™¨ä¹Ÿéžå¸¸æœ‰ç”¨ã€‚*/@Testpublic void test() &#123; List&lt;Integer&gt; numbers = Arrays.asList(3, 2, 2, 3, 7, 3, 5); IntSummaryStatistics stats = numbers.stream().mapToInt((x) -&gt; x).summaryStatistics(); System.out.println("åˆ—è¡¨ä¸­æœ€å¤§çš„æ•° : " + stats.getMax()); System.out.println("åˆ—è¡¨ä¸­æœ€å°çš„æ•° : " + stats.getMin()); System.out.println("æ‰€æœ‰æ•°ä¹‹å’Œ : " + stats.getSum()); System.out.println("å¹³å‡æ•° : " + stats.getAverage());&#125; Date-Time APIJDK8 æä¾›äº† java.timeåŒ… æ¥å®Œå–„å¯¹æ—¥æœŸå’Œæ—¶é—´çš„å¤„ç†ï¼Œéµå¾ª JSR310 è§„èŒƒï¼Œ å…¶æ˜¯å»ºç«‹åœ¨ Joda-Time åŸºç¡€ä¸Šçš„ã€‚ JDK8 ä¹‹å‰ï¼Œå¯¹äºŽå¤„ç†æ—¥æœŸæ—¶é—´ API ç›¸å¯¹ç³Ÿç³•ï¼Œé¡¹ç›®å¼€å‘å¾€å¾€é‡åº¦ä¾èµ–ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œå¦‚ Joda-Time ã€‚ æ–°çš„ APIå¯ä»¥å‡è½»å·¥å…·ç±»å¯¹ç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ï¼Œä½†ä¸èƒ½æ›¿æ¢æ—§çš„ API ã€‚ JDK8ä¹‹å‰çš„æ—¥æœŸå’Œæ—¶é—´å¤„ç† : java.util.Date : æ‰¿è½½æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ã€‚ java.util.Calendar : å¯¹æ—¥æœŸå’Œæ—¶é—´è¿›è¡Œæ“ä½œã€‚ java.text.DateFormat : æ ¼å¼åŒ–å’Œåˆ†æžæ—¥æœŸå’Œæ—¶é—´å­—ç¬¦ä¸²ã€‚ ä¸‹æ–‡çš†ä»¥æœ€å¸¸è§çš„ SimpleDateFormat ä¸ºä¾‹è¯´æ˜Žã€‚ æ§½ç‚¹æœ€å¤šçš„ Java API : Date , Calendar , SimpleDateFormat æ‰€æœ‰å±žæ€§éƒ½æ˜¯å¯å˜çš„ã€‚ 1) çº¿ç¨‹ä¸å®‰å…¨ , 2) é‡å¤è®¡ç®—æ—¶ä¸èƒ½å¤ç”¨ï¼Œåªèƒ½æ–°å»ºå¯¹è±¡ã€‚ Date , Calendar æ“ä½œä¸äººæ€§åŒ–ï¼Œè€Œä¸” Calendar API æ˜¯ IBM æçš„ï¼Œæ‰€ä»¥è®¾è®¡ä¸ä¸€è‡´ã€‚ 1) æœˆä»½éƒ½æ˜¯ä»Ž 0 å¼€å§‹ã€‚2) Date å¹´æ˜¯ä»Ž 1900 å¼€å§‹çš„ã€‚ 123456LocalDate nowDate = LocalDate.now();System.out.println(nowDate); // 2019-05-14System.out.println(nowDate.getYear() + "-" + nowDate.getMonthValue() + "-" + nowDate.getDayOfMonth()); // 2019-5-14LocalDate customDate = LocalDate.of(9102, Month.JANUARY, 1);System.out.println(customDate); // 9102-01-01 æ–°å¢ž APIè¿™é‡Œè¿™åªåˆ—ä¸¾éƒ¨åˆ†å¸¸ç”¨çš„ APIï¼Œå…¶ä»–ä¼šåœ¨åŠŸèƒ½æ€§ä¸­è¡¥å……ã€‚ æ¶‰åŠ è¯´æ˜Ž LocalDate LocalDate æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå®ƒè¡¨ç¤ºæ—¥æœŸï¼Œé»˜è®¤æ ¼å¼æ˜¯ yyyy-MM-dd ã€‚ LocalTime LocalTime æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå®ƒçš„å®žä¾‹ä»£è¡¨å¯è¯»æ ¼å¼çš„æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼æ˜¯ hh:mm:ss.zzz ã€‚ LocalDateTime LocalDateTime æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ç»„æ—¥æœŸ-æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼æ˜¯ yyyy-MM-ddTHH-mm-ss.zzz ã€‚ LocalDate12345678910111213/** * LocalDate æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå®ƒè¡¨ç¤ºæ—¥æœŸï¼Œé»˜è®¤æ ¼å¼æ˜¯ yyyy-MM-dd */@Testpublic void LocalDate() &#123; LocalDate nowDate = LocalDate.now(); System.out.println(nowDate); // 2019-05-14 System.out.println(nowDate.getYear() + "-" + nowDate.getMonthValue() + "-" + nowDate.getDayOfMonth()); // 2019-5-14 LocalDate customDate = LocalDate.of(9102, Month.JANUARY, 1); System.out.println(customDate); // 9102-01-01&#125; LocalTime12345678910111213/** * LocalTime æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå®ƒçš„å®žä¾‹ä»£è¡¨å¯è¯»æ ¼å¼çš„æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼æ˜¯ hh:mm:ss.zzz */@Testpublic void LocalTime() &#123; LocalTime nowTime = LocalTime.now(); System.out.println(nowTime); // 11:14:47.718 System.out.println(nowTime.getHour() + ":" + nowTime.getMinute() + ":" + nowTime.getSecond()); // 11:18:32 LocalTime customTime = LocalTime.of(11, 2, 33); System.out.println(customTime);&#125; LocalDateTime12345678910111213141516/** * LocalDateTime æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå®ƒè¡¨ç¤ºä¸€ç»„æ—¥æœŸ-æ—¶é—´ï¼Œé»˜è®¤æ ¼å¼æ˜¯ yyyy-MM-ddTHH-mm-ss.zzz */@Testpublic void LocalDateTime() &#123; LocalDateTime nowDateTime = LocalDateTime.now(); System.out.println(nowDateTime); // 2019-05-14T11:21:27.766 System.out.println(nowDateTime.getYear() + "-" + nowDateTime.getMonthValue() + "-" + nowDateTime.getDayOfMonth()); //2019-5-14 LocalDate customDate = LocalDate.of(9102, Month.JANUARY, 1); LocalTime customTime = LocalTime.of(11, 2, 33); LocalDateTime customDateTime = LocalDateTime.of(customDate, customTime); System.out.println(customDateTime); // 9102-01-01T11:02:33&#125; æ ¼å¼åŒ–å’Œè§£æžJDK8 æ–°å¢žäº† java.time.format.DateTimeFormatter ç±»ï¼Œè´Ÿè´£æä¾›æ ¼å¼åŒ–ä¿¡æ¯ã€‚ 1234567891011121314151617@Testpublic void formatAndParse() &#123; // format LocalDate date = LocalDate.now(); System.out.println(date.format(DateTimeFormatter.BASIC_ISO_DATE));// 20190514 System.out.println(date.format(DateTimeFormatter.ofPattern("yyyy-MM-dd")));// 2019-05-14 LocalTime time = LocalTime.now(); System.out.println(time.format(DateTimeFormatter.ofPattern("HH:mm:ss")));// 13:54:31 LocalDateTime dateTime = LocalDateTime.of(date, time); System.out.println(dateTime.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"))); // 2019-05-14 13:54:31 // parse LocalDateTime dt = LocalDateTime.parse("2019-05-14 13:54:31", DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")); System.out.println(dt); // 2019-05-14T13:54:31&#125; å¤„ç†å’Œåˆ†æžæ–°çš„ API ä¸­å†…ç½®äº†è®¸å¤šå·¥å…·æ–¹æ³•ï¼Œå¯ä»¥åˆ†æžå’Œå¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚ æ³¨æ„ ï¼šè¿™äº›ç±»éƒ½æ˜¯ä¸å¯å˜åŠ¨çš„ï¼Œå¤„ç†åŽæ˜¯è¿”å›žä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728@Testpublic void dealAndAnalyse()&#123; LocalDate today = LocalDate.now(); // 2019-05-14 System.out.println("å½“å‰æ˜¯å¦æ˜¯é—°å¹´: " + today.isLeapYear()); // å½“å‰æ˜¯å¦æ˜¯é—°å¹´: false System.out.println(today.isAfter(LocalDate.of(9102,1,1))); // false // plus and minus : Day, Week, Month, Year System.out.println("ä¸€å¤©åŽ: " + today.plusDays(1)); // ä¸€å¤©åŽ: 2019-05-15 System.out.println(today); // 2019-05-15 System.out.println("ä¸€å¤©å‰: " + today.minusDays(1)); // ä¸€å¤©å‰: 2019-05-13 LocalDate dt = LocalDate.parse("2020-03-31", DateTimeFormatter.ofPattern("yyyy-MM-dd")); System.out.println(dt.minusMonths(1));// 2020-02-29 System.out.println(dt.minusYears(1).minusMonths(1));// 2019-02-28 // lastDayOfMonth, lastDayOfYear LocalDate lastDayOfYear = today.with(TemporalAdjusters.lastDayOfYear()); System.out.println(lastDayOfYear); // 2019-12-31 // æ—¶é—´é—´éš” Period period = today.until(lastDayOfYear); System.out.println(period.getDays()); // 17 System.out.println(period.getMonths()); // 7 System.out.println(period.getYears()); // 0&#125; æ”¯æŒæ—§ APIJDK8 æ–°å¢žäº†ä¸€ä¸ª java.time.Instant ç±»ï¼Œå€ŸåŠ©å®ƒå¯ä»¥å®Œæˆ æ—§API å’Œ æ–°API çš„ç›¸äº’è½¬æ¢ã€‚ 12345678910@Testpublic void old2new()&#123; // Date,Calendar -&gt; Instant -&gt; LocalDateTime Instant timestamp1 = new Date().toInstant(); Instant ts1 = Calendar.getInstance().toInstant(); LocalDateTime dateTime1 = LocalDateTime.ofInstant(timestamp1, ZoneId.systemDefault()); LocalDate date1 = dateTime1.toLocalDate(); LocalTime time1 = dateTime1.toLocalTime();&#125; 123456789@Testpublic void new2old()&#123; // LocalDateTime,LocalDate -&gt; Instant -&gt; Date Instant timestamp2 = LocalDateTime.now().atZone(ZoneId.systemDefault()).toInstant(); Instant ts2 = LocalDate.now().atStartOfDay().atZone(ZoneId.systemDefault()).toInstant(); Date date2 = Date.from(timestamp2); Date d2 = Date.from(ts2); &#125;]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆThymeleafä¹‹Layout]]></title>
    <url>%2F2019%2F02%2F15%2F%E6%B5%85%E8%B0%88Thymeleaf%E4%B9%8BLayout%2F</url>
    <content type="text"><![CDATA[ä¸€èˆ¬æ¥è¯´ï¼Œç½‘ç«™ä¼šæœ‰ä¸€äº›å…±äº«çš„å¸¸è§çš„é¡µé¢ç»„ä»¶ï¼Œå¦‚é¡µçœ‰ï¼Œé¡µè„šï¼Œèœå•ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸ƒå±€æ¥å…±äº«å®ƒä»¬ï¼Œ Thymeleaf å¾ˆå¥½çš„æ”¯æŒäº†è¿™ç§åŠŸèƒ½ï¼Œä¸éœ€è¦ä¾èµ–å…¶ä»–å¸ƒå±€å¼•æ“Žï¼Œä¾‹å¦‚ï¼š Apache Tiles ã€‚ æœ¬æ–‡å†…å®¹åŸºäºŽ Thymeleaf3.0 ã€‚ Thymeleaf : Template-Layout Thymeleaf Layout Thymeleaf Layout Dialect Thymeleaf æœ‰ä¸¤ç§ä¸»è¦çš„å¸ƒå±€æ–¹å¼ï¼Œå„æœ‰ä¼˜åŠ¿ï¼Œé…åˆä½¿ç”¨æ›´ä½³ã€‚ å¸ƒå±€æ–¹å¼ è¯´æ˜Ž ä¼˜åŠ£æ€§ åŒ…å«å¼å¸ƒå±€(include style) Thymeleafæ ‡å‡†å¸ƒå±€ã€‚é€šè¿‡åœ¨æ¯ä¸ªè§†å›¾ä¸­ç›´æŽ¥åµŒå…¥å…¬å…±é¡µé¢ç»„ä»¶ä»£ç æ¥ç”Ÿæˆé¡µé¢ã€‚ ä½¿ç”¨ç®€å•ï¼Œä½†ä¸åˆ©äºŽç»´æŠ¤ã€‚ åˆ†å±‚å¼å¸ƒå±€(hierarchical style) ç”±å¸ƒå±€æ–¹è¨€æä¾›æ”¯æŒã€‚æ¨¡æ¿é€šå¸¸ä½¿ç”¨çˆ¶å­å…³ç³»åˆ›å»ºï¼Œä»Žä¸€èˆ¬çš„éƒ¨åˆ†ï¼ˆå¸ƒå±€ï¼‰åˆ°å…·ä½“çš„éƒ¨åˆ†ï¼ˆå­è§†å›¾;ä¾‹å¦‚é¡µé¢å†…å®¹ï¼‰ æ¨¡å—åŒ–ç»´æŠ¤ç®€å•ï¼Œä½†é…ç½®æ›´å¤æ‚ã€‚ æ ‡å‡†å¸ƒå±€ç³»ç»ŸåŒ…å«å¼å¸ƒå±€â˜…åŒ…å«å¼å¸ƒå±€ ï¼Œä¹Ÿç§°ä¹‹ä¸º æ ‡å‡†å¸ƒå±€ ï¼Œååˆ†ç®€å•ï¼Œå…ˆå®šä¹‰æ¨¡æ¿ç‰‡æ®µï¼Œå†å¼•ç”¨ç‰‡æ®µå³å¯ã€‚ å®šä¹‰ç‰‡æ®µ å®šä¹‰ç‰‡æ®µéœ€è¦ä½¿ç”¨ th:fragment ï¼Œç‰‡æ®µåªæ˜¯ th:fragment æ‰€åœ¨æ ‡ç­¾åŠå­æ ‡ç­¾å†…å®¹ã€‚æ‰€æœ‰ç‰‡æ®µéƒ½å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰æˆ–åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­å®šä¹‰ã€‚ å½“å‰ç‰‡æ®µä½äºŽ classpath:templates/fragments/footer.html ã€‚ 12345678910&lt;!DOCTYPE html&gt;&lt;html xmlns:th="http://www.thymeleaf.org"&gt; &lt;body&gt; &lt;p th:fragment="copyright"&gt; &amp;copy; 2011 The Good Thymes Virtual Grocery &lt;/p&gt; &lt;/body&gt;&lt;/html&gt; å¼•ç”¨ç‰‡æ®µ å¼•ç”¨ç‰‡æ®µè¯­æ³•ï¼š th:å¼•ç”¨æ–¹å¼=&quot;~{templatename :: selector}&quot; ã€‚ ç‰‡æ®µè¡¨è¾¾å¼ï¼ˆ ~{} ï¼‰æ˜¯åœ¨ Thymeleaf 3.0 å¼•å…¥çš„ï¼Œä¸ºå‘ä¸Šå…¼å®¹ï¼Œå¼•ç”¨ç‰‡æ®µæ—¶å¯ä»¥ä¸ä½¿ç”¨ ~{} åŒ…å«ã€‚ è¯­æ³• è¯´æ˜Ž å¼•ç”¨æ–¹å¼ Thymeleaf æä¾›äº†ä¸‰ç§ å¼•ç”¨æ–¹å¼ ã€‚ ç‰‡æ®µæ¨¡æ¿åç§°ï¼ˆ templatename ï¼‰ å¯ä»¥æ˜¯æ–‡ä»¶, this æˆ– æ²¡æœ‰å…³é”®å­—ã€‚ ç‰‡æ®µé€‰æ‹©å™¨ï¼ˆ selector ï¼‰ ç‰‡æ®µåç§° æˆ– æ ‡è®°é€‰æ‹©å™¨ ã€‚ 12345678910&lt;!DOCTYPE html&gt;&lt;html xmlns:th="http://www.thymeleaf.org"&gt;&lt;body&gt; ... &lt;div th:insert="fragments/footer :: copyright"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ä½œç”¨æ•ˆæžœ 1234567891011121314&lt;!DOCTYPE html&gt;&lt;html xmlns:th="http://www.thymeleaf.org"&gt; &lt;body&gt; ... &lt;div&gt; &lt;p&gt; &amp;copy; 2011 The Good Thymes Virtual Grocery &lt;/p&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ç‰‡æ®µè¡¨è¾¾å¼ç‰‡æ®µè¡¨è¾¾å¼ å¯ä»¥å°†ç‰‡æ®µåšå¯¹è±¡ä½¿ç”¨ï¼Œå…¶æœ‰ä¸‰ç§æ ¼å¼ã€‚ ~{templatename::selector} templatename : æ¨¡æ¿åç§°ï¼ŒåŒ…å«äº†ç›¸å¯¹æ¨¡æ¿æ ¹è·¯å¾„çš„ä½ç½®ã€‚ selector : æ ‡è®°é€‰æ‹©å™¨ï¼Œå¯ä»¥åªæ˜¯ç‰‡æ®µåç§°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®Œå–„çš„ æ ‡è®°é€‰æ‹©å™¨è¯­æ³• ã€‚ ç”±äºŽæ ‡è®°é€‰æ‹©å™¨çš„å¼ºå¤§ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ idé€‰æ‹©å™¨ï¼ˆ #id ï¼‰ç›´æŽ¥é€‰æ‹©ç‰‡æ®µï¼Œè€Œä¸éœ€è¦ th:fragment ã€‚ ~{templatename} åœ¨ th:insert / th:replace æ ‡ç­¾ä¸­ä½¿ç”¨å¿…é¡»ç”±æ¨¡æ¿è§£æžå™¨è§£æžã€‚ ~{::selector} / ~{this::selector} ä¼˜å…ˆä»Žå½“å‰æ¨¡æ¿æŸ¥æ‰¾ç‰‡æ®µï¼Œè‹¥æ²¡æ‰¾åˆ°ï¼Œä¼šä»Žæ¨¡æ¿æ ¹è·¯å¾„å¼€å§‹éåŽ†æŸ¥æ‰¾åŒ¹é…ã€‚ å¼•ç”¨æ–¹å¼Thymeleaf æä¾›äº†ä¸‰ç§ç‰‡æ®µå¼•ç”¨æ–¹å¼ã€‚ ç‰‡æ®µå¼•ç”¨æ–¹å¼ è¯´æ˜Ž th:insert æ’å…¥æŒ‡å®šçš„ç‰‡æ®µåˆ°å¼•ç”¨æ ‡ç­¾ä¸­ã€‚ th:replace ä½¿ç”¨æŒ‡å®šçš„ç‰‡æ®µæ›¿æ¢å¼•ç”¨çš„æ ‡ç­¾ã€‚ th:include åªæ’å…¥ç‰‡æ®µå†…å®¹ï¼ˆä¸åŒ…æ‹¬æ ‡ç­¾ï¼‰åˆ°å¼•ç”¨æ ‡ç­¾ä¸­ï¼Œ v3.0åŽä¸æŽ¨èä½¿ç”¨ã€‚ ä¸‹é¢é€šè¿‡ç¤ºä¾‹ï¼Œæ„Ÿå—ä¸€ä¸‹ä¸‰ç§æ–¹å¼çš„åŒºåˆ« å®šä¹‰ç‰‡æ®µï¼Œå½“å‰ç‰‡æ®µä½äºŽ classpath:templates/fragments/footer.html ã€‚ 123&lt;p th:fragment="copyright"&gt; &amp;copy; 2011 The Good Thymes Virtual Grocery&lt;/p&gt; ä½¿ç”¨ä¸‰ç§æ–¹å¼å¼•ç”¨ç‰‡æ®µã€‚ 1234567891011&lt;body&gt; ... &lt;div th:insert="fragments/footer :: copyright"&gt;&lt;/div&gt; &lt;div th:replace="fragments/footer :: copyright"&gt;&lt;/div&gt; &lt;div th:include="fragments/footer :: copyright"&gt;&lt;/div&gt;&lt;/body&gt; ä¸‰ç§å¼•ç”¨æ–¹å¼çš„ä½œç”¨æ•ˆæžœã€‚ 12345678910111213141516171819&lt;body&gt; ... &lt;div&gt; &lt;p&gt; &amp;copy; 2011 The Good Thymes Virtual Grocery &lt;/p&gt; &lt;/div&gt; &lt;p&gt; &amp;copy; 2011 The Good Thymes Virtual Grocery &lt;/p&gt; &lt;div&gt; &amp;copy; 2011 The Good Thymes Virtual Grocery &lt;/div&gt;&lt;/body&gt; æ›´å¤šç‰¹æ€§Thymeleaf æ¨¡æ¿å¸ƒå±€è¿˜æ‹¥æœ‰å¾ˆå¤šç‰¹æ€§å’Œé«˜çº§åº”ç”¨ï¼Œè¿™é‡Œåˆ—ä¸¾äº†ä¸€äº›ä»¥ä¾›å‚è€ƒã€‚ å‚æ•°åŒ–ç‰‡æ®µ : æ¨¡æ¿ç‰‡æ®µå¯ä»¥å‘å‡½æ•°ä¸€æ ·ä¼ é€’å‚æ•°ã€‚ çµæ´»å¸ƒå±€ : å‚æ•°åŒ–ç‰‡æ®µ + ç‰‡æ®µè¡¨è¾¾å¼ = çµæ´»å¸ƒå±€ ã€‚ å¸ƒå±€ç»§æ‰¿ : çµæ´»å¸ƒå±€çš„åˆ©ç”¨æ–¹æ¡ˆï¼Œç†è®ºä¸Šå¯ä»¥ç›´æŽ¥å®žçŽ°ç¬¬ä¸‰æ–¹çš„ å¸ƒå±€æ–¹è¨€ çš„åˆ†å±‚å¸ƒå±€åŠŸèƒ½ã€‚ å¸ƒå±€æ–¹è¨€å¸ƒå±€æ–¹è¨€ å®žé™…ä¸Šæ˜¯ä¸€ä¸ªåŸºäºŽ Thymeleafæ–¹è¨€ çš„ç¬¬ä¸‰æ–¹æ‰©å±•åŒ…ï¼Œå¯ä»¥è½»æ¾çš„å®Œæˆåˆ†å±‚å¼å¸ƒå±€ã€‚ Spring Boot 1.x ä¸­åŒ…å«äº†å¸ƒå±€æ–¹è¨€ï¼Œä½†åœ¨ Spring Boot 2.x ä¸­è¢«ç§»é™¤ã€‚ 123456&lt;!-- https://github.com/ultraq/thymeleaf-layout-dialect --&gt;&lt;dependency&gt; &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt; &lt;version&gt;2.0.5&lt;/version&gt;&lt;/dependency&gt; å¯ä»¥åœ¨é¡µé¢ä¸­å¼•å…¥å‘½åç©ºé—´ï¼Œä½¿ IDE æ›´å¥½çš„æ”¯æŒã€‚ 1&lt;html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"&gt; åˆ†å±‚å¼å¸ƒå±€â˜…åˆ†å±‚å¼å¸ƒå±€éœ€è¦ä½¿ç”¨ å¸ƒå±€æ–¹è¨€ ï¼ˆLayout Dialectï¼‰ã€‚ å®šä¹‰å¸ƒå±€è£…é¥°å™¨ å¯ä»¥å®šä¹‰ä¸€ä¸ªé€šç”¨çš„å¸ƒå±€æ ·å¼ï¼ˆçˆ¶é¡µé¢ï¼‰ï¼Œä½¿ç”¨ layout:fragment å®šä¹‰å¸ƒå±€ç‰‡æ®µï¼ˆå­é¡µé¢å ä½ç¬¦ï¼‰ã€‚ å½“å‰ç‰‡æ®µä½äºŽ classpath:templates/layout/default.html ã€‚ 123456789101112&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;body&gt; &lt;!--/* æ ‡å‡†å¸ƒå±€ å¯ä»¥å’Œ å¸ƒå±€æ–¹è¨€ æ··åˆä½¿ç”¨ */--&gt; &lt;div th:replace="fragments/header :: header"&gt;&lt;/div&gt; &lt;div class="container"&gt; &lt;!--/* å½“å‰æ ‡ç­¾ä¼šè¢«æ›¿æ¢ï¼Œç±»ä¼¼th:replace */--&gt; &lt;div layout:fragment="content"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div th:replace="fragments/footer :: footer"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; å¼•ç”¨è£…é¥°å™¨ åœ¨éœ€è¦è¢«è£…é¥°çš„é¡µé¢ï¼ˆå­é¡µé¢ï¼‰ï¼Œä½¿ç”¨ layout:decorate å¼•ç”¨è£…é¥°å™¨ï¼Œå¹¶ä½¿ç”¨ layout:fragment è®¾ç½®å¸ƒå±€ç‰‡æ®µçš„å…·ä½“å†…å®¹ã€‚ å­é¡µé¢å¹¶ä¸æ˜¯è¢«ç®€å•çš„ th:replace ï¼Œ &lt;head&gt;&lt;/head&gt; çš„å†…å®¹ä¹Ÿä¼šä¸€å¹¶è¢«åˆç†å¸¦å…¥ã€‚ 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~&#123;layout/default&#125;"&gt; &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Springboot - thymeleaf&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div layout:fragment="content" title="å¸ƒå±€æˆåŠŸ"&gt; &lt;div&gt; ... çœŸå®žçš„å†…å®¹ ... &lt;/div&gt; &lt;!--/* åœ¨å­é¡µé¢ä¾ç„¶å¯ä»¥ä½¿ç”¨å¸ƒå±€ */--&gt; &lt;div data-th-insert="thymeleaf/common :: #commonT"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; æ–¹è¨€æ‰©å±•å¸ƒå±€æ–¹è¨€ ä¸ä»…æä¾›äº†åˆ†å±‚å¼å¸ƒå±€æ–¹æ³•ï¼Œè¿˜æ‰©å±•äº†æ ‡å‡†å¸ƒå±€çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æŽ¥æ›¿ä»£æ ‡å‡†å¸ƒå±€æ–¹è¨€ã€‚ä¾‹å¦‚ï¼š layout:fragment , layout:include ç­‰ã€‚å…·ä½“å‚è€ƒ å®˜æ–¹æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Thymeleaf</tag>
        <tag>Thymeleaf Layout</tag>
        <tag>Thymeleaf Layout Dialect</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Jackson: å…¨é¢çš„JSONå¤„ç†å·¥å…·]]></title>
    <url>%2F2019%2F01%2F28%2FJackson-%E5%85%A8%E9%9D%A2%E7%9A%84JSON%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[æ—¥å¸¸å¼€å‘ä¸­å¸¸éœ€è¦ Json ã€ Java ã€ Xmlä¹‹é—´çš„äº’ç›¸è½¬æ¢ï¼Œç›¸å…³ æ•°æ®å¤„ç†å·¥å…·ï¼ˆdata-processing toolsï¼‰ æœ‰å¾ˆå¤šï¼Œé‰´äºŽ Jackson æ›´åŠ å…¨é¢ä¸”æ“ä½œç®€å•ï¼Œè¿™é‡Œå°±ä»‹ç»ä¸€ä¸‹ Jaxckson çš„ç®€å•ç”¨æ³•ã€‚ æ³¨æ„ : jackson-dataformat-xml æ˜¯ Jackson æ‰©å±•ç»„ä»¶ï¼Œåªæä¾›äº†ä¸€äº›ç®€å•çš„æ–¹å¼æ“ä½œ xml ï¼Œä¸é€‚åˆä½œä¸ºæ“ä½œ xml çš„ä¸»åŠ›å·¥å…·ä½¿ç”¨ã€‚ jsonç›¸å…³ï¼š jackson-databind xml ç›¸å…³ï¼šjackson-dataformat-xml ä¸‹é¢æ˜¯ä¸€äº›ä¸»æµçš„è½¬æ¢å·¥å…·ï¼š è½¬æ¢å·¥å…· è¯´æ˜Ž json-lib è€ç‰Œçš„è½¬æ¢å·¥å…·ï¼ŒåŠŸèƒ½å…¨é¢ï¼Œ ä½†ç¬¬ä¸‰æ–¹ä¾èµ–å¤šï¼Œæ•ˆçŽ‡ä½Žç­‰ï¼ŒåŸºæœ¬åœæ­¢æ›´æ–°ï¼Œä¸æŽ¨èä½¿ç”¨ ã€‚ jackson å½“å‰æµè¡Œçš„å·¥å…·ï¼Œå…¨é¢ä¸”æ“ä½œç®€å•ã€‚ fastjson alibaba çš„äº§å“ï¼Œä»¥å¿«è€Œé—»åï¼Œæ“ä½œç®€å•ï¼Œä½† ä¸æ”¯æŒ xml ã€‚ JSONJackson æ”¯æŒ å¯¹ JSON çš„è¯»å†™æ“ä½œï¼Œä»¥ä¸‹æ˜¯éœ€è¦çš„ maven ä¾èµ–ï¼š 123456&lt;!-- https://github.com/FasterXML/jackson-databind --&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt; Jackson æä¾›äº†ä¸‰ç§æ–¹å¼å¤„ç† JSON ä¸‰ç§æ–¹å¼å¹¶ä¸æ˜¯ç›¸äº’å­¤ç«‹çš„ï¼Œå¯ä»¥ç›¸äº’é…åˆä½¿ç”¨ã€‚ å¤„ç†æ–¹å¼ è¯´æ˜Ž é€‚ç”¨åœºæ™¯ æ•°æ®ç»‘å®š éœ€è¦æœ‰å¯¹åº”çš„ Javaç±» æ¥ æ”¯æŒ JSON å’Œ POJO çš„äº’è½¬ï¼ŒåŒ…æ‹¬ JDKå¯¹è±¡ å’Œ è‡ªå®šä¹‰å¯¹è±¡ã€‚ é€‚ç”¨äºŽæ•°æ®ç»‘å®šæ˜ å°„ æ ‘æ¨¡åž‹ ä»¥æ ‘æ¨¡åž‹æ¥æ“ä½œ JSON ï¼Œé’ˆå¯¹æ ‘èŠ‚ç‚¹æ“ä½œï¼Œæ›´åŠ çµæ´»ã€‚ é€‚ç”¨äºŽå¤æ‚çš„æ•°æ®ç»“æž„ æµå¼API æœ€ä½³æ•ˆçŽ‡æ¥å¤„ç† JSON ï¼Œå’Œ æ ‘æ¨¡åž‹ ä¸€æ ·è‰¯å¥½ï¼Œæ“ä½œç›¸å¯¹å¤æ‚ã€‚ é€‚ç”¨äºŽè¿½æ±‚æ•ˆçŽ‡çš„å·¥ä½œ æ•°æ®ç»‘å®šæ•°æ®ç»‘å®š å¤„ç†æ–¹å¼æžå…¶ç®€å•ï¼Œåªéœ€è¦çš„æä¾›ä¸Ž Json ç›¸äº’å¯¹åº”çš„ Javaç±» å°±å¯ä»¥å¿«é€Ÿå®Œæˆ java ä¸Ž Json çš„ç›¸äº’è½¬æ¢ã€‚ ä½†å±€é™ä¹Ÿæ˜¯åœ¨æ­¤ï¼Œéœ€è¦åœºæ™¯æ˜Žç¡®æ•°æ®ç»“æž„ã€‚ POJO.java 12345678910111213141516public class User &#123; private String username; private int age; // getter and setter ... @Override public String toString() &#123; return "User&#123;" + "username='" + username + '\'' + ", age=" + age + '&#125;'; &#125;&#125; æ•°æ®ç»‘å®š éœ€è¦ ObjectMapper å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥é‡ç”¨ã€‚è¯¥æ–¹å¼åŒæ ·é€‚ç”¨äºŽ Map å’Œ List ã€‚ 123456789101112131415161718192021222324@Testpublic void test() &#123; User user = new User(); user.setUsername("Jack"); user.setAge(18); ObjectMapper objectMapper = new ObjectMapper(); try &#123; // object to json String strJson = objectMapper.writeValueAsString(user); System.out.println(strJson); // &#123;"username":"Jack","age":18&#125; // json to object User obj = objectMapper.readValue(strJson, User.class); System.out.println(obj); // User&#123;username='Jack', age=18&#125; &#125; catch (JsonProcessingException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125; æ ‘æ¨¡åž‹æ ‘æ¨¡åž‹ å¼•å…¥äº† JsonNode å¯¹è±¡ï¼Œå…è®¸ä½¿ç”¨æ“ä½œæ ‘èŠ‚ç‚¹çš„æ–¹å¼å¯¹ json è¿›è¡Œè¯»å†™ï¼Œå¹¶ä¸”åˆ©äºŽéåŽ†ã€‚ 12345678910111213141516171819202122232425262728293031323334@Testpublic void test() &#123; ObjectMapper objectMapper = new ObjectMapper(); try &#123; // json wirte JsonNode rootNode1 = objectMapper.createObjectNode(); ((ObjectNode) rootNode1).put("username", "Jack"); ((ObjectNode) rootNode1).put("age", 18); String strJson = objectMapper.writeValueAsString(rootNode1); System.out.println(strJson); // &#123;"username":"Jack","age":18&#125; // json read JsonNode rootNode2 = objectMapper.readTree(strJson); System.out.println(rootNode2); // &#123;"username":"Jack","age":18&#125; // iter Iterator&lt;String&gt; fields = rootNode2.fieldNames(); while (fields.hasNext())&#123; String field = fields.next(); System.out.println(field + ":" + rootNode2.get(field)); &#125; // username:"Jack" // age:18 &#125; catch (JsonProcessingException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125; å½“ç„¶æ­¤æ—¶å¦‚æžœä¸æƒ³ä½¿ç”¨ JsonNode å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼è½¬æ¢ä¸ºå¯¹åº”çš„ Javaå¯¹è±¡ ã€‚ 1234// JsonNode to POJOUser obj = objectMapper.treeToValue(rootNode2, User.class);System.out.println(obj);// User&#123;username='Jack', age=18&#125; æµå¼APIæµå¼API å¼•å…¥äº† JsonParser å’Œ JsonGenerator ä¸¤ä¸ªå¯¹è±¡ï¼ŒJsonGenerator è´Ÿè´£å†™æ“ä½œï¼Œ JsonParser è´Ÿè´£è¯»æ“ä½œã€‚ 1234567891011121314151617181920212223242526272829303132/** * æµå¼å†™å…¥ï¼šJsonGenerator */@Testpublic void test()&#123; StringWriter sw = new StringWriter(); JsonGenerator jsonGen = null; try &#123; jsonGen = new JsonFactory().createGenerator(sw); jsonGen.writeStartObject(); jsonGen.writeStringField("username", "Jack"); jsonGen.writeNumberField("age", 18); jsonGen.writeEndObject(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; if (jsonGen != null) &#123; try &#123; jsonGen.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; // jsonGenerator close åŽå†…å®¹æ‰ä¼šè¢«å†™å…¥ System.out.println(sw.toString()); // &#123;"username":"Jack","age":18,&#125;&#125; 1234567891011121314151617181920212223242526272829303132/** * æµå¼è¯»å–ï¼šJsonParser */@Testpublic void test() &#123; String strJson = "&#123;\"age\":28,\"username\":\"Jack\"&#125;"; JsonParser jsonParser = null; try &#123; jsonParser = new JsonFactory().createParser(strJson); if (jsonParser.nextToken() != JsonToken.START_OBJECT) &#123; throw new IOException("è§£æžå¤±è´¥ï¼šéžJSONæ ¼å¼"); &#125; while (jsonParser.nextToken() != JsonToken.END_OBJECT) &#123; String fieldname = jsonParser.getCurrentName(); if ("username".equals(fieldname))&#123; jsonParser.nextToken(); System.out.println(fieldname + ":" + jsonParser.getText()); // username:Jack &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; if (jsonParser != null) &#123; try &#123; jsonParser.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; ç”±ä»¥ä¸Šçš„ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºå•çº¯çš„ æµæ“ä½œ æ¯”è¾ƒç¹æ‚ï¼Œæ“ä½œèµ·æ¥æœ‰äº›å¾—ä¸å¿å¤±ã€‚ æ­£å¦‚ä¹‹å‰æ‰€è¯´ï¼Œè¿™ä¸‰ç§æ–¹å¼å¹¶ä¸æ˜¯ç›¸äº’å­¤ç«‹çš„ï¼Œå¯ä»¥ç›¸äº’é…åˆä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** * æµå¼æ“ä½œé…åˆæ•°æ®ç»‘å®š */@Testpublic void test() throws ParseException &#123; User user = new User(); user.setUsername("Jack"); user.setAge(19); // object to json JsonFactory jsonFactory = new JsonFactory(); JsonGenerator jsonGen = null; StringWriter sw = new StringWriter(); try &#123; jsonGen = jsonFactory.createGenerator(sw); ObjectMapper objectMapper = new ObjectMapper(); objectMapper.writeValue(jsonGen, user); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; if (jsonGen != null) &#123; try &#123; jsonGen.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; System.out.println(sw.toString()); // &#123;"username":"Jack","age":19&#125; JsonParser jsonParser = null; // json to object try &#123; jsonParser = jsonFactory.createParser(sw.toString()); ObjectMapper objectMapper = new ObjectMapper(); User obj = objectMapper.readValue(sw.toString(), User.class); System.out.println(obj); // User&#123;username='Jack', age=19&#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; if (jsonParser != null) &#123; try &#123; jsonParser.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; JSON ä¸Ž XMLJackson æ”¯æŒ å¯¹ XML çš„ç®€å•è¯»å†™æ“ä½œï¼Œä»¥ä¸‹æ˜¯éœ€è¦çš„ maven ä¾èµ–ï¼š 123456&lt;!-- https://github.com/FasterXML/jackson-dataformat-xml --&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt; &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt;&lt;/dependency&gt; å¯¹ XML çš„æ“ä½œç±»ä¼¼äºŽ JSONï¼Œè¿™é‡Œä»…å±•ç¤º JSON ä¸Ž XML çš„äº’è½¬ã€‚ 12345678910111213141516171819202122232425262728293031323334@Testpublic void test() &#123; String userJson1 = "&#123;\"age\":28,\"username\":\"Jack\"&#125;"; ObjectMapper objectMapper = new ObjectMapper(); XmlMapper xmlMapper = new XmlMapper(); StringWriter sw = new StringWriter(); try &#123; // json to xml JsonNode root = objectMapper.readTree(userJson1); xmlMapper.enable(SerializationFeature.INDENT_OUTPUT); String xml = xmlMapper.writeValueAsString(root); System.out.println(xml); // &lt;ObjectNode&gt; // &lt;age&gt;28&lt;/age&gt; // &lt;username&gt;Jack&lt;/username&gt; // &lt;/ObjectNode&gt; // xml to json JsonParser jsonParser = xmlMapper.getFactory().createParser(xml); JsonGenerator jsonGenerator = objectMapper.getFactory().createGenerator(sw); while (jsonParser.nextToken() != null) &#123; jsonGenerator.copyCurrentEvent(jsonParser); &#125; jsonParser.close(); jsonGenerator.close(); System.out.println(sw.toString()); // &#123;"age":"28","username":"Jack"&#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;&#125; Jacksoné…ç½®: FeatureJackson é¢„å®šä¹‰äº†ä¸€äº›é…ç½®ï¼Œå¯ä»¥é€šè¿‡ configureæ–¹æ³• å¯ç”¨å’Œç¦ç”¨ç›¸å…³ç‰¹æ€§ï¼ˆ Feature ï¼‰ï¼Œåœ¨ Jackson2.5 åˆè¿›è¡Œäº†ç»†åŒ–ï¼Œæ–°æ·»åŠ äº† enableæ–¹æ³• å’Œ disableæ–¹æ³• ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½†æŽ¨èåŽè€…ã€‚ 1234567// å¯ç”¨ä¸Žç¦ç”¨ï¼šç¼©è¿›ç‰¹æ€§mapper.configure(SerializationFeature.INDENT_OUTPUT, true);mapper.configure(SerializationFeature.INDENT_OUTPUT, false);// Jackson2.5 åŽçš„ç­‰æ•ˆæ–¹æ³•mapper.enable(SerializationFeature.INDENT_OUTPUT);mapper.disable(SerializationFeature.INDENT_OUTPUT); å¸¸ç”¨çš„é…ç½®è¿™é‡Œåˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨çš„é…ç½®ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³æ—¥å¸¸å¼€å‘ã€‚ Jackson çš„ Jsonè§£æž é»˜è®¤æ˜¯ä¸¥æ ¼æŒ‰ç…§ JSONæ ‡å‡† çš„ï¼Œè€Œ JavaScript ä¸­çš„ json å¹¶ä¸ä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªæ ‡å‡†çš„ã€‚ 1234567891011121314// æ”¯æŒå•å¼•å·ï¼ˆå…¼å®¹ js ï¼‰mapper.enable(JsonParser.Feature.ALLOW_SINGLE_QUOTES);// æ”¯æŒå­—æ®µåä¸å¸¦å¼•å·ï¼ˆå…¼å®¹ js ï¼‰mapper.enable(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES);// æŽ¥æ”¶ "" ç­‰åŒ nullmapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);// æ—¶é—´ç±»åž‹æ­£å¸¸è¾“å‡ºï¼ˆé»˜è®¤Date , Calendarä¼šè¾“å‡ºä¸ºæ•°å­—ï¼Œè¿™é‡Œç¦ç”¨ï¼‰mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);// é‡åˆ°æœªçŸ¥å±žæ€§æ—¶ä¸æŠ›å‡ºå¼‚å¸¸mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);// null å±žæ€§ä¸è¿›è¡Œåºåˆ—åŒ–mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL); Jacksonç‰¹æ€§ï¼ˆ JacksonFeatures ï¼‰ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸¤ç§ï¼Œå¹¶å«æœ‰é»˜è®¤å€¼ã€‚ æ•°æ®ç»‘å®šç‰¹æ€§ : MapperFeature , SerializationFeature , DeserializationFeature ã€‚ æµå¼APIç‰¹æ€§ï¼šJsonFactory.Feature , JsonParser.Feature , JsonGenerator.Feature ã€‚ ç±»åž‹æ ¼å¼åŒ–Jackson å¯¹äºŽä¸åŒçš„æ•°æ®ç±»åž‹ï¼Œå®žçŽ°ä¸åŒçš„æ ¼å¼åŒ–ï¼Œè¿™é‡Œä»¥ æ—¥æœŸç±»åž‹ ä¸ºä¾‹è¯´æ˜Žã€‚ é»˜è®¤è¡Œä¸ºé»˜è®¤åºåˆ—åŒ– æ—¥æœŸç±»åž‹é»˜è®¤åºåˆ—åŒ–ä¸ºæ—¶é—´æˆ³ï¼ˆæ•°å€¼åž‹ï¼‰ï¼Œå³ Java ä¸­çš„æ—¥æœŸç±»åž‹ ä¼šé»˜è®¤è½¬æ¢ä¸º JSONä¸­çš„æ•°å€¼ç±»åž‹ : è·ç¦» 1970-01-01 08:00:00 çš„æ¯«ç§’å·®ã€‚ é»˜è®¤ååºåˆ—åŒ– å¯¹äºŽæ—¥æœŸç±»åž‹ï¼ŒJackson æœ‰é»˜è®¤çš„ååºåˆ—åŒ–æ ¼å¼ StdDateFormat ï¼Œå³ ä»¥ä¸‹æ ¼å¼å­—ç¬¦ä¸² å¯ä»¥è½¬æ¢ä¸º Java ä¸­çš„æ—¥æœŸç±»åž‹ã€‚ JSONæ•°å€¼åž‹ ä¹Ÿå¯ä»¥è¢«è½¬æ¢ä¸º javaæ—¥æœŸç±»åž‹ ã€‚ 1234DATE_FORMAT_STR_ISO8601, // "yyyy-MM-dd'T'HH:mm:ss.SSSZ""yyyy-MM-dd'T'HH:mm:ss.SSS", // ISO-8601 but no timezoneDATE_FORMAT_STR_RFC1123, // "EEE, dd MMM yyyy HH:mm:ss zzz"DATE_FORMAT_STR_PLAIN //"yyyy-MM-dd" è‡ªå®šä¹‰æ ¼å¼åŒ–ï¼š ModuleJackson æä¾›äº†åŠŸèƒ½æ‰©å±•æŽ¥å£ Moduleï¼ˆæ¨¡å—ï¼‰ ï¼Œ ä¸€èˆ¬ä½¿ç”¨ SimpleModule å°±å¯ä»¥äº†ï¼Œ å‘å…¶æ·»åŠ  åºåˆ—åŒ–å™¨ å’Œ ååºåˆ—åŒ–å™¨ ï¼Œå† æ³¨å†Œæ¨¡å— ã€‚ è¿™ç§æ–¹å¼ä¼šè¦†ç›– StdDateFormat ï¼Œä½†æ˜¯æ•°å€¼åž‹è¿˜æ˜¯å¯ä»¥è¢«æ­£å¸¸è§£æžçš„ã€‚ 123456// å®šä¹‰æ‰©å±•æ¨¡å—SimpleModule module = new SimpleModule();// æ·»åŠ è‡ªå®šä¹‰åºåˆ—åŒ–å™¨module.addSerializer(Date.class, new DateSerializer(false, new SimpleDateFormat("yyyy-MM-dd")));// æ³¨å†Œæ‰©å±•æ¨¡å—mapper.registerModule(module); å®žé™…ä¸Šï¼Œå¯¹äºŽæ—¥æœŸç±»åž‹å¯ä»¥ç›´æŽ¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ç®€å•å®žçŽ°ï¼š ä¸¤ç§æ–¹å¼å¯ä»¥å¹¶å­˜ï¼Œ module çš„ä¼˜å…ˆçº§æ›´é«˜ï¼ŒæŽ¨èä½¿ç”¨ module ç»Ÿä¸€ç®¡ç†æ‰©å±•ã€‚ 12// è‡ªå®šä¹‰ åºåˆ—åŒ–æ ¼å¼ ä¸Ž ååºåˆ—åŒ–æ ¼å¼mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd"));]]></content>
      <categories>
        <category>â‘  Starter</category>
      </categories>
      <tags>
        <tag>XML</tag>
        <tag>Jackson</tag>
        <tag>JSON</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆMaven]]></title>
    <url>%2F2019%2F01%2F12%2F%E6%B5%85%E8%B0%88Maven%2F</url>
    <content type="text"><![CDATA[MavenåŸºäºŽ é¡¹ç›®å¯¹è±¡æ¨¡åž‹ï¼ˆPOMï¼‰ ï¼Œæ˜¯çº¯ Java å¼€å‘çš„å¼€æºé¡¹ç›®ï¼Œå¯ä»¥ç”¨äºŽ æž„å»ºå’Œç®¡ç†å„ç§é¡¹ç›® ã€‚ç±»ä¼¼å·¥å…·è¿˜æœ‰ï¼š Ant ã€ gradle ã€‚ å®˜ç½‘ï¼š Apache Maven å…¬å…±ä»“åº“ https://search.maven.org/ https://mvnrepository.com/ https://maven.aliyun.com æž„ä»¶ &amp; ä»“åº“mavenæž„ä»¶ : åœ¨ Maven ä¸­ï¼Œä»»ä½•ä¸€ä¸ªä¾èµ–ã€æ’ä»¶æˆ–è€…é¡¹ç›®æž„å»ºçš„è¾“å‡ºï¼Œéƒ½å¯ä»¥ç§°ä¹‹ä¸ºæž„ä»¶ã€‚ mavenä»“åº“ : å­˜æ”¾é¡¹ç›®æž„ä»¶çš„åœ°æ–¹ã€‚ æž„ä»¶åœ¨ Maven ä¸­ï¼Œä»»ä½•ä¾èµ–ï¼ˆjaråŒ…ï¼Œtomcatç­‰ï¼‰ï¼Œæˆ–é¡¹ç›®ï¼ˆè‡ªå·±æ‰“åŒ…çš„jar,warç­‰ï¼‰è¾“å‡ºéƒ½å¯æˆä¸ºæž„ä»¶ã€‚æ¯ä¸ªæž„ä»¶éƒ½æœ‰è‡ªå·±çš„å”¯ä¸€æ ‡è¯†ï¼ˆå”¯ä¸€åæ ‡ï¼‰ï¼Œç”± groupId ï¼Œ artifactId ï¼Œå’Œ version ä¸‰è¦ç´  æž„æˆã€‚ æž„ä»¶è¦ç´  è¯´æ˜Ž groupId å¿…éœ€ï¼Œå½“å‰Mavenæž„ä»¶éš¶å±žçš„é¡¹ç›®åï¼Œä¸€èˆ¬ä¸º åå†™çš„å…¬å¸å…¬å¸ç½‘å€(+é¡¹ç›®) ã€‚ artifactId å¿…éœ€ï¼Œéš¶å±žé¡¹ç›®ä¸­çš„æ¨¡å—åï¼Œä¸€èˆ¬ä¸º é¡¹ç›®å-æ¨¡å—å ã€‚ version å¿…éœ€ï¼Œå½“å‰ç‰ˆæœ¬ã€‚ packaging é»˜è®¤ä¸º jarï¼Œæ‰“åŒ…æ–¹å¼ï¼šjar, war, ear, pomã€‚ versionverison ä¸€èˆ¬å‘½åæ ¼å¼ä¸º å¤§ç‰ˆæœ¬å·.åˆ†æ”¯ç‰ˆæœ¬å·.å°ç‰ˆæœ¬å·-ç‰ˆæœ¬ç±»åž‹ ã€‚ ç‰ˆæœ¬ç±»åž‹ è¯´æ˜Ž snapshot å¿«ç…§ç‰ˆæœ¬ alpha å†…éƒ¨ç‰ˆæœ¬ beta å…¬æµ‹ç‰ˆæœ¬ release ç¨³å®šç‰ˆæœ¬ GA æ­£å¼ç‰ˆæœ¬ packagingpackaging è¡¨ç¤ºæ‰“åŒ…ç§ç±»å¦‚ : jar , war , ear ã€‚ pom è¡¨ç¤ºå½“å‰ pom ä¸ºå¼•ç”¨ï¼Œä¸€èˆ¬ç”¨äºŽçˆ¶æ¨¡å—ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š æ‰“åŒ…æ–¹å¼ è¯´æ˜Ž jar Java Archive fileï¼ŒæŠŠå¼€å‘æ—¶è¦å¼•ç”¨é€šç”¨(JAVA)ç±»åŠèµ„æºåšå°è£…ï¼Œæ‰“æˆåŒ…åŽä¾¿äºŽå­˜æ”¾ç®¡ç†ã€‚ war Web Archive fileï¼Œä¸€ä¸ª(web)å®Œæ•´çš„åº”ç”¨ï¼Œé€šå¸¸æ˜¯ç½‘ç«™æˆ–WEBå¹³å°ï¼Œæ‰“æˆåŒ…éƒ¨ç½²åˆ°å®¹å™¨ä¸­ã€‚ ear Enterprise Archive fileï¼Œä¼ä¸šçº§åº”ç”¨ï¼Œå®žé™…ä¸ŠEARåŒ…ä¸­åŒ…å«WARåŒ…å’Œå‡ ä¸ªä¼ä¸šçº§é¡¹ç›®çš„é…ç½®æ–‡ä»¶è€Œå·²ï¼ŒæœåŠ¡å™¨ä¸­é—´ä»¶é€šå¸¸é€‰æ‹©WebSphereç­‰éƒ½ä¼šä½¿ç”¨EARåŒ…ã€‚é€šå¸¸æ˜¯EJBæ‰“æˆearåŒ…ã€‚ ä»“åº“mavençš„ä»“åº“å¯ä»¥åˆ†ä¸º æœ¬åœ°ä»“åº“ å’Œ è¿œç¨‹ä»“åº“ ä¸¤ç§ã€‚ è¿è¡Œ Maven çš„æ—¶å€™ï¼ŒMaven æ‰€éœ€è¦çš„ä»»ä½•æž„ä»¶éƒ½æ˜¯ç›´æŽ¥ä»Žæœ¬åœ°ä»“åº“èŽ·å–çš„ã€‚å¦‚æžœæœ¬åœ°ä»“åº“æ²¡æœ‰ï¼Œå®ƒä¼šé¦–å…ˆå°è¯•ä»Žè¿œç¨‹ä»“åº“ä¸‹è½½æž„ä»¶è‡³æœ¬åœ°ä»“åº“ï¼Œç„¶åŽå†ä½¿ç”¨æœ¬åœ°ä»“åº“çš„æž„ä»¶ã€‚ æœ¬åœ°ä»“åº“Mavenåœ¨æœ¬åœ°å­˜å‚¨æž„ä»¶çš„åœ°æ–¹ã€‚å…¶åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œmavenå‘½ä»¤çš„æ—¶æ‰ä¼šè¢«åˆ›å»ºã€‚ æœ¬åœ°ä»“åº“çš„é»˜è®¤ä½ç½®ä¸ºç”¨æˆ·çš„ç›®å½•ä¸‹ .m2/repository/ã€‚ ä¿®æ”¹ apache-maven-*\conf\settings.xml å¯ä»¥æ›´æ”¹é»˜è®¤çš„æœ¬åœ°ä»“åº“ä½ç½®ã€‚ 123&lt;settings&gt; &lt;localRepository&gt;/developer/Repo/MavenRepo&lt;/localRepository&gt; &lt;/settings&gt; è¿œç¨‹ä»“åº“è¿œç¨‹ä»“åº“ä¸­å¯ä»¥ä¸‰ç§ï¼šä¸­å¤®ä»“åº“ , ç§æœ , å…¶å®ƒå…¬å…±åº“ ã€‚ ä¸­å¤®ä»“åº“ ä¸­å¤®ä»“åº“åŒ…å«äº†ç»å¤§å¤šæ•°æµè¡Œçš„å¼€æºJavaæž„ä»¶ï¼Œä»¥åŠæºç ã€ä½œè€…ä¿¡æ¯ã€SCMã€ä¿¡æ¯ã€è®¸å¯è¯ä¿¡æ¯ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç®€å•çš„Javaé¡¹ç›®ä¾èµ–çš„æž„ä»¶éƒ½å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½åˆ°ã€‚ æœ€æ ¸å¿ƒçš„ä¸­å¤®ä»“åº“æ˜¯é»˜è®¤çš„è¿œç¨‹ä»“åº“ï¼Œmavenåœ¨å®‰è£…çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„mavené¡¹ç›®éƒ½ä¼šç»§æ‰¿è¶…çº§pomï¼ŒåŒ…å«äº†ä¸­å¤®ä»“åº“çš„é…ç½®ï¼Œå¦‚ä¸‹ï¼š 1234567891011&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;central&lt;/id&gt; &lt;name&gt;Central Repository&lt;/name&gt; &lt;url&gt;http://repo.maven.apache.org/maven2&lt;/url&gt; &lt;layout&gt;default&lt;/layout&gt; &lt;snapshots&gt; &lt;enabled&gt;false&lt;/enabled&gt; &lt;/snapshots&gt; &lt;/repository&gt; &lt;/repositories&gt; ç§æœ ç§æœæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ï¼Œå®ƒæ˜¯æž¶è®¾åœ¨å±€åŸŸç½‘å†…çš„ä»“åº“æœåŠ¡ï¼Œç§æœä»£ç†å¹¿åŸŸç½‘ä¸Šçš„è¿œç¨‹ä»“åº“ï¼Œä¾›å±€åŸŸç½‘å†…çš„Mavenç”¨æˆ·ä½¿ç”¨ã€‚å½“Mavenéœ€è¦ä¸‹è½½æž„ä»¶çš„æ—¶å€™ï¼Œå®ƒä»Žç§æœè¯·æ±‚ï¼Œå¦‚æžœç§æœä¸Šä¸å­˜åœ¨è¯¥æž„ä»¶ï¼Œåˆ™ä»Žå¤–éƒ¨çš„è¿œç¨‹ä»“åº“ä¸‹è½½ï¼Œç¼“å­˜åœ¨ç§æœä¸Šä¹‹åŽï¼Œå†ä¸ºMavençš„ä¸‹è½½è¯·æ±‚æä¾›æœåŠ¡ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æŠŠä¸€äº›æ— æ³•ä»Žå¤–éƒ¨ä»“åº“ä¸‹è½½åˆ°çš„æž„ä»¶ä¸Šä¼ åˆ°ç§æœä¸Šã€‚ å½“å‰ä¸»æµçš„mavenç§æœï¼š Apache çš„ Archiva JFrog çš„ Artifactory Sonatype çš„ Nexus å…¶ä»–å…¬å…±ä»“åº“ å›½å¤–ä»“åº“é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä»¥å›½å†…çš„é•œåƒä»“åº“ï¼Œåœ¨ settings.xml çš„&lt;mirrors&gt;&lt;/mirrors&gt;ä¸­å¦‚ä¸‹æ·»åŠ å³å¯ã€‚ 12345678&lt;!-- ä½¿ç”¨é˜¿é‡Œäº‘çš„mavené•œåƒä»“åº“ï¼ˆä¿è¯é€Ÿåº¦ç¨³å®šï¼‰ --&gt;&lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;!-- è®¾ç½®ä¸ºä¸­å¤®ä»“åº“é…ç½®é•œåƒ --&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; ä¾èµ–ç®¡ç†ä¾èµ–ä¼ é€’æž„ä»¶å…·æœ‰ ä¾èµ–ä¼ é€’æ€§ ã€‚ä¾‹å¦‚ï¼šé¡¹ç›®ä¾èµ–æž„ä»¶Aï¼Œè€Œæž„ä»¶Aåˆä¾èµ–Bï¼ŒMavenä¼šå°†Aå’ŒBéƒ½è§†ä¸ºé¡¹ç›®çš„ä¾èµ–ã€‚ ä»¥ä¸‹ä¾èµ–èŒƒå›´çš„æž„ä»¶ï¼Œä¸å‚ä¸Žä¼ é€’ï¼š provided , test , import ã€‚ è§£æžåŠ è½½é¡ºåº å…ˆ çŸ­è·¯ä¼˜å…ˆ ï¼ŒåŽ å£°æ˜Žä¼˜å…ˆ ã€‚ ä¹Ÿå¯ä»¥åœ¨ pom.xml ä¸­ï¼Œä½¿ç”¨ &lt;exclusions&gt;&lt;/exclusions&gt; æ˜¾å¼æŽ’é™¤æŸä¸ªç‰ˆæœ¬çš„ä¾èµ–ï¼Œä»¥ç¡®ä¿é¡¹ç›®èƒ½å¤Ÿè¿è¡Œã€‚ çŸ­è·¯ä¼˜å…ˆï¼šé¡¹ç›®å£°æ˜Žä¾èµ–æž„ä»¶Aå’ŒBï¼Œæž„ä»¶A â†’ C â†’ D(version:1.0.0)ï¼Œæž„ä»¶B â†’ D(version:1.1.0)ï¼Œæ­¤æ—¶ï¼ŒMavenä¼šä¼˜å…ˆè§£æžåŠ è½½D(version:1.1.0)ã€‚ å£°æ˜Žä¼˜å…ˆï¼šé¡¹ç›®å£°æ˜Žä¾èµ–æž„ä»¶Aå’ŒBï¼Œæž„ä»¶A â†’ D(version:1.0.0)ï¼Œ æž„ä»¶B â†’ D(version:1.1.0)ï¼Œæ­¤æ—¶ï¼ŒMavenä¼šä¼˜å…ˆè§£æžåŠ è½½D(version:1.0.0)ã€‚ ä¾èµ–èŒƒå›´ï¼ˆscopeï¼‰ä¾èµ–èŒƒå›´ï¼ˆscopeï¼‰ : ç¼–è¯‘æœŸï¼Œè¿è¡ŒæœŸï¼Œæµ‹è¯•æœŸï¼Œåˆ†åˆ«å¯¹åº”Mavenåœ¨é¡¹ç›®æž„å»ºè¿‡ç¨‹ä¸­ç¼–è¯‘çš„ä¸‰å¥— classpath ã€‚è€Œä¾èµ–èŒƒå›´ï¼Œå°±æ˜¯ä¸ºæž„ä»¶æŒ‡å®šå®ƒå¯ä»¥ä½œç”¨äºŽå“ªå¥—classpathã€‚å…¶å¯åœ¨ &lt;scope&gt;&lt;/scope&gt; è®¾ç½®ã€‚ ä¾èµ–èŒƒå›´ ç¼–è¯‘æœŸ æµ‹è¯•æœŸ è¿è¡ŒæœŸ è¯´æ˜Ž compile âœ“ âœ“ âœ“ é»˜è®¤èŒƒå›´ provided âœ“ âœ“ å¸Œæœ›è¿è¡ŒæœŸç”±webå®¹å™¨æä¾›ä¾èµ–ï¼Œ ä¾èµ–ä¸å¯ä¼ é€’ ã€‚å¦‚servlet-api.jarã€‚ runtime âœ“ âœ“ ç¼–è¯‘æœŸæ— éœ€ç›´æŽ¥å¼•ç”¨ï¼Œå¦‚jdbcé©±åŠ¨çš„å®žçŽ°ã€‚ test âœ“ åªåœ¨æµ‹è¯•ç›®å½•ä¸‹æ‰å¯ä½¿ç”¨ï¼Œä¸»ç›®å½•ä¸‹å›žæŠ¥é”™ï¼Œ ä¾èµ–ä¸å¯ä¼ é€’ ã€‚å¦‚è®¾ç½®junitä¾èµ–èŒƒå›´ã€‚ system âœ“ âœ“ å¿…é¡»é€šè¿‡ &lt;systemPath&gt;&lt;/systemPath&gt;å…ƒç´ ï¼Œæ˜¾ç¤ºæŒ‡å®šä¾èµ–æ–‡ä»¶çš„è·¯å¾„ï¼Œä¸Žæœ¬åœ°ç³»ç»Ÿç›¸å…³è”ï¼Œå¯ç§»æ¤æ€§å·®ã€‚ import å¯¼å…¥ä¾èµ–ï¼Œå®ƒåªä½¿ç”¨åœ¨ dependencyManagement ï¼Œè¡¨ç¤ºå¯¼å…¥ æ­¤ä¾èµ–pom ä¸­çš„ä¾èµ–ï¼Œä½œç”¨ç±»ä¼¼äºŽ parent ï¼Œ ä¾èµ–ä¸å¯ä¼ é€’ã€‚ èšåˆ &amp; ç»§æ‰¿èšåˆåˆ†å±‚æž¶æž„ã€åˆ†æ¨¡å—å¼€å‘ï¼Œå¯ä»¥æé«˜ä»£ç çš„æ¸…æ™°å’Œé‡ç”¨ï¼Œåœ¨çˆ¶æ¨¡å—ä½¿ç”¨&lt;modules&gt;&lt;/modules&gt; å³å¯èšåˆå¤šä¸ªå­æ¨¡å—ã€‚ æž„å»ºçˆ¶æ¨¡å—æ—¶ï¼Œä¼šè‡ªåŠ¨æž„å»ºæ‰€èšåˆçš„å­æ¨¡å—ã€‚ 12345&lt;modules&gt; &lt;module&gt;web&lt;/module&gt; &lt;module&gt;persistence&lt;/module&gt; &lt;module&gt;model&lt;/module&gt;&lt;/modules&gt; åŒæ—¶éœ€è¦ packaging è®¾ç½®ä¸º pom ã€‚ 1&lt;packaging&gt;pom&lt;/packaging&gt; ç»§æ‰¿ç»§æ‰¿å°±æ˜¯ä¸ºäº†é¿å…é‡å¤ï¼Œmavençš„ç»§æ‰¿ä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯è®©é¡¹ç›®æ›´åŠ å®‰å…¨ã€‚ åœ¨å­æ¨¡å—ä¸­ä½¿ç”¨ &lt;parent&gt;&lt;/parent&gt; å³å¯ç»§æ‰¿çˆ¶æ¨¡å—å±žæ€§ã€‚ 12345&lt;parent&gt; &lt;artifactId&gt;app-demo&lt;/artifactId&gt; &lt;groupId&gt;org.demo&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;/parent&gt; æ¨¡å—åŒ–åœ¨æ¨¡å—åŒ–å¼€å‘æ—¶ï¼Œéœ€è¦åŒæ—¶ä½¿ç”¨ èšåˆ å’Œ ç»§æ‰¿ã€‚ çˆ¶æ¨¡å— 123456789&lt;!-- å°†packaging æ”¹ä¸º pom --&gt;&lt;packaging&gt;pom&lt;/packaging&gt;&lt;!-- æ¨¡å—åŒ– --&gt;&lt;modules&gt; &lt;module&gt;web&lt;/module&gt; &lt;module&gt;persistence&lt;/module&gt; &lt;module&gt;model&lt;/module&gt;&lt;/modules&gt; å­æ¨¡å—pom 12345&lt;parent&gt; &lt;artifactId&gt;first-app-demo&lt;/artifactId&gt; &lt;groupId&gt;org.demo&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;/parent&gt; ç”Ÿå‘½å‘¨æœŸMavenæœ‰ä¸‰ä¸ªç›¸äº’ç‹¬ç«‹çš„æ ‡å‡†çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè¿è¡ŒæŸä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œå®ƒä¹‹å‰çš„æ‰€æœ‰é˜¶æ®µéƒ½ä¼šè¢«è¿è¡Œã€‚ æ¶‰åŠä¸€è§ˆ è¯´æ˜Ž clean é¡¹ç›®æ¸…ç†çš„å¤„ç†ã€‚ defaultï¼ˆbuildï¼‰ é¡¹ç›®éƒ¨ç½²çš„å¤„ç†ã€‚ site é¡¹ç›®ç«™ç‚¹æ–‡æ¡£åˆ›å»ºçš„å¤„ç†ã€‚ Cleanå½“æ‰§è¡Œ mvn post-clean å‘½ä»¤æ—¶ï¼ŒMaven è°ƒç”¨ clean ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒåŒ…å«ä»¥ä¸‹é˜¶æ®µï¼Œå¹¶æœ‰ç›¸å…³å‘½ä»¤å¯¹åº”ã€‚ mvn clean å°±æ˜¯ä¸‹é¢çš„ cleanï¼Œåœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè¿è¡ŒæŸä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œå®ƒä¹‹å‰çš„æ‰€æœ‰é˜¶æ®µéƒ½ä¼šè¢«è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œmvn clean ç­‰åŒäºŽmvn pre-clean clean ã€‚ cleanç”Ÿå‘½å‘¨æœŸ è¯´æ˜Ž pre-clean æ‰§è¡Œå®žé™…é¡¹ç›®æ¸…ç†ä¹‹å‰æ‰€éœ€çš„æµç¨‹ã€‚ clean åˆ é™¤ä¹‹å‰æž„å»ºç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶ï¼Œ targetç›®å½• ç­‰ã€‚ post-clean æ‰§è¡Œå®Œæˆé¡¹ç›®æ¸…ç†æ‰€éœ€çš„æµç¨‹ã€‚ Default (Build)Default æ˜¯ Maven çš„ä¸»è¦ç”Ÿå‘½å‘¨æœŸï¼Œè¢«ç”¨äºŽæž„å»ºåº”ç”¨ï¼ŒåŒ…æ‹¬çš„ 23 ä¸ªé˜¶æ®µï¼Œä¸‹é¢ä¸ºç®€åŒ–çš„ 7 ä¸ªé˜¶æ®µï¼š Defaultç®€åŒ–ç”Ÿå‘½å‘¨æœŸ è¯´æ˜Ž validate æ£€æŸ¥å·¥ç¨‹é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œå®Œæˆæž„å»ºè¿‡ç¨‹çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯æ˜¯å¦èƒ½å¤ŸèŽ·å–åˆ°ã€‚ compile ç¼–è¯‘å·¥ç¨‹æºç ï¼Œç”Ÿæˆ targetç›®å½• ç­‰ã€‚ test è‡ªåŠ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹å¹¶åˆ†æžï¼ˆå¦‚JUnitï¼‰ã€‚ package èŽ·å–ç¼–è¯‘åŽçš„ä»£ç ï¼Œå¹¶æŒ‰ç…§å¯å‘å¸ƒçš„æ ¼å¼è¿›è¡Œæ‰“åŒ…ï¼Œä¾‹å¦‚ JARã€WAR æˆ–è€… EAR æ–‡ä»¶ã€‚ verify è¿è¡Œæ£€æŸ¥æ“ä½œæ¥éªŒè¯å·¥ç¨‹åŒ…æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶æ»¡è¶³è´¨é‡è¦æ±‚ã€‚ install å®‰è£…å·¥ç¨‹åŒ…åˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚ deploy æ‹·è´æœ€ç»ˆçš„å·¥ç¨‹åŒ…åˆ°è¿œç¨‹ä»“åº“ä¸­ï¼Œä»¥å…±äº«ç»™å…¶ä»–å¼€å‘äººå‘˜å’Œå·¥ç¨‹ã€‚ Default å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬äº†çš„ 23 ä¸ªé˜¶æ®µï¼š Defaultå®Œæ•´ç”Ÿå‘½å‘¨æœŸ è¯´æ˜Ž validate æ£€æŸ¥å·¥ç¨‹é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œå®Œæˆæž„å»ºè¿‡ç¨‹çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯æ˜¯å¦èƒ½å¤ŸèŽ·å–åˆ°ã€‚ initialize åˆå§‹åŒ–æž„å»ºçŠ¶æ€ï¼Œä¾‹å¦‚è®¾ç½®å±žæ€§ã€‚ generate-sources ç”Ÿæˆç¼–è¯‘é˜¶æ®µéœ€è¦åŒ…å«çš„ä»»ä½•æºç æ–‡ä»¶ã€‚ process-sources å¤„ç†æºä»£ç ï¼Œä¾‹å¦‚ï¼Œè¿‡æ»¤ä»»ä½•å€¼ï¼ˆfilter any valueï¼‰ã€‚ generate-resources ç”Ÿæˆå·¥ç¨‹åŒ…ä¸­éœ€è¦åŒ…å«çš„èµ„æºæ–‡ä»¶ã€‚ process-resources æ‹·è´å’Œå¤„ç†èµ„æºæ–‡ä»¶åˆ°targetç›®å½•ä¸­ï¼Œä¸ºæ‰“åŒ…é˜¶æ®µåšå‡†å¤‡ã€‚ compile ç¼–è¯‘å·¥ç¨‹æºç ã€‚ process-classes å¤„ç†ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä¾‹å¦‚ Java Class å­—èŠ‚ç çš„åŠ å¼ºå’Œä¼˜åŒ–ã€‚ generate-test-sources ç”Ÿæˆç¼–è¯‘é˜¶æ®µéœ€è¦åŒ…å«çš„ä»»ä½•æµ‹è¯•æºä»£ç ã€‚ process-test-sources å¤„ç†æµ‹è¯•æºä»£ç ï¼Œä¾‹å¦‚ï¼Œè¿‡æ»¤ä»»ä½•å€¼ï¼ˆfilter any values)ã€‚ test-compile ç¼–è¯‘æµ‹è¯•æºä»£ç åˆ°æµ‹è¯•targetç›®å½•ã€‚ process-test-classes å¤„ç†æµ‹è¯•ä»£ç æ–‡ä»¶ç¼–è¯‘åŽç”Ÿæˆçš„æ–‡ä»¶ã€‚ test ä½¿ç”¨é€‚å½“çš„å•å…ƒæµ‹è¯•æ¡†æž¶ï¼ˆä¾‹å¦‚JUnitï¼‰è¿è¡Œæµ‹è¯•ã€‚ prepare-package åœ¨çœŸæ­£æ‰“åŒ…ä¹‹å‰ï¼Œä¸ºå‡†å¤‡æ‰“åŒ…æ‰§è¡Œä»»ä½•å¿…è¦çš„æ“ä½œã€‚ package èŽ·å–ç¼–è¯‘åŽçš„ä»£ç ï¼Œå¹¶æŒ‰ç…§å¯å‘å¸ƒçš„æ ¼å¼è¿›è¡Œæ‰“åŒ…ï¼Œä¾‹å¦‚ JARã€WAR æˆ–è€… EAR æ–‡ä»¶ã€‚ pre-integration-test åœ¨é›†æˆæµ‹è¯•æ‰§è¡Œä¹‹å‰ï¼Œæ‰§è¡Œæ‰€éœ€çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æ‰€éœ€çš„çŽ¯å¢ƒå˜é‡ã€‚ integration-test å¤„ç†å’Œéƒ¨ç½²å¿…é¡»çš„å·¥ç¨‹åŒ…åˆ°é›†æˆæµ‹è¯•èƒ½å¤Ÿè¿è¡Œçš„çŽ¯å¢ƒä¸­ã€‚ post-integration-test åœ¨é›†æˆæµ‹è¯•è¢«æ‰§è¡ŒåŽæ‰§è¡Œå¿…è¦çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œæ¸…ç†çŽ¯å¢ƒã€‚ verify è¿è¡Œæ£€æŸ¥æ“ä½œæ¥éªŒè¯å·¥ç¨‹åŒ…æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶æ»¡è¶³è´¨é‡è¦æ±‚ã€‚ install å®‰è£…å·¥ç¨‹åŒ…åˆ°æœ¬åœ°ä»“åº“ä¸­ï¼Œè¯¥ä»“åº“å¯ä»¥ä½œä¸ºæœ¬åœ°å…¶ä»–å·¥ç¨‹çš„ä¾èµ–ã€‚ deploy æ‹·è´æœ€ç»ˆçš„å·¥ç¨‹åŒ…åˆ°è¿œç¨‹ä»“åº“ä¸­ï¼Œä»¥å…±äº«ç»™å…¶ä»–å¼€å‘äººå‘˜å’Œå·¥ç¨‹ã€‚ SiteMaven Site æ’ä»¶ä¸€èˆ¬ç”¨æ¥åˆ›å»ºæ–°çš„æŠ¥å‘Šæ–‡æ¡£ã€éƒ¨ç½²ç«™ç‚¹ç­‰ã€‚ site ç”Ÿå‘½å‘¨æœŸ è¯´æ˜Ž pre-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œã€‚ site ç”Ÿæˆé¡¹ç›®çš„ç«™ç‚¹æ–‡æ¡£ã€‚ post-site æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åŽå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡ã€‚ site-deploy å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šçš„æœåŠ¡å™¨ä¸Šã€‚ POMå…ƒç´ è§£æžpom.xml æ˜¯ maven é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚ å› ä¸º pom.xml å†…çš„å…ƒç´ ä¼—å¤šï¼Œä¸ºä¾¿äºŽè®°å¿†ï¼Œè¿™é‡Œæ¢³ç†äº†ä¸€äº›é•¿å¸¸è§çš„å…ƒç´ ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt; &lt;!-- pomç‰ˆæœ¬ï¼ˆæ¨¡åž‹ç‰ˆæœ¬ï¼‰--&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;!-- æž„ä»¶åæ ‡ä¸‰è¦ç´  --&gt; &lt;groupId&gt;com.demo&lt;/groupId&gt; &lt;artifactId&gt;demo-maven&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;!--æ‰“åŒ…ç±»åž‹ï¼Œé»˜è®¤æ˜¯jarï¼Œè¿˜æœ‰war/ear/pom--&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;!-- é¡¹ç›®æè¿°å --&gt; &lt;name&gt;A Maven Project Demo&lt;/name&gt; &lt;!-- é¡¹ç›®åœ°å€ --&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;!-- é¡¹ç›®æè¿° --&gt; &lt;description&gt;A Maven Project Demo&lt;/description&gt; &lt;!-- å¼€å‘äººå‘˜åˆ—è¡¨ --&gt; &lt;!--&lt;developers&gt;&lt;/developers&gt;--&gt; &lt;!-- è®¸å¯è¯ --&gt; &lt;!--&lt;licenses&gt;&lt;/licenses&gt;--&gt; &lt;!-- ç»„ç»‡ä¿¡æ¯ --&gt; &lt;!--&lt;organization&gt;&lt;/organization&gt;--&gt; &lt;!-- å±žæ€§åˆ—è¡¨: æä¾›å…¬å…±å˜é‡å€¼ --&gt; &lt;properties&gt; &lt;!-- ä½¿ç”¨æ–¹å¼: $&#123;java.version&#125; --&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;/properties&gt; &lt;!--ä¾èµ–ç®¡ç†: ç›¸å½“äºŽæä¾›äº†ä¸€äº›ä¾èµ–çš„é»˜è®¤é…ç½®ã€‚ åªæœ‰åœ¨ä¾èµ–åˆ—è¡¨ä¸­å¼•å…¥äº†ç›¸å…³ä¾èµ–ï¼Œä¸”æ²¡æœ‰æä¾›ç›¸å…³é…ç½®æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚ ä½œç”¨å¦‚ï¼šä¸æ˜¾ç¤ºæä¾›ç‰ˆæœ¬å·ï¼Œç”¨äºŽä¾èµ–ç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†ã€‚ --&gt; &lt;!--&lt;dependencyManagement&gt;&lt;/dependencyManagement&gt;--&gt; &lt;!--ä¾èµ–åˆ—è¡¨--&gt; &lt;dependencies&gt;&lt;/dependencies&gt; &lt;!-- é¡¹ç›®æž„å»ºç›¸å…³ --&gt; &lt;build&gt; &lt;!-- ç”Ÿæˆæž„ä»¶çš„å‘½åï¼Œé»˜è®¤ä¸º$&#123;artifactId&#125;-$&#123;version&#125; --&gt; &lt;!--&lt;finalName&gt;MavenTest&lt;/finalName&gt;--&gt; &lt;!--æ’ä»¶åˆ—è¡¨--&gt; &lt;plugins&gt;&lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; å˜é‡é™¤äº†å¯ä»¥åœ¨.&lt;properties /&gt; è‡ªå®šä¹‰å˜é‡ï¼ŒMaven ä¹Ÿæä¾›äº†ä¸€äº›å†…ç½®å˜é‡ã€‚ å†…ç½®å˜é‡ è¯´æ˜Ž ${project.xxx} å½“å‰pomæ–‡ä»¶çš„ä»»æ„èŠ‚ç‚¹çš„å†…å®¹ã€‚ ${basedir} é¡¹ç›®æ ¹ç›®å½•(å³ pom.xml æ–‡ä»¶æ‰€åœ¨ç›®å½•)ã€‚ ${project.build.directory} æž„å»ºç›®å½•ï¼Œç¼ºçœä¸º target ç›®å½•ã€‚ ${project.build.outputDirectory} æž„å»ºè¿‡ç¨‹è¾“å‡ºç›®å½•ï¼Œç¼ºçœä¸º target/classes ã€‚ ${project.build.finalName} äº§å‡ºç‰©åç§°ï¼Œç¼ºçœä¸º ${project.artifactId}-${project.version} ã€‚ ${project.packaging} æ‰“åŒ…ç±»åž‹ï¼Œç¼ºçœä¸ºjarã€‚ ${env.xxx} èŽ·å–ç³»ç»ŸçŽ¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚, env.PATH æŒ‡ä»£äº† $path çŽ¯å¢ƒå˜é‡ï¼ˆåœ¨Windowsä¸Šæ˜¯ %PATH% ï¼‰ã€‚ ${settings.xxx} æŒ‡ä»£äº†settings.xmlä¸­å¯¹åº”å…ƒç´ çš„å€¼ã€‚ä¾‹å¦‚ï¼š&lt;settings&gt;&lt;offline&gt;false&lt;/offline&gt;&lt;/settings&gt; é€šè¿‡ ${settings.offline} èŽ·å¾—offlineçš„å€¼ã€‚ Java System Properties æ‰€æœ‰å¯é€šè¿‡ java.lang.System.getProperties() è®¿é—®çš„å±žæ€§éƒ½èƒ½åœ¨POMä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ ${JAVA_HOME} ã€‚ dependenciesproject.dependencies ç”¨äºŽé…ç½®é¡¹ç›®ä¾èµ–ã€‚ è¯¦æƒ…å‚è€ƒ ä¾èµ–ç®¡ç† ã€‚ 1234567891011&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;!-- åªåœ¨æµ‹è¯•ä¾èµ–èŒƒå›´å†…æœ‰ç”¨ --&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;!--ä¾èµ–æ˜¯å¦å¯é€‰ï¼Œé»˜è®¤ä¸ºfalseã€‚è®¾ç½®ä¸ºtrueè¡¨ç¤ºä¾èµ–ä¸ä¼šä¼ é€’--&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;!--æŽ’é™¤ä¾èµ–ä¼ é€’åˆ—è¡¨--&gt; &lt;!--&lt;exclusions&gt;&lt;/exclusions&gt;--&gt;&lt;/dependency&gt; resourcesproject.build.resources å¯ä»¥è‡ªå®šä¹‰é¡¹ç›®èµ„æºæ–‡ä»¶çš„è¾“å‡ºä½ç½®ã€‚ é»˜è®¤è¡Œä¸º &amp; ç›®å½•ç»“æž„ 12345678910111213.â”œâ”€â”€ pom.xmlâ”œâ”€â”€ srcâ”‚ â”œâ”€â”€ mainâ”‚ â”‚ â”œâ”€â”€ java # compileç»“æžœä¼šåŠ å…¥åˆ°classes (é»˜è®¤åªå¤„ç† *.java)â”‚ â”‚ â””â”€â”€ resources # compileåŽä¼šè¢«å¤åˆ¶åˆ°classesâ”‚ â””â”€â”€ testâ”‚ â”‚ â”œâ”€â”€ java # test-compileç»“æžœä¼šåŠ å…¥åˆ°test-classes (é»˜è®¤åªå¤„ç† *.java)â”‚ â”‚ â””â”€â”€ resources # test-compileåŽä¼šè¢«å¤åˆ¶åˆ°classesâ””â”€â”€ target # æ‰“åŒ…æ’ä»¶é»˜è®¤ä¼šå°†è¯¥ç›®å½•çš„å†…å®¹çš„åŠ å…¥åŒ…å†… â”œâ”€â”€ classes â”œâ”€â”€ test-classes â””â”€â”€ ... è‡ªå®šä¹‰èµ„æºæ–‡ä»¶è¾“å‡º å¦‚ä¸‹ç¤ºä¾‹ï¼Œå°† src/main/java ä¸‹çš„ *.xml ä¹Ÿæœ‰æ•ˆè¾“å‡ºã€‚å¯ä»¥ä½¿ç”¨ targetPath æŒ‡å®šè¾“å‡ºä½ç½®ï¼Œå¦‚æžœåªæ˜¯å¸Œæœ›æ˜¯æºç›®å½•ä½ç½®ï¼Œåˆ™ä¸éœ€è¦ã€‚ æ³¨æ„ : ç»æµ‹è¯• ï¼Œä¸€æ—¦ resource æœ‰æ•ˆé…ç½® ï¼ŒåŽŸ maven å¯¹ resourcesç›®å½• çš„é»˜è®¤è¡Œä¸ºå°±ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥åˆæ·»åŠ äº†å¦‚ä¸‹çš„é…ç½®ã€‚ 123456789101112&lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;$&#123;project.basedir&#125;/src/main/resources&lt;/directory&gt; &lt;targetPath&gt;$&#123;project.build.outputDirectory&#125;&lt;/targetPath&gt; &lt;/resource&gt;&lt;/resources&gt; çŽ¯å¢ƒéš”ç¦»è¿™é‡Œæ˜¯ä»¥ç›®å½•æ¥åŒºåˆ†çŽ¯å¢ƒï¼Œ å°†é€šç”¨æ–‡ä»¶æ”¾å…¥ resources ï¼ŒçŽ¯å¢ƒæ–‡ä»¶æ”¾å…¥å¯¹åº”ç›®å½•ï¼Œå¦‚ï¼š resources.dev å’Œ resources.prod ã€‚ 123456789101112131415161718192021222324252627282930&lt;!-- é…ç½® profiles ï¼ŒæŒ‡å®šé»˜è®¤ä¸º dev --&gt;&lt;profiles&gt; &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;/activation&gt; &lt;properties&gt; &lt;deploy.type&gt;dev&lt;/deploy.type&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;prod&lt;/id&gt; &lt;properties&gt; &lt;deploy.type&gt;prod&lt;/deploy.type&gt; &lt;/properties&gt; &lt;/profile&gt;&lt;/profiles&gt;&lt;build&gt; &lt;!-- å°†èµ„æºæ–‡ä»¶è¾“å‡ºåˆ°æºç›®å½•ä½ç½® --&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources.$&#123;deploy.type&#125;&lt;/directory&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; åŠ¨æ€æŒ‡å®š activeåœ¨æ‰“åŒ…æ—¶ä¹Ÿå¯ä»¥æŒ‡å®š profile ï¼Œå‘½ä»¤ä¼˜å…ˆçº§é«˜äºŽ xml é…ç½®ã€‚ 1$ mvn clean package -Dmaven.test.skip=true -Pprod æ’ä»¶Mavenæ’ä»¶ : maven çš„æ‰€æœ‰å·¥ä½œéƒ½æ˜¯ç”±å„ç§æ’ä»¶å®Œæˆçš„ï¼Œè€Œ mavenå‘½ä»¤ ä¼šæŽ§åˆ¶å¯¹åº” mavenæ’ä»¶ å®Œæˆç›¸åº”ä»»åŠ¡ã€‚ maven è‡ªå¸¦äº†ä¸€äº›æ’ä»¶ï¼Œåœ¨ pom.xml ä¸­ä¹Ÿå¯ä»¥é…ç½®è‡ªå·±éœ€è¦çš„æ’ä»¶ã€‚ æ’ä»¶ç±»åž‹ é…ç½®ä½ç½® æž„å»ºæ’ä»¶ &lt;build&gt;&lt;/build&gt; æŠ¥å‘Šæ’ä»¶ &lt;reporting&gt;&lt;/reporting&gt; archetypeArchetypeæ’ä»¶ æ˜¯ä¸€ä¸ª Maven é¡¹ç›®æ¨¡æ¿å·¥å…·åŒ…ï¼Œå¯ä»¥ä½¿ç”¨å…¶æ¥æž„å»ºé¡¹ç›®ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤åŽï¼Œä¼šå‡ºçŽ°åŽŸåž‹åˆ—è¡¨ï¼Œä¸€èˆ¬é€‰æ‹© maven-archetype-webapp å³å¯ã€‚ -D ä¸ºå®šä¹‰æ‰€éœ€å‚æ•°ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨ mvn archetype:generate æ¥æž„å»ºï¼Œmaven ä¼šäº¤äº’å¼è¯¢é—®æ‰€éœ€å‚æ•°ã€‚ 123456# å›žè½¦é”®éœ€è¦æ›¿æ¢ä¸ºç©ºæ ¼mvn archetype:generate -DgroupId=ç»„ç»‡åï¼Œåå†™ç½‘å€å+é¡¹ç›®å -DartifactId=é¡¹ç›®å/é¡¹ç›®å-æ¨¡å—å -Dversion=ç‰ˆæœ¬å· -Dpackage=åŒ…åï¼ˆé»˜è®¤DgroupIdï¼‰ é»˜è®¤ç›®å½•éª¨æž¶ ä»¥ä¸‹æ˜¯ maven çš„é»˜è®¤ç›®å½•ç»“æž„ç²¾ç®€ç‰ˆï¼Œéƒ¨åˆ†éœ€è¦è‡ªè¡Œå®Œå–„ã€‚ æ‰‹åŠ¨åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æž„ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚ 12345678910111213.â”œâ”€â”€ srcâ”‚ â”œâ”€â”€ mainâ”‚ â”‚ â”œâ”€â”€ javaâ”‚ â”‚ â”œâ”€â”€ resourcesâ”‚ â”‚ â”‚ â””â”€â”€ application.propertiesâ”‚ â”‚ â””â”€â”€ webappâ”‚ â”‚ â””â”€â”€ WEB-INFâ”‚ â”‚ â””â”€â”€ web.xmlâ”‚ â””â”€â”€ testâ”‚ â””â”€â”€ javaâ”œâ”€â”€ pom.xmlâ””â”€â”€ target compilerCompileræ’ä»¶ ï¼š maven å…·æœ‰è‡ªå¸¦çš„ç¼–è¯‘æ’ä»¶ï¼Œå³ mvn compiler æ‰€ç”¨æ’ä»¶ï¼Œå®ƒæœ‰é»˜è®¤å€¼ã€‚å› ä¸ºå¤šä¸ªé¡¹ç›®æ‰€éœ€çš„ç¼–è¯‘çŽ¯å¢ƒå¯èƒ½ä¸åŒï¼Œæ‰€ä»¥æŽ¨èåœ¨ pom ä¸­å•ç‹¬é…ç½®ã€‚ æœ‰æ—¶å¯èƒ½ä¸ä¼šé…ç½®è¿™ä¸ªæ’ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ä¿®æ”¹ æœ¬åœ° maven é…ç½® æˆ– IDEçš„ maven é…ç½® æ¥é¿å…é”™è¯¯ï¼Œä½†è¿™æ˜¯ä¸æŽ¨èçš„æ–¹å¼ï¼Œä¸åˆ©äºŽé¡¹ç›®ç®¡ç†ã€‚ 1234567891011&lt;!-- compilerï¼šç¼–è¯‘æ’ä»¶è®¾ç½® --&gt;&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.1&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;encoding&gt;UTF-8&lt;/encoding&gt; &lt;/configuration&gt;&lt;/plugin&gt; å¦‚æžœç›´æŽ¥åœ¨é¡¹ç›®ä¸­åŠ å…¥äº†ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸€èˆ¬ä¼šç½®äºŽ src/main/webapp/WEB-INF/lib ï¼Œå¯ä»¥åœ¨ &lt;configuration /&gt; ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œç¡®ä¿ç¼–è¯‘æ­£å¸¸ã€‚ 123&lt;compilerArguments&gt; &lt;extdirs&gt;$&#123;project.basedir&#125;/src/main/webapp/WEB-INF/lib&lt;/extdirs&gt;&lt;/compilerArguments&gt; sourceSourceæ’ä»¶ å¯ä»¥å°†æºä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œå…¶ä¸­ä¼šåŒ…å« ä»£ç æ³¨é‡Š ç­‰ã€‚ 123456789101112131415161718&lt;!-- sourceï¼šæ‰“åŒ…æºä»£ç æ’ä»¶ --&gt;&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;attach&gt;true&lt;/attach&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;!-- åœ¨å¯¹åº”ç”Ÿå‘½å‘¨æœŸï¼ˆé˜¶æ®µï¼‰è§¦å‘ --&gt; &lt;phase&gt;compile&lt;/phase&gt; &lt;goals&gt; &lt;!-- ç›®æ ‡ä¸ºjar: http://maven.apache.org/plugins/maven-source-plugin/ --&gt; &lt;goal&gt;jar&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; ç›¸å…³å¸¸è§é—®é¢˜å®‰è£…æœ¬åœ° jarè¿™é‡Œä»¥ Oracleé©±åŠ¨ ä¸ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹å¦‚ä½•å°† jar åŒ…åˆ°æœ¬åœ°ä»“åº“ã€‚ å› ä¸ºç‰ˆæƒé—®é¢˜ï¼Œä¸€èˆ¬å¼€æºä»“åº“ä¸ä¼šæ‹¥æœ‰ Oracle çš„é©±åŠ¨ã€‚ é¦–å…ˆèŽ·å–é©±åŠ¨ app\gushi\product\11.2.0\dbhome_1\jdbc\lib\ojdbc6.jar ã€‚å‘½ä»¤è§„åˆ™å¦‚ä¸‹ï¼š 123456å®‰è£…æŒ‡å®šæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“å‘½ä»¤ï¼šmvn install:install-file-DgroupId=&lt;groupId&gt; : è®¾ç½®é¡¹ç›®ä»£ç çš„åŒ…å(ä¸€èˆ¬ç”¨ç»„ç»‡å)-DartifactId=&lt;artifactId&gt; : è®¾ç½®é¡¹ç›®åæˆ–æ¨¡å—å -Dversion=1.0.0 : ç‰ˆæœ¬å·-Dpackaging=jar : ä»€ä¹ˆç±»åž‹çš„æ–‡ä»¶(jaråŒ…)-Dfile=&lt;myfile.jar&gt; : æŒ‡å®šjaræ–‡ä»¶è·¯å¾„ä¸Žæ–‡ä»¶å(åŒç›®å½•åªéœ€æ–‡ä»¶å) è§£åŽ‹ jar åŒ… å¯ä»¥ç¡®é©±åŠ¨ç‰ˆæœ¬ï¼Œå¦‚ 11.2.0.1.0 ã€‚ 1mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc6 -Dversion=11.2.0.1.0 -Dpackaging=jar -Dfile=ojdbc6.jar BUILD SUCCESS åŽï¼Œå³å¯ä½¿ç”¨ä¾èµ–ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;com.oracle&lt;/groupId&gt; &lt;artifactId&gt;ojdbc6&lt;/artifactId&gt; &lt;version&gt;11.2.0.1.0&lt;/version&gt;&lt;/dependency&gt; æ‰“åŒ…è·³è¿‡æµ‹è¯•ä»Ž build ç”Ÿå‘½å‘¨æœŸå¯ä»¥çœ‹å‡ºï¼Œé»˜è®¤ package å‰ï¼Œä¸€å®šä¼šæ‰§è¡Œ test ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·³è¿‡ ï¼š 12# æŽ¨è - ä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿä¸ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»mvn package -Dmaven.test.skip=true 12# ä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä½†ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ç”Ÿæˆç›¸åº”çš„classæ–‡ä»¶è‡³target/test-classesä¸‹mvn package -DskipTests]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>å¼€å‘å·¥å…·</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆGit]]></title>
    <url>%2F2019%2F01%2F04%2F%E6%B5%85%E8%B0%88Git%2F</url>
    <content type="text"><![CDATA[Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿï¼ˆVCSï¼‰ï¼Œä¹Ÿæ˜¯ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿ(CMS)ï¼Œå¯ä»¥é«˜æ•ˆåœ°å¤„ç†å„ç§é¡¹ç›®ã€‚ å®˜ç½‘ï¼š Git Pro Git åŸºæœ¬æ“ä½œä»¥ä¸‹æ˜¯ Git çš„åŸºæœ¬å‘½ä»¤å’Œå¯¹åº”æ“ä½œå†…å®¹çš„ç¤ºæ„å›¾ï¼š åŸŸæ–°å»ºçš„ä¸€ä¸ª gité¡¹ç›®ï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªéšè—çš„ .git ç›®å½•ï¼Œç”¨äºŽå­˜æ”¾ git æ‰€éœ€ä¿¡æ¯ã€‚å½“æˆ‘ä»¬å˜æ›´é¡¹ç›®æ–‡ä»¶æ—¶æ˜¯ä¸ä¼šç›´æŽ¥ä½œç”¨äºŽ git çš„ï¼Œéœ€è¦ç›¸å…³å‘½ä»¤æ‰èƒ½è§¦å‘ç›¸åº”æ“ä½œã€‚ä¸€èˆ¬ä¹Ÿå°† .git ç›®å½• ç§°ä¹‹ä¸º ç‰ˆæœ¬åº“ã€‚ åŸŸ è¯´æ˜Ž Remote è¿œç¨‹ä»“åº“ã€‚ Repository ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå­˜äºŽ .git ç›®å½• ã€‚ Index / Stage æš‚å­˜åŒºï¼Œå³ç¼“å­˜ï¼Œå­˜äºŽ .git/index æ–‡ä»¶ã€‚ Workspace å·¥ä½œåŒºï¼Œå¯è§†çš„ï¼Œç›´æŽ¥æ“ä½œçš„ç›®å½•ã€‚ æ“ä½œå‘½ä»¤ git pull ç›¸å½“äºŽ git fetch + git merge ã€‚ git checkout æ˜¯ä¸ªå¾ˆå±é™©çš„å‘½ä»¤ï¼Œä¸ç®¡æ˜¯åˆ‡æ¢åˆ†æ”¯æˆ–æ–‡ä»¶ï¼Œè¯·ç¡®ä¿å·² commit ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±æ–‡ä»¶è®°å½•ã€‚ æ“ä½œå‘½ä»¤ è¯´æ˜Ž git clone [url] å…‹éš†è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ï¼ŒåŒ…æ‹¬äº†å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“ ã€‚ git pull æ‹‰å–è¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ï¼Œå¹¶åˆå¹¶ã€‚ git add ./--all æ·»åŠ æ‰€æœ‰åˆ°æš‚å­˜åŒºã€‚ git commit -m &quot;info&quot; æäº¤å¹¶æè¿°ï¼Œæäº¤åˆ°æœ¬åœ°ä»“åº“ã€‚ git push å‘å¸ƒ(publish)åˆ°è¿œç¨‹ä»“åº“ã€‚ git checkout (branchname) åˆ‡æ¢åˆ†æ”¯ã€‚ git fetch ä»Žè¿œç¨‹ä»“åº“èŽ·å–æœ€æ–°åˆ°æœ¬åœ°ï¼Œä¸åˆå¹¶ã€‚ å¸¸ç”¨æ“ä½œ12# æŸ¥çœ‹å¸®åŠ©$ git help git çš„éƒ¨åˆ†å‘½ä»¤å¯èƒ½ä¼šè°ƒç”¨ vim æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨æ“ä½œï¼š vim æ¶‰åŠ è¯´æ˜Ž / è¾“å…¥å­—ç¬¦å³å¯æŸ¥è¯¢ã€‚è¾“å…¥n æŸ¥çœ‹ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ã€‚ i åˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿ã€‚ Esc é€€å‡ºå½“å‰æ¨¡å¼ã€‚ shift + : è¿›å…¥åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚æ­¤æ—¶ q ä¸ºé€€å‡ºï¼Œ w ä¸ºä¿å­˜ï¼Œ! ä¸ºå¼ºåˆ¶ï¼Œå¯ä»¥å åŠ ã€‚ èŽ·å–å’Œåˆå§‹åŒ–é¡¹ç›®git init1234# åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“$ mkdir Hellow-World$ cd Hellow-World$ git init 12# æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“$ git init [project-name] git clone12# ä¸‹è½½é¡¹ç›®å’Œé»˜è®¤åˆ†æ”¯çš„ä»£ç åŽ†å²$ git clone git@github.com:username/Hello-World.git åŸºæœ¬å¿«ç…§Git çš„å·¥ä½œå°±æ˜¯åˆ›å»ºå’Œä¿å­˜ä½ é¡¹ç›®çš„å¿«ç…§åŠä¸Žä¹‹åŽçš„å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚è¿™é‡Œå°†å¯¹æ“ä½œé¡¹ç›®å¿«ç…§çš„å‘½ä»¤ä½œä»‹ç»ã€‚ git add1234567# æ–°å»ºæ–‡ä»¶$ touch README.md# æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•ï¼š$ git add [dir]# æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºï¼š$ git add [file1] [file2] ...# æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº$ git add . git status12# æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ï¼ˆæœªcommitçš„æ–‡ä»¶ï¼‰$ git status git diff12# æ˜¾ç¤ºæš‚å­˜åŒºä¸Žå·¥ä½œåŒºçš„å·®å¼‚(åªé’ˆå¯¹æš‚å­˜åŒºå·²å­˜åœ¨çš„æ–‡ä»¶)$ git diff git commit12# æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº$ git commit -m "Repo init" 12# ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤$ git commit --amend -m [message] git reset123# é‡ç½®æš‚å­˜åŒºä¸Žå·¥ä½œåŒºï¼Œä¸Žä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´# (å·¥ä½œåŒºæ–°å¢žæ–‡ä»¶ï¼Œä¸”æ²¡æœ‰åŠ å…¥æš‚å­˜åŒºåˆ™ä¸ä¼šå˜åŠ¨)$ git reset --hard 12345# é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜$ git reset [commit-hash]# é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸ŽæŒ‡å®šcommitä¸€è‡´$ git reset --hard [commit-hash] git rm / git mv12# åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº$ git rm [file1] [file2] ... 12# é‡å‘½åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº$ git mv [file-original] [file-renamed] å…±äº«å’Œæ›´æ–°é¡¹ç›®git remote å¦‚æžœé¡¹ç›®æ˜¯ git clone ä¸‹æ¥çš„ä¼šè‡ªå¸¦è¿žæŽ¥çš„è¿œç¨‹ä»“åº“ã€‚ 12# ä¸ºæœ¬åœ°ä»“åº“è®¾ç½®è¿œç¨‹ä»“åº“origin$ git remote add origin [remote-url] git fetch12# ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨$ git fetch [remote-url] git pull git pull ç›¸å½“äºŽ git fetch + git merge ã€‚ 12# æ‹‰å–è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸Žæœ¬åœ°å½“å‰åˆ†æ”¯åˆå¹¶$ git pull git push1234# å°†æœ¬åœ°çš„masteråˆ†æ”¯æŽ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æžœmasterä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚åŽŸæ–‡å‡ºè‡ªã€æ˜“ç™¾æ•™ç¨‹ã€‘ï¼Œå•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè¯·ä¿ç•™åŽŸæ–‡é“¾æŽ¥ï¼šhttps://www.yiibai.com/git/git_push.html$ git push origin master# æŽ¨é€æœ¬åœ°å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“$ git push 12345# æŽ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“$ git push --all# å¼ºè¡ŒæŽ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª$ git push --force åˆ†æ”¯å’Œåˆå¹¶ä½¿ç”¨åˆ†æ”¯æ„å‘³ç€ä½ å¯ä»¥ä»Žå¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å¼€æ¥ï¼Œç„¶åŽåœ¨ä¸å½±å“ä¸»çº¿çš„åŒæ—¶ç»§ç»­å·¥ä½œã€‚ git branch12345678910# åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ï¼š$ git branch -r# åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ï¼š$ git branch -a# åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯$ git branch# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä»¥å½“å‰åˆ†æ”¯å’Œæœ€æ–° commit ä¸ºåŸºç¡€$ git branch [branch-name]# åˆ é™¤åˆ†æ”¯$ git branch -d [branch-name] 12# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit$ git branch [branch-name] [commit-hash] git checkoutgit checkout æ˜¯ä¸ªå¾ˆå±é™©çš„å‘½ä»¤ï¼Œä¸ç®¡æ˜¯åˆ‡æ¢åˆ†æ”¯æˆ–æ–‡ä»¶ï¼Œè¯·ç¡®ä¿å·² commit ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±æ–‡ä»¶è®°å½•ã€‚ å½“ä¸¤ä¸ªåˆ†æ”¯çš„æœ€æ–° commit çš„æ•£åˆ—ç ä¸ç›¸åŒæ—¶ï¼Œè‹¥å­˜åœ¨æœª commit æ–‡ä»¶ï¼Œcheout æ—¶ä¼šå¤±è´¥å¹¶æç¤ºï¼› å½“ä¸¤ä¸ªåˆ†æ”¯çš„æœ€æ–° commit çš„æ•£åˆ—ç ç›¸åŒæ—¶ï¼Œcheout æ—¶ï¼Œæœª commit çš„æ–‡ä»¶ä¼šå¸¦å…¥å½“å¦ä¸€ä¸ªåˆ†æ”¯ä¸­ã€‚ 12345# åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº$ git checkout [branch-name]# åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯$ git checkout - 12# æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯$ git checkout -b [branch-name] git merge12# åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯$ git merge [branch] git log12345678# æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„commitåŽ†å²$ git log# åŽ†å²è®°å½•çš„ç®€æ´çš„ç‰ˆæœ¬$ git log --oneline# æ˜¾ç¤ºcommitåŽ†å²ï¼Œä»¥åŠå˜æ›´çš„å†…å®¹$ git log --stat 1234567# å±•ç¤ºå½“å‰ç‰ˆæœ¬æ ‘git log --graph# å±•ç¤ºæ‰€æœ‰ç‰ˆæœ¬æ ‘git log --graph --all# æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff$ git log -p [file] git tagå¦‚æžœä½ è¾¾åˆ°ä¸€ä¸ªé‡è¦çš„é˜¶æ®µï¼Œå¹¶å¸Œæœ›æ°¸è¿œè®°ä½é‚£ä¸ªç‰¹åˆ«çš„æäº¤å¿«ç…§ï¼Œä½ å¯ä»¥ä½¿ç”¨ git tag ç»™å®ƒæ‰“ä¸Šæ ‡ç­¾ã€‚ 123456# ä»…æ·»åŠ æ ‡ç­¾ï¼š$ git tag [tag-name]# æ·»åŠ æ ‡ç­¾ï¼Œå¹¶è¦æ±‚æ³¨é‡Š$ git tag -a [tag-name]# å¸¦tagçš„commitè®°å½•$ git log --decorate å¸¸ç”¨å¼€å‘æ–¹æ¡ˆ .gitignoreåœ¨ .gitignore æ–‡ä»¶ä¸­é…ç½®çš„æ–‡ä»¶ä¸ä¼šè¢« Git ç®¡ç†ã€‚ 12345678910111213141516171819202122232425262728293031323334*.class# package file*.war*.ear# kdiff3 ignore*.orig# maven ignoretarget/# idea.idea//idea/*.ipr*.iml*.iws# eclipse ignore.settings/.project.classpatch# temp file*.log*.cache*.diff*.patch*.tmp# system ignore.DS_StoreThumbs.db]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>å¼€å‘å·¥å…·</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é™„å½•:Thymeleafè¡¨è¾¾å¼å®žç”¨ç¨‹åºå¯¹è±¡]]></title>
    <url>%2F2018%2F12%2F26%2F%E9%99%84%E5%BD%95%E4%B9%8BThymeleaf%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%AF%B9%E8%B1%A1%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ç”¨äºŽè®°å½• Thymeleafä¸­çš„è¡¨è¾¾å¼å®žç”¨ç¨‹åºå¯¹è±¡ï¼ŒåŽŸæ–‡åœ°å€ï¼šé™„å½•Bï¼šè¡¨è¾¾å¼å®žç”¨ç¨‹åºå¯¹è±¡ ã€‚ æ‰§è¡Œä¿¡æ¯ #execInfoï¼šè¡¨è¾¾å¼å¯¹è±¡ï¼Œæä¾›æœ‰å…³åœ¨Thymeleafæ ‡å‡†è¡¨è¾¾å¼ä¸­å¤„ç†çš„æ¨¡æ¿çš„æœ‰ç”¨ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.ExecutionInfo * ====================================================================== *//* * Return the name and mode of the 'leaf' template. This means the template * from where the events being processed were parsed. So if this piece of * code is not in the root template "A" but on a fragment being inserted * into "A" from another template called "B", this will return "B" as a * name, and B's mode as template mode. */$&#123;#execInfo.templateName&#125;$&#123;#execInfo.templateMode&#125;/* * Return the name and mode of the 'root' template. This means the template * that the template engine was originally asked to process. So if this * piece of code is not in the root template "A" but on a fragment being * inserted into "A" from another template called "B", this will still * return "A" and A's template mode. */$&#123;#execInfo.processedTemplateName&#125;$&#123;#execInfo.processedTemplateMode&#125;/* * Return the stacks (actually, List&lt;String&gt; or List&lt;TemplateMode&gt;) of * templates being processed. The first element will be the * 'processedTemplate' (the root one), the last one will be the 'leaf' * template, and in the middle all the fragments inserted in nested * manner to reach the leaf from the root will appear. */$&#123;#execInfo.templateNames&#125;$&#123;#execInfo.templateModes&#125;/* * Return the stack of templates being processed similarly (and in the * same order) to 'templateNames' and 'templateModes', but returning * a List&lt;TemplateData&gt; with the full template metadata. */$&#123;#execInfo.templateStack&#125; æ¶ˆæ¯ #messagesï¼šç”¨äºŽåœ¨å˜é‡è¡¨è¾¾å¼ä¸­èŽ·å–å¤–éƒ¨åŒ–æ¶ˆæ¯çš„å®žç”¨ç¨‹åºæ–¹æ³•ï¼Œä¸Žä½¿ç”¨#{...}è¯­æ³•èŽ·å–å®ƒä»¬çš„æ–¹å¼ç›¸åŒã€‚ 123456789101112131415161718192021222324252627282930313233/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Messages * ====================================================================== *//* * Obtain externalized messages. Can receive a single key, a key plus arguments, * or an array/list/set of keys (in which case it will return an array/list/set of * externalized messages). * If a message is not found, a default message (like '??msgKey??') is returned. */$&#123;#messages.msg('msgKey')&#125;$&#123;#messages.msg('msgKey', param1)&#125;$&#123;#messages.msg('msgKey', param1, param2)&#125;$&#123;#messages.msg('msgKey', param1, param2, param3)&#125;$&#123;#messages.msgWithParams('msgKey', new Object[] &#123;param1, param2, param3, param4&#125;)&#125;$&#123;#messages.arrayMsg(messageKeyArray)&#125;$&#123;#messages.listMsg(messageKeyList)&#125;$&#123;#messages.setMsg(messageKeySet)&#125;/* * Obtain externalized messages or null. Null is returned instead of a default * message if a message for the specified key is not found. */$&#123;#messages.msgOrNull('msgKey')&#125;$&#123;#messages.msgOrNull('msgKey', param1)&#125;$&#123;#messages.msgOrNull('msgKey', param1, param2)&#125;$&#123;#messages.msgOrNull('msgKey', param1, param2, param3)&#125;$&#123;#messages.msgOrNullWithParams('msgKey', new Object[] &#123;param1, param2, param3, param4&#125;)&#125;$&#123;#messages.arrayMsgOrNull(messageKeyArray)&#125;$&#123;#messages.listMsgOrNull(messageKeyList)&#125;$&#123;#messages.setMsgOrNull(messageKeySet)&#125; URI #urisï¼šç”¨äºŽåœ¨Thymeleafæ ‡å‡†è¡¨è¾¾å¼ä¸­æ‰§è¡ŒURI / URLæ“ä½œï¼ˆå°¤å…¶æ˜¯è½¬ä¹‰/è½¬ä¹‰ï¼‰çš„å®žç”¨ç¨‹åºå¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Uris * ====================================================================== *//* * Escape/Unescape as a URI/URL path */$&#123;#uris.escapePath(uri)&#125;$&#123;#uris.escapePath(uri, encoding)&#125;$&#123;#uris.unescapePath(uri)&#125;$&#123;#uris.unescapePath(uri, encoding)&#125;/* * Escape/Unescape as a URI/URL path segment (between '/' symbols) */$&#123;#uris.escapePathSegment(uri)&#125;$&#123;#uris.escapePathSegment(uri, encoding)&#125;$&#123;#uris.unescapePathSegment(uri)&#125;$&#123;#uris.unescapePathSegment(uri, encoding)&#125;/* * Escape/Unescape as a Fragment Identifier (#frag) */$&#123;#uris.escapeFragmentId(uri)&#125;$&#123;#uris.escapeFragmentId(uri, encoding)&#125;$&#123;#uris.unescapeFragmentId(uri)&#125;$&#123;#uris.unescapeFragmentId(uri, encoding)&#125;/* * Escape/Unescape as a Query Parameter (?var=value) */$&#123;#uris.escapeQueryParam(uri)&#125;$&#123;#uris.escapeQueryParam(uri, encoding)&#125;$&#123;#uris.unescapeQueryParam(uri)&#125;$&#123;#uris.unescapeQueryParam(uri, encoding)&#125; è½¬æ¢ #conversionsï¼šå…è®¸åœ¨æ¨¡æ¿çš„ä»»ä½•ä½ç½®æ‰§è¡Œè½¬æ¢æœåŠ¡çš„å®žç”¨ç¨‹åºå¯¹è±¡ï¼š 123456789101112/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Conversions * ====================================================================== *//* * Execute the desired conversion of the 'object' value into the * specified class. */$&#123;#conversions.convert(object, 'java.util.TimeZone')&#125;$&#123;#conversions.convert(object, targetClass)&#125; å¸¸ç”¨ç±»åž‹æ—¥æœŸ #datesï¼šjava.util.Dateå¯¹è±¡çš„å®žç”¨æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Dates * ====================================================================== *//* * Format date with the standard locale format * Also works with arrays, lists or sets */$&#123;#dates.format(date)&#125;$&#123;#dates.arrayFormat(datesArray)&#125;$&#123;#dates.listFormat(datesList)&#125;$&#123;#dates.setFormat(datesSet)&#125;/* * Format date with the ISO8601 format * Also works with arrays, lists or sets */$&#123;#dates.formatISO(date)&#125;$&#123;#dates.arrayFormatISO(datesArray)&#125;$&#123;#dates.listFormatISO(datesList)&#125;$&#123;#dates.setFormatISO(datesSet)&#125;/* * Format date with the specified pattern * Also works with arrays, lists or sets */$&#123;#dates.format(date, 'dd/MMM/yyyy HH:mm')&#125;$&#123;#dates.arrayFormat(datesArray, 'dd/MMM/yyyy HH:mm')&#125;$&#123;#dates.listFormat(datesList, 'dd/MMM/yyyy HH:mm')&#125;$&#123;#dates.setFormat(datesSet, 'dd/MMM/yyyy HH:mm')&#125;/* * Obtain date properties * Also works with arrays, lists or sets */$&#123;#dates.day(date)&#125; // also arrayDay(...), listDay(...), etc.$&#123;#dates.month(date)&#125; // also arrayMonth(...), listMonth(...), etc.$&#123;#dates.monthName(date)&#125; // also arrayMonthName(...), listMonthName(...), etc.$&#123;#dates.monthNameShort(date)&#125; // also arrayMonthNameShort(...), listMonthNameShort(...), etc.$&#123;#dates.year(date)&#125; // also arrayYear(...), listYear(...), etc.$&#123;#dates.dayOfWeek(date)&#125; // also arrayDayOfWeek(...), listDayOfWeek(...), etc.$&#123;#dates.dayOfWeekName(date)&#125; // also arrayDayOfWeekName(...), listDayOfWeekName(...), etc.$&#123;#dates.dayOfWeekNameShort(date)&#125; // also arrayDayOfWeekNameShort(...), listDayOfWeekNameShort(...), etc.$&#123;#dates.hour(date)&#125; // also arrayHour(...), listHour(...), etc.$&#123;#dates.minute(date)&#125; // also arrayMinute(...), listMinute(...), etc.$&#123;#dates.second(date)&#125; // also arraySecond(...), listSecond(...), etc.$&#123;#dates.millisecond(date)&#125; // also arrayMillisecond(...), listMillisecond(...), etc./* * Create date (java.util.Date) objects from its components */$&#123;#dates.create(year,month,day)&#125;$&#123;#dates.create(year,month,day,hour,minute)&#125;$&#123;#dates.create(year,month,day,hour,minute,second)&#125;$&#123;#dates.create(year,month,day,hour,minute,second,millisecond)&#125;/* * Create a date (java.util.Date) object for the current date and time */$&#123;#dates.createNow()&#125;$&#123;#dates.createNowForTimeZone()&#125;/* * Create a date (java.util.Date) object for the current date (time set to 00:00) */$&#123;#dates.createToday()&#125;$&#123;#dates.createTodayForTimeZone()&#125; æ—¥åŽ† #calendarsï¼šç±»ä¼¼äºŽ#datesï¼Œä½†å¯¹äºŽjava.util.Calendarå¯¹è±¡ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Calendars * ====================================================================== *//* * Format calendar with the standard locale format * Also works with arrays, lists or sets */$&#123;#calendars.format(cal)&#125;$&#123;#calendars.arrayFormat(calArray)&#125;$&#123;#calendars.listFormat(calList)&#125;$&#123;#calendars.setFormat(calSet)&#125;/* * Format calendar with the ISO8601 format * Also works with arrays, lists or sets */$&#123;#calendars.formatISO(cal)&#125;$&#123;#calendars.arrayFormatISO(calArray)&#125;$&#123;#calendars.listFormatISO(calList)&#125;$&#123;#calendars.setFormatISO(calSet)&#125;/* * Format calendar with the specified pattern * Also works with arrays, lists or sets */$&#123;#calendars.format(cal, 'dd/MMM/yyyy HH:mm')&#125;$&#123;#calendars.arrayFormat(calArray, 'dd/MMM/yyyy HH:mm')&#125;$&#123;#calendars.listFormat(calList, 'dd/MMM/yyyy HH:mm')&#125;$&#123;#calendars.setFormat(calSet, 'dd/MMM/yyyy HH:mm')&#125;/* * Obtain calendar properties * Also works with arrays, lists or sets */$&#123;#calendars.day(date)&#125; // also arrayDay(...), listDay(...), etc.$&#123;#calendars.month(date)&#125; // also arrayMonth(...), listMonth(...), etc.$&#123;#calendars.monthName(date)&#125; // also arrayMonthName(...), listMonthName(...), etc.$&#123;#calendars.monthNameShort(date)&#125; // also arrayMonthNameShort(...), listMonthNameShort(...), etc.$&#123;#calendars.year(date)&#125; // also arrayYear(...), listYear(...), etc.$&#123;#calendars.dayOfWeek(date)&#125; // also arrayDayOfWeek(...), listDayOfWeek(...), etc.$&#123;#calendars.dayOfWeekName(date)&#125; // also arrayDayOfWeekName(...), listDayOfWeekName(...), etc.$&#123;#calendars.dayOfWeekNameShort(date)&#125; // also arrayDayOfWeekNameShort(...), listDayOfWeekNameShort(...), etc.$&#123;#calendars.hour(date)&#125; // also arrayHour(...), listHour(...), etc.$&#123;#calendars.minute(date)&#125; // also arrayMinute(...), listMinute(...), etc.$&#123;#calendars.second(date)&#125; // also arraySecond(...), listSecond(...), etc.$&#123;#calendars.millisecond(date)&#125; // also arrayMillisecond(...), listMillisecond(...), etc./* * Create calendar (java.util.Calendar) objects from its components */$&#123;#calendars.create(year,month,day)&#125;$&#123;#calendars.create(year,month,day,hour,minute)&#125;$&#123;#calendars.create(year,month,day,hour,minute,second)&#125;$&#123;#calendars.create(year,month,day,hour,minute,second,millisecond)&#125;$&#123;#calendars.createForTimeZone(year,month,day,timeZone)&#125;$&#123;#calendars.createForTimeZone(year,month,day,hour,minute,timeZone)&#125;$&#123;#calendars.createForTimeZone(year,month,day,hour,minute,second,timeZone)&#125;$&#123;#calendars.createForTimeZone(year,month,day,hour,minute,second,millisecond,timeZone)&#125;/* * Create a calendar (java.util.Calendar) object for the current date and time */$&#123;#calendars.createNow()&#125;$&#123;#calendars.createNowForTimeZone()&#125;/* * Create a calendar (java.util.Calendar) object for the current date (time set to 00:00) */$&#123;#calendars.createToday()&#125;$&#123;#calendars.createTodayForTimeZone()&#125; æ•°å­— #numbersï¼šæ•°å­—å¯¹è±¡çš„å®žç”¨æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Numbers * ====================================================================== *//* * ========================== * Formatting integer numbers * ========================== *//* * Set minimum integer digits. * Also works with arrays, lists or sets */$&#123;#numbers.formatInteger(num,3)&#125;$&#123;#numbers.arrayFormatInteger(numArray,3)&#125;$&#123;#numbers.listFormatInteger(numList,3)&#125;$&#123;#numbers.setFormatInteger(numSet,3)&#125;/* * Set minimum integer digits and thousands separator: * 'POINT', 'COMMA', 'WHITESPACE', 'NONE' or 'DEFAULT' (by locale). * Also works with arrays, lists or sets */$&#123;#numbers.formatInteger(num,3,'POINT')&#125;$&#123;#numbers.arrayFormatInteger(numArray,3,'POINT')&#125;$&#123;#numbers.listFormatInteger(numList,3,'POINT')&#125;$&#123;#numbers.setFormatInteger(numSet,3,'POINT')&#125;/* * ========================== * Formatting decimal numbers * ========================== *//* * Set minimum integer digits and (exact) decimal digits. * Also works with arrays, lists or sets */$&#123;#numbers.formatDecimal(num,3,2)&#125;$&#123;#numbers.arrayFormatDecimal(numArray,3,2)&#125;$&#123;#numbers.listFormatDecimal(numList,3,2)&#125;$&#123;#numbers.setFormatDecimal(numSet,3,2)&#125;/* * Set minimum integer digits and (exact) decimal digits, and also decimal separator. * Also works with arrays, lists or sets */$&#123;#numbers.formatDecimal(num,3,2,'COMMA')&#125;$&#123;#numbers.arrayFormatDecimal(numArray,3,2,'COMMA')&#125;$&#123;#numbers.listFormatDecimal(numList,3,2,'COMMA')&#125;$&#123;#numbers.setFormatDecimal(numSet,3,2,'COMMA')&#125;/* * Set minimum integer digits and (exact) decimal digits, and also thousands and * decimal separator. * Also works with arrays, lists or sets */$&#123;#numbers.formatDecimal(num,3,'POINT',2,'COMMA')&#125;$&#123;#numbers.arrayFormatDecimal(numArray,3,'POINT',2,'COMMA')&#125;$&#123;#numbers.listFormatDecimal(numList,3,'POINT',2,'COMMA')&#125;$&#123;#numbers.setFormatDecimal(numSet,3,'POINT',2,'COMMA')&#125;/* * ===================== * Formatting currencies * ===================== */$&#123;#numbers.formatCurrency(num)&#125;$&#123;#numbers.arrayFormatCurrency(numArray)&#125;$&#123;#numbers.listFormatCurrency(numList)&#125;$&#123;#numbers.setFormatCurrency(numSet)&#125;/* * ====================== * Formatting percentages * ====================== */$&#123;#numbers.formatPercent(num)&#125;$&#123;#numbers.arrayFormatPercent(numArray)&#125;$&#123;#numbers.listFormatPercent(numList)&#125;$&#123;#numbers.setFormatPercent(numSet)&#125;/* * Set minimum integer digits and (exact) decimal digits. */$&#123;#numbers.formatPercent(num, 3, 2)&#125;$&#123;#numbers.arrayFormatPercent(numArray, 3, 2)&#125;$&#123;#numbers.listFormatPercent(numList, 3, 2)&#125;$&#123;#numbers.setFormatPercent(numSet, 3, 2)&#125;/* * =============== * Utility methods * =============== *//* * Create a sequence (array) of integer numbers going * from x to y */$&#123;#numbers.sequence(from,to)&#125;$&#123;#numbers.sequence(from,to,step)&#125; å­—ç¬¦ä¸² #stringsï¼šStringå¯¹è±¡çš„å®žç”¨æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Strings * ====================================================================== *//* * Null-safe toString() */$&#123;#strings.toString(obj)&#125; // also array*, list* and set*/* * Check whether a String is empty (or null). Performs a trim() operation before check * Also works with arrays, lists or sets */$&#123;#strings.isEmpty(name)&#125;$&#123;#strings.arrayIsEmpty(nameArr)&#125;$&#123;#strings.listIsEmpty(nameList)&#125;$&#123;#strings.setIsEmpty(nameSet)&#125;/* * Perform an 'isEmpty()' check on a string and return it if false, defaulting to * another specified string if true. * Also works with arrays, lists or sets */$&#123;#strings.defaultString(text,default)&#125;$&#123;#strings.arrayDefaultString(textArr,default)&#125;$&#123;#strings.listDefaultString(textList,default)&#125;$&#123;#strings.setDefaultString(textSet,default)&#125;/* * Check whether a fragment is contained in a String * Also works with arrays, lists or sets */$&#123;#strings.contains(name,'ez')&#125; // also array*, list* and set*$&#123;#strings.containsIgnoreCase(name,'ez')&#125; // also array*, list* and set*/* * Check whether a String starts or ends with a fragment * Also works with arrays, lists or sets */$&#123;#strings.startsWith(name,'Don')&#125; // also array*, list* and set*$&#123;#strings.endsWith(name,endingFragment)&#125; // also array*, list* and set*/* * Substring-related operations * Also works with arrays, lists or sets */$&#123;#strings.indexOf(name,frag)&#125; // also array*, list* and set*$&#123;#strings.substring(name,3,5)&#125; // also array*, list* and set*$&#123;#strings.substringAfter(name,prefix)&#125; // also array*, list* and set*$&#123;#strings.substringBefore(name,suffix)&#125; // also array*, list* and set*$&#123;#strings.replace(name,'las','ler')&#125; // also array*, list* and set*/* * Append and prepend * Also works with arrays, lists or sets */$&#123;#strings.prepend(str,prefix)&#125; // also array*, list* and set*$&#123;#strings.append(str,suffix)&#125; // also array*, list* and set*/* * Change case * Also works with arrays, lists or sets */$&#123;#strings.toUpperCase(name)&#125; // also array*, list* and set*$&#123;#strings.toLowerCase(name)&#125; // also array*, list* and set*/* * Split and join */$&#123;#strings.arrayJoin(namesArray,',')&#125;$&#123;#strings.listJoin(namesList,',')&#125;$&#123;#strings.setJoin(namesSet,',')&#125;$&#123;#strings.arraySplit(namesStr,',')&#125; // returns String[]$&#123;#strings.listSplit(namesStr,',')&#125; // returns List&lt;String&gt;$&#123;#strings.setSplit(namesStr,',')&#125; // returns Set&lt;String&gt;/* * Trim * Also works with arrays, lists or sets */$&#123;#strings.trim(str)&#125; // also array*, list* and set*/* * Compute length * Also works with arrays, lists or sets */$&#123;#strings.length(str)&#125; // also array*, list* and set*/* * Abbreviate text making it have a maximum size of n. If text is bigger, it * will be clipped and finished in "..." * Also works with arrays, lists or sets */$&#123;#strings.abbreviate(str,10)&#125; // also array*, list* and set*/* * Convert the first character to upper-case (and vice-versa) */$&#123;#strings.capitalize(str)&#125; // also array*, list* and set*$&#123;#strings.unCapitalize(str)&#125; // also array*, list* and set*/* * Convert the first character of every word to upper-case */$&#123;#strings.capitalizeWords(str)&#125; // also array*, list* and set*$&#123;#strings.capitalizeWords(str,delimiters)&#125; // also array*, list* and set*/* * Escape the string */$&#123;#strings.escapeXml(str)&#125; // also array*, list* and set*$&#123;#strings.escapeJava(str)&#125; // also array*, list* and set*$&#123;#strings.escapeJavaScript(str)&#125; // also array*, list* and set*$&#123;#strings.unescapeJava(str)&#125; // also array*, list* and set*$&#123;#strings.unescapeJavaScript(str)&#125; // also array*, list* and set*/* * Null-safe comparison and concatenation */$&#123;#strings.equals(first, second)&#125;$&#123;#strings.equalsIgnoreCase(first, second)&#125;$&#123;#strings.concat(values...)&#125;$&#123;#strings.concatReplaceNulls(nullValue, values...)&#125;/* * Random */$&#123;#strings.randomAlphanumeric(count)&#125; å¯¹è±¡ #objectsï¼šä¸€èˆ¬å¯¹è±¡çš„å®žç”¨ç¨‹åºæ–¹æ³• 1234567891011121314/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Objects * ====================================================================== *//* * Return obj if it is not null, and default otherwise * Also works with arrays, lists or sets */$&#123;#objects.nullSafe(obj,default)&#125;$&#123;#objects.arrayNullSafe(objArray,default)&#125;$&#123;#objects.listNullSafe(objList,default)&#125;$&#123;#objects.setNullSafe(objSet,default)&#125; å¸ƒå°” #boolsï¼šå¸ƒå°”è¯„ä¼°çš„å®žç”¨ç¨‹åºæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Bools * ====================================================================== *//* * Evaluate a condition in the same way that it would be evaluated in a th:if tag * (see conditional evaluation chapter afterwards). * Also works with arrays, lists or sets */$&#123;#bools.isTrue(obj)&#125;$&#123;#bools.arrayIsTrue(objArray)&#125;$&#123;#bools.listIsTrue(objList)&#125;$&#123;#bools.setIsTrue(objSet)&#125;/* * Evaluate with negation * Also works with arrays, lists or sets */$&#123;#bools.isFalse(cond)&#125;$&#123;#bools.arrayIsFalse(condArray)&#125;$&#123;#bools.listIsFalse(condList)&#125;$&#123;#bools.setIsFalse(condSet)&#125;/* * Evaluate and apply AND operator * Receive an array, a list or a set as parameter */$&#123;#bools.arrayAnd(condArray)&#125;$&#123;#bools.listAnd(condList)&#125;$&#123;#bools.setAnd(condSet)&#125;/* * Evaluate and apply OR operator * Receive an array, a list or a set as parameter */$&#123;#bools.arrayOr(condArray)&#125;$&#123;#bools.listOr(condList)&#125;$&#123;#bools.setOr(condSet)&#125; é›†åˆç±»åž‹æ•°ç»„ #arraysï¼šæ•°ç»„çš„å®žç”¨ç¨‹åºæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Arrays * ====================================================================== *//* * Converts to array, trying to infer array component class. * Note that if resulting array is empty, or if the elements * of the target object are not all of the same class, * this method will return Object[]. */$&#123;#arrays.toArray(object)&#125;/* * Convert to arrays of the specified component class. */$&#123;#arrays.toStringArray(object)&#125;$&#123;#arrays.toIntegerArray(object)&#125;$&#123;#arrays.toLongArray(object)&#125;$&#123;#arrays.toDoubleArray(object)&#125;$&#123;#arrays.toFloatArray(object)&#125;$&#123;#arrays.toBooleanArray(object)&#125;/* * Compute length */$&#123;#arrays.length(array)&#125;/* * Check whether array is empty */$&#123;#arrays.isEmpty(array)&#125;/* * Check if element or elements are contained in array */$&#123;#arrays.contains(array, element)&#125;$&#123;#arrays.containsAll(array, elements)&#125; List #listsï¼šåˆ—è¡¨çš„å®žç”¨ç¨‹åºæ–¹æ³• 123456789101112131415161718192021222324252627282930313233/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Lists * ====================================================================== *//* * Converts to list */$&#123;#lists.toList(object)&#125;/* * Compute size */$&#123;#lists.size(list)&#125;/* * Check whether list is empty */$&#123;#lists.isEmpty(list)&#125;/* * Check if element or elements are contained in list */$&#123;#lists.contains(list, element)&#125;$&#123;#lists.containsAll(list, elements)&#125;/* * Sort a copy of the given list. The members of the list must implement * comparable or you must define a comparator. */$&#123;#lists.sort(list)&#125;$&#123;#lists.sort(list, comparator)&#125; Set #setsï¼šé›†åˆçš„å®žç”¨ç¨‹åºæ–¹æ³• 1234567891011121314151617181920212223242526/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Sets * ====================================================================== *//* * Converts to set */$&#123;#sets.toSet(object)&#125;/* * Compute size */$&#123;#sets.size(set)&#125;/* * Check whether set is empty */$&#123;#sets.isEmpty(set)&#125;/* * Check if element or elements are contained in set */$&#123;#sets.contains(set, element)&#125;$&#123;#sets.containsAll(set, elements)&#125; Map #mapsï¼šåœ°å›¾çš„å®žç”¨ç¨‹åºæ–¹æ³• 1234567891011121314151617181920212223/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Maps * ====================================================================== *//* * Compute size */$&#123;#maps.size(map)&#125;/* * Check whether map is empty */$&#123;#maps.isEmpty(map)&#125;/* * Check if key/s or value/s are contained in maps */$&#123;#maps.containsKey(map, key)&#125;$&#123;#maps.containsAllKeys(map, keys)&#125;$&#123;#maps.containsValue(map, value)&#125;$&#123;#maps.containsAllValues(map, value)&#125; é›†åˆæ“ä½œ #aggregatesï¼šç”¨äºŽåœ¨æ•°ç»„æˆ–é›†åˆä¸Šåˆ›å»ºèšåˆçš„å®žç”¨ç¨‹åºæ–¹æ³• 1234567891011121314151617/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Aggregates * ====================================================================== *//* * Compute sum. Returns null if array or collection is empty */$&#123;#aggregates.sum(array)&#125;$&#123;#aggregates.sum(collection)&#125;/* * Compute average. Returns null if array or collection is empty */$&#123;#aggregates.avg(array)&#125;$&#123;#aggregates.avg(collection)&#125; æ ‡è¯† #idsï¼šç”¨äºŽå¤„ç†idå¯èƒ½é‡å¤çš„å±žæ€§çš„å®žç”¨ç¨‹åºæ–¹æ³•ï¼ˆä¾‹å¦‚ï¼Œä½œä¸ºè¿­ä»£çš„ç»“æžœï¼‰ã€‚ 12345678910111213141516171819202122/* * ====================================================================== * See javadoc API for class org.thymeleaf.expression.Ids * ====================================================================== *//* * Normally used in th:id attributes, for appending a counter to the id attribute value * so that it remains unique even when involved in an iteration process. */$&#123;#ids.seq('someId')&#125;/* * Normally used in th:for attributes in &lt;label&gt; tags, so that these labels can refer to Ids * generated by means if the #ids.seq(...) function. * * Depending on whether the &lt;label&gt; goes before or after the element with the #ids.seq(...) * function, the "next" (label goes before "seq") or the "prev" function (label goes after * "seq") function should be called. */$&#123;#ids.next('someId')&#125;$&#123;#ids.prev('someId')&#125;]]></content>
      <categories>
        <category>â‘¤ é™„å½•</category>
      </categories>
      <tags>
        <tag>Thymeleaf</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆThymeleaf]]></title>
    <url>%2F2018%2F12%2F25%2F%E6%B5%85%E8%B0%88Thymeleaf%2F</url>
    <content type="text"><![CDATA[Thymeleaf æ˜¯ä¸€ä¸ªè·Ÿ FreeMarkerã€Velocity ç±»ä¼¼çš„æ¨¡æ¿å¼•æ“Žï¼Œæ˜¯ Spring æ‰€æŽ¨èçš„æ¨¡æ¿æŠ€æœ¯ ã€‚ Thymeleaf å¼•ä»¥ä¸ºå‚²çš„ç‰¹æ€§æ˜¯ è‡ªç„¶æ¨¡æ¿ï¼ˆnatural templatingï¼‰ ï¼Œå³ç”±äºŽä¸»è¦è¯­æ³•åŸºäºŽæ ‡ç­¾å±žæ€§ç­‰ï¼Œä½¿å¾—æ¨¡æ¿å¯ä»¥ç›´æŽ¥åœ¨é™æ€çŽ¯å¢ƒæ˜¾ç¤ºæ­£å¸¸ã€‚ æœ¬æ–‡å†…å®¹åŸºäºŽ Thymeleaf3.0 ã€‚ Thymeleafæ–‡æ¡£ ä½¿ç”¨Thymeleaf Thymeleaf+Spring æœ¬æ–‡å†…å®¹åªåŸºäºŽ htmlæ¨¡æ¿ ï¼Œè™½ç„¶Thymeleaf æä¾›äº†æ–‡æœ¬æ¨¡æ¿æ¨¡å¼ï¼ˆTextual template modesï¼‰ï¼Œä½¿å…¶å¯ä»¥ä½œç”¨äºŽ .js å’Œ .css ï¼Œä½†æ˜¯è¿™é‡Œä¸ä¼šæ¶‰åŠã€‚ æ–¹è¨€å’Œå±žæ€§ä¿®æ”¹å™¨æ–¹è¨€ Thymeleaf é›†æˆåŒ…å®šä¹‰äº†ä¸€ç§ æ ‡å‡†æ–¹è¨€ ï¼ˆ SpringStandard Dialect ï¼‰ï¼Œå…¶å…¼å®¹äº† Spring EL ï¼Œè€Œ Spring EL åŸºæœ¬å’Œ OGNL ç›¸åŒï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ååˆ†å‹å¥½ã€‚ å±žæ€§ä¿®æ”¹å™¨ æ ‡å‡†æ–¹è¨€çš„å¤šæ•°å¤„ç†å™¨éƒ½æ˜¯å±žæ€§å¤„ç†å™¨ï¼ŒThymeleaf å¯ä»¥ä½¿ç”¨ä¸¤ç§å±žæ€§ä¿®æ”¹å™¨è¯­æ³• ï¼š å±žæ€§ä¿®æ”¹å™¨è¯­æ³• è¯´æ˜Ž ç¤ºä¾‹ th:* å‘½åç©ºé—´è¯­æ³•ã€‚ &lt;input th:value=&quot;${username}&quot;&gt; data-{prefix}-{name} html5è‡ªå®šä¹‰å±žæ€§è¯­æ³•ã€‚ &lt;input data-th-value=&quot;${username}&quot;&gt; ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨è¿™ç§è¯­æ³•æ˜¯å¯ä»¥ç›´æŽ¥åœ¨æµè§ˆå™¨æ‰“å¼€çš„ï¼ˆæµè§ˆå™¨ä¼šå¿½ç•¥ä¸å¯è¯†åˆ«çš„å±žæ€§ï¼‰ï¼Œæ‰€ä»¥ Thymeleaf æ˜¯ è‡ªç„¶æ¨¡æ¿ ã€‚ä½†å®žé™…ä¸Š th:* å¹¶ä¸ç¬¦åˆ HTML5 è§„èŒƒï¼ŒIDEè¿˜æ˜¯ä¼šæç¤ºé”™è¯¯ã€‚å¯ä»¥ä½¿ç”¨å¼•å…¥ä»¥ä¸‹ xmlns å‘½åç©ºé—´å®šä¹‰ï¼š 1&lt;html xmlns:th="http://www.thymeleaf.org"&gt; å¯ä»¥çœ‹å‡º data-th-* ç›¸è¾ƒ th:* å¯¹ HTML5 æ›´åŠ å‹å¥½ï¼Œä¸¤ç§æ–¹å¼éƒ½é€‚ç”¨HTML5çš„å„ç§å±žæ€§ã€‚ ä½†å®žé™…ä¸Š data-th-* åªæ˜¯å¯¹ th:* çš„è¡¥å……ï¼Œå®˜æ–¹ç¤ºä¾‹æŽ¨å´‡ th:* è¯­æ³•ã€‚ å…¶å®žè¿˜æœ‰å¦ä¸€ç§è¯­æ³•ï¼š{prefix}:{name} æˆ– {prefix}-{name} ï¼Œå…¶å¯ä»¥æŒ‡å®šè‡ªå®šä¹‰æ ‡ç­¾ã€‚ ä¾‹å¦‚ï¼š å¯ä»¥ä½¿ç”¨ th:block æˆ– th-block å…ƒç´ ï¼Œæ¥è¡¨ç¤ºè‡ªå®šä¹‰æ ‡ç­¾ã€‚ æ ‡å‡†è¡¨è¾¾å¼è¯­æ³•åœ¨å±žæ€§ä¿®æ”¹å™¨ä¸­å¯ä»¥ä½¿ç”¨ä¸€äº›æ ‡å‡†è¡¨è¾¾å¼æ˜¯è¯­æ³•ã€‚ åœ¨å¤§æ‹¬å·å¤–é¢çš„æ•°æ®ç”±Thymeleafæ¥å¤„ç†ã€‚è€Œåœ¨å¤§æ‹¬å·å†…å†™çš„ï¼Œå°†ç”±OGNL / SpringELå¼•æ“Žè´Ÿè´£ã€‚ æ¶‰åŠä¸€è§ˆ è¯´æ˜Ž ${...} å˜é‡è¡¨è¾¾å¼ *{...} é€‰æ‹©å˜é‡è¡¨è¾¾å¼ #{...} æ¶ˆæ¯è¡¨è¾¾å¼ @{...} URL é“¾æŽ¥è¡¨è¾¾å¼ å˜é‡è¡¨è¾¾å¼é€šè¿‡ ${...} å¯ä»¥ä»Ž context ä¸­èŽ·å–å˜é‡ã€‚ ä½¿ç”¨ . æˆ–è€… [] è®¿é—®å±žæ€§ï¼Œç›¸å½“äºŽè°ƒç”¨ getter ã€‚ 123$&#123;person.father.name&#125;$&#123;person['father']['name']&#125; å¯¹äºŽ Mapå¯¹è±¡ï¼Œå¦‚ä¸‹ä½¿ç”¨ï¼Œç›¸å½“äºŽ get(...) ã€‚ 123$&#123;countriesByCode.ES&#125;$&#123;personsByName['Stephen Zucchini'].age&#125; å¯¹äºŽ æ•°ç»„ æˆ– é›†åˆ å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•è®¿é—®ã€‚ 1$&#123;personsArray[0].name&#125; ç”šè‡³å¯ä»¥ç›´æŽ¥è°ƒç”¨æ–¹æ³•ã€‚ 123$&#123;person.createCompleteName()&#125;$&#123;person.createCompleteNameWithSeparator('-')&#125; å®žç”¨å¯¹è±¡ï¼ˆExpression Utilityï¼‰Thymeleafå†…ç½®äº†è®¸å¤šå®žç”¨å¯¹è±¡ï¼Œè¿™é‡Œä½¿ç”¨å†…ç½®å·¥å…·ç±»æ ¼å¼åŒ–æ—¥æœŸç±»åž‹ã€‚ é™„å½•Bï¼šè¡¨è¾¾å¼å®žç”¨ç¨‹åºå¯¹è±¡ 123&lt;p&gt; Today is: &lt;span th:text="$&#123;#calendars.format(today,'yyyy-MM-dd')&#125;"&gt;13 May 2018&lt;/span&gt;&lt;/p&gt; é€‰æ‹©è¡¨è¾¾å¼*{...} ä¸€èˆ¬é…åˆ th:object ä½¿ç”¨ï¼Œä¼˜å…ˆä»Žå…¶é€‰å®šçš„å¯¹è±¡ä¸­å–å€¼ï¼Œå½“æ²¡æœ‰th:object æ—¶ï¼Œå…¶ä½œç”¨ç­‰åŒ${...}ã€‚ å½“å¤šæ¬¡ä»Žä¸€ä¸ªå¯¹è±¡ä¸­èŽ·å–å±žæ€§æ—¶ï¼Œå¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š 1234&lt;div th:object="$&#123;session.user&#125;"&gt; &lt;p&gt;Name: &lt;span th:text="*&#123;firstName&#125;"&gt;Sebastian&lt;/span&gt;.&lt;/p&gt; &lt;p&gt;Surname: &lt;span th:text="*&#123;lastName&#125;"&gt;Pepper&lt;/span&gt;.&lt;/p&gt;&lt;/div&gt; å…¶ç­‰åŒäºŽä»¥ä¸‹å†™æ³•ï¼š 1234&lt;div&gt; &lt;p&gt;Name: &lt;span th:text="$&#123;session.user.firstName&#125;"&gt;Sebastian&lt;/span&gt;.&lt;/p&gt; &lt;p&gt;Surname: &lt;span th:text="$&#123;session.user.lastName&#125;"&gt;Pepper&lt;/span&gt;.&lt;/p&gt;&lt;/div&gt; æ¶ˆæ¯è¡¨è¾¾å¼ä½¿ç”¨ #{...} å¯ä»¥ç›´æŽ¥ä½¿ç”¨æ¶ˆæ¯ï¼ˆmessageï¼‰ï¼Œå…¶ä¸€èˆ¬ç”¨äºŽå›½é™…åŒ–ã€‚ é…ç½®å›½é™…åŒ–æ–‡ä»¶ classpath:i18n/messages_zh_CN.properties ã€‚ 1home.welcome=æ¬¢è¿Žæ¥åˆ°æˆ‘ä»¬çš„æ‚è´§åº—ï¼ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¶ˆæ¯ã€‚ 1&lt;p th:utext="#&#123;home.welcome&#125;"&gt;Welcome to our grocery store!&lt;/p&gt; URLé“¾æŽ¥è¡¨è¾¾å¼ä½¿ç”¨ @{...} å¯ä»¥ç”¨äºŽå¤„ç† URLé“¾æŽ¥ã€‚ 12// æœåŠ¡å™¨ä¸­çš„ä¸Šä¸‹æ–‡åç§°å°†è‡ªåŠ¨æ·»åŠ @&#123;/itemdetails&#125; ç‰‡æ®µè¡¨è¾¾å¼ä½¿ç”¨ ~{...} å¯ä»¥å°†æ¨¡æ¿ç‰‡æ®µä½œä¸ºå˜é‡ä½¿ç”¨ï¼Œè¿™ä¸ªä¼šåœ¨è°ˆThymeleaf å¸ƒå±€ï¼ˆ Layout ï¼‰æ—¶å†ä»‹ç» ã€‚ æ ‡å‡†è¡¨è¾¾å¼æ”¯æŒçš„è¯­æ³•å­—é¢ï¼ˆLiteralsï¼‰ å…¶å®žè¿™é‡Œæ˜¯ä»‹ç»æ”¯æŒçš„å„ç§æ•°æ®ç±»åž‹ã€‚ 1234567891011121314151617181920&lt;!-- æ–‡å­— --&gt;&lt;p&gt; Now you are looking at a &lt;span th:text="'working web application'"&gt;template file&lt;/span&gt;.&lt;/p&gt;&lt;!-- æ•°å­— --&gt;&lt;p&gt;The year is &lt;span th:text="2013"&gt;1492&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;In two years, it will be &lt;span th:text="2013 + 2"&gt;1494&lt;/span&gt;.&lt;/p&gt;&lt;!-- å¸ƒå°” --&gt;&lt;!-- Thymeleafå¤„ç† --&gt;&lt;div th:if="$&#123;user.isAdmin()&#125; == false"&gt;&lt;!-- OGNL / SpringELå¼•æ“Žå¤„ç† --&gt;&lt;div th:if="$&#123;user.isAdmin() == false&#125;"&gt;&lt;!-- null --&gt;&lt;div th:if="$&#123;variable.something&#125; == null"&gt;&lt;!-- Token --&gt;// TODO æ–‡æœ¬æ“ä½œï¼ˆText operationsï¼‰è½¬ä¹‰æ–‡æœ¬ ä¸Ž éžè½¬ä¹‰æ–‡æœ¬th:text ä¼šè½¬ä¹‰å…¶ä¸­çš„å†…å®¹ï¼Œè€Œ th:utext åˆ™ä¸ä¼šè½¬ä¹‰ï¼Œè¿™æ›´ä½¿ç”¨äºŽåŒ…å«æ ‡ç­¾ çš„æ–‡æœ¬ã€‚ 1home.welcome=Welcome to our &lt;b&gt;fantastic&lt;/b&gt; grocery store! 123&lt;p th:text="#&#123;home.welcome&#125;"&gt;Welcome to our grocery store!&lt;/p&gt;&lt;!-- è§£æžç»“æžœå¦‚ä¸‹ --&gt;&lt;p&gt;Welcome to our &amp;lt;b&amp;gt;fantastic&amp;lt;/b&amp;gt; grocery store!&lt;/p&gt; 123&lt;p th:utext="#&#123;home.welcome&#125;"&gt;Welcome to our grocery store!&lt;/p&gt;&lt;!-- è§£æžç»“æžœå¦‚ä¸‹ --&gt;&lt;p&gt;Welcome to our &lt;b&gt;fantastic&lt;/b&gt; grocery store!&lt;/p&gt; é™„åŠ æ–‡æœ¬ï¼ˆAppending textsï¼‰æ— è®ºæ˜¯ æ–‡å­— è¿˜æ˜¯ è¯„ä¼°å˜é‡ æˆ– æ¶ˆæ¯è¡¨è¾¾å¼çš„ç»“æžœ ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ + è¿ç®—ç¬¦è½»æ¾é™„åŠ ï¼š 1&lt;span th:text="'The name of the user is ' + $&#123;user.name&#125;"&gt; å­—é¢æ›¿æ¢ï¼ˆLiteral substitutionsï¼‰å½“éœ€è¦å°†å˜é‡å€¼åŒ…å«åˆ°å­—ç¬¦ä¸²ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å­—é¢æ›¿æ¢ï¼Œè€Œä¸æ˜¯ç”¨ + é™„åŠ æ–‡æœ¬ã€‚ 1&lt;span th:text="|Welcome to our application, $&#123;user.name&#125;!|"&gt; è¿ç®—ç®—æœ¯è¿ç®—ä¸€äº›ç®—æœ¯è¿ç®—ä¹Ÿå¯ç”¨ï¼š + ï¼Œ - ï¼Œ * ï¼Œ / ï¼Œ % ã€‚ 1&lt;div th:with="isEven=($&#123;prodStat.count&#125; % 2 == 0)"&gt; æ¯”è¾ƒè¿ç®—åœ¨æ ‡ç­¾è¯­è¨€ä¸­éœ€è¦å¯¹ &lt; å’Œ &gt; è¿›è¡Œè½¬ä¹‰ï¼Œè€Œ Thymeleaf è¿˜æ”¯æŒåˆ«åã€‚ æ¯”è¾ƒè¿ç®—ç¬¦ åˆ«å &gt; gt &lt; lt &gt;= ge &lt;= le ! not == eq != neq / ne 1234&lt;div th:if="$&#123;prodStat.count&#125; gt 1"&gt;&lt;!-- ç­‰åŒäºŽ --&gt;&lt;div th:if="$&#123;prodStat.count&#125; &amp;gt; 1"&gt; æ¡ä»¶è¿ç®—å±žæ€§ä¿®æ”¹å™¨ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦ï¼š condition ? then : else ã€‚ else å¯ä»¥çœç•¥ï¼Œå³ condition ? then ï¼Œè‹¥æ¡ä»¶ä¸º false ï¼Œåˆ™è¿”å›ž nullå€¼ã€‚ 123&lt;tr th:class="$&#123;row.first&#125;? 'first' : 'even'"&gt; ...&lt;/tr&gt; é»˜è®¤å€¼ï¼ˆElvisè¿ç®—ç¬¦ï¼‰ Elvisè¿ç®—ç¬¦ ç±»ä¼¼ æ¡ä»¶è¿ç®— çš„å˜ç§ï¼Œå¯ä»¥åœ¨å–å€¼ä¸º null æ—¶ï¼Œæä¾›é»˜è®¤å€¼ã€‚ 1234&lt;p&gt;Age: &lt;span th:text="&#123;age&#125;?:'(no age specified)'"&gt;27&lt;/span&gt;.&lt;/p&gt;&lt;!-- ç›¸å½“äºŽ --&gt;&lt;p&gt;Age: &lt;span th:text="&#123;age != null&#125;? &#123;age&#125; : '(no age specified)'"&gt;27&lt;/span&gt;.&lt;/p&gt; æ— æ“ä½œä»¤ç‰Œ å¸Œæœ›åŽŸæ–‡æœ¬ä¸ºé»˜è®¤å€¼ï¼Œå¯ä»¥ä½¿ç”¨ _ ä»£æ›¿ã€‚ 1234&lt;span th:text="$&#123;user.name&#125; ?: _"&gt;no user authenticated&lt;/span&gt;&lt;!-- ç›¸å½“äºŽ --&gt;&lt;span th:text="$&#123;user.name&#125; ?: 'no user authenticated'"&gt;no user authenticated&lt;/span&gt; è¿­ä»£å½“éœ€è¦å¯¹é›†åˆè¿›è¡Œå¾ªçŽ¯éåŽ†æ˜¯å¯ä»¥ä½¿ç”¨ th:each ã€‚ ä¸æ˜¾ç¤ºè®¾ç½®è¿­ä»£çŠ¶æ€å˜é‡ï¼Œåˆ™é»˜è®¤ä¸º è¿­ä»£å˜é‡ + Stat ï¼Œå³ prodStat ã€‚ 12345678910&lt;table&gt; &lt;tr&gt; &lt;th&gt;NAME&lt;/th&gt; &lt;th&gt;PRICE&lt;/th&gt; &lt;/tr&gt; &lt;tr th:each="prod : $&#123;prods&#125;"&gt; &lt;td th:text="$&#123;prod.name&#125;"&gt;Onions&lt;/td&gt; &lt;td th:text="$&#123;prod.price&#125;"&gt;2.41&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; å¯ä»¥æ˜¾ç¤ºè®¾ç½®è¿­ä»£çŠ¶æ€å˜é‡ iterStat ï¼Œå¦‚ä¸‹å¯ä»¥æŽ§åˆ¶å¥‡æ•°è¡Œæ ·å¼ã€‚ 12345678910&lt;table&gt; &lt;tr&gt; &lt;th&gt;NAME&lt;/th&gt; &lt;th&gt;PRICE&lt;/th&gt; &lt;/tr&gt; &lt;tr th:each="item, iterStat : $&#123;list&#125;" th:class="$&#123;iterStat.odd&#125;? 'odd'"&gt; &lt;td th:text="$&#123;item.name&#125;"&gt;Onions&lt;/td&gt; &lt;td th:text="$&#123;item.price&#125;"&gt;2.41&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; è¿­ä»£çŠ¶æ€å˜é‡ çŠ¶æ€å˜é‡åœ¨ th:each å±žæ€§ä¸­å®šä¹‰ï¼ŒåŒ…å«ä»¥ä¸‹æ•°æ®ã€‚ è¿­ä»£å˜é‡å±žæ€§ è¯´æ˜Ž index å½“å‰è¿­ä»£ç´¢å¼•ï¼Œä»Ž0å¼€å§‹ã€‚ count å½“å‰è¿­ä»£ç´¢å¼•ï¼Œä»Ž1å¼€å§‹ã€‚ size è¿­ä»£å˜é‡ä¸­å…ƒç´ çš„æ€»é‡ã€‚ current æ¯æ¬¡è¿­ä»£çš„iterå˜é‡ã€‚ even / odd å½“å‰è¿­ä»£æ˜¯å¦æ˜¯å¶æ•°ã€å¥‡æ•°ï¼Œå¸ƒå°”å±žæ€§ã€‚ first å½“å‰è¿­ä»£æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªè¿­ä»£ã€‚ last å½“å‰è¿­ä»£æ˜¯å¦æ˜¯æœ€åŽä¸€æ¬¡ã€‚ æ¡ä»¶ æ³¨æ„ï¼š æ¡ä»¶ä¸ä»…åˆ¤æ–­ å¸ƒå°”å€¼ï¼Œè¿˜æœ‰å¦‚ä¸‹æ‰©å±•ã€‚ å¦‚æžœvalueä¸ä¸ºnullï¼Œä¸”ä¸ºä»¥ä¸‹å€¼åˆ™è§†ä¸º true ï¼Œåä¹‹è§†ä¸º falseã€‚ å¦‚æžœvalueæ˜¯å¸ƒå°”å€¼ï¼Œä¸”ä¸ºtrueã€‚ å¦‚æžœvalueæ˜¯æ•°å­—ä¸”ä¸ä¸ºé›¶ã€‚ å¦‚æžœvalueæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸”ä¸ä¸ºé›¶ã€‚ å¦‚æžœvalueæ˜¯Stringå¹¶ä¸”ä¸æ˜¯â€œfalseâ€ï¼Œâ€œoffâ€æˆ–â€œnoâ€ã€‚ å¦‚æžœvalueä¸æ˜¯å¸ƒå°”å€¼ï¼Œæ•°å­—ï¼Œå­—ç¬¦æˆ–å­—ç¬¦ä¸²ã€‚ å¦‚æžœvalueä¸ºnullï¼Œåˆ™thï¼šifå°†è®¡ç®—ä¸º false ã€‚ th:if 12&lt;a href="comments.html" th:if="$&#123;#lists.isEmpty(prod.comments)&#125;"&gt;view&lt;/a&gt; th:unless th:unless æ„ä¸ºé™¤éžï¼Œä¸Ž if ç›¸åï¼Œ æ¯”ä½¿ç”¨ not æ›´åŠ å‹å¥½ã€‚ 123456&lt;a href="comments.html" th:unless="$&#123;#lists.isEmpty(prod.comments)&#125;"&gt;view&lt;/a&gt;&lt;!-- ç­‰åŒäºŽ --&gt;&lt;a href="comments.html" th:if="$&#123;not #lists.isEmpty(prod.comments)&#125;"&gt;view&lt;/a&gt; æ³¨é‡Šå¯ä»¥çœ‹å‡ºåœ¨æ³¨é‡Šæ–¹é¢ï¼ŒThymeleaf ä¹Ÿå…·æœ‰å¾ˆå°çš„ä¾µå…¥æ€§ï¼Œå®Œç¾Žèžå…¥HTMLã€‚ æ¶‰åŠä¸€è§ˆ è¯´æ˜Ž &lt;!-- -- &gt; hmtlæ³¨é‡Š &lt;!--/* */-- &gt; è§£æžå™¨çº§æ³¨é‡Š &lt;!--/*/ /*/-- &gt; åŽŸåž‹æ³¨é‡Š æ ‡å‡†HTML / XMLæ³¨é‡ŠThymeleaf å…¼å®¹ htmlæ³¨é‡Šï¼Œå…¶å†…å®¹ä¸ä¼šè¢«è§£æžã€‚ 1234&lt;!-- User info follows --&gt;&lt;div th:text="$&#123;...&#125;"&gt; ...&lt;/div&gt; è§£æžå™¨çº§æ³¨é‡Šåœ¨è§£æžçš„ï¼Œç›´æŽ¥åˆ é™¤ &lt;!--/* */-- &gt; åŠå…¶ä¸­å†…å®¹ã€‚ 1&lt;!--/* This code will be removed at Thymeleaf parsing time! */--&gt; åŽŸåž‹æ³¨é‡Šåœ¨è§£æžå®ŒæˆåŽï¼Œåˆ é™¤ &lt;!--/*/ /*/-- &gt; ï¼Œé‡Šæ”¾å…¶ä¸­å†…å®¹ã€‚ 12345&lt;!--/*/ &lt;div th:text="$&#123;...&#125;"&gt; ... &lt;/div&gt;/*/--&gt; å…ƒç´ å¤„ç†å™¨Thymeleafæ ‡å‡†æ–¹è¨€ä¸­åŒ…å«äº†å”¯ä¸€çš„å…ƒç´ å¤„ç†å™¨ï¼ˆä¸æ˜¯å±žæ€§ï¼‰ï¼Œå³th:blockã€‚ th:blockæ˜¯ä¸€ä¸ªçº¯ç²¹çš„å±žæ€§å®¹å™¨ï¼Œå…è®¸æ¨¡æ¿å¼€å‘äººå‘˜æŒ‡å®šä»–ä»¬æƒ³è¦çš„ä»»ä½•å±žæ€§ã€‚Thymeleafå°†æ‰§è¡Œè¿™äº›å±žæ€§ï¼Œç„¶åŽç®€å•åœ°ä½¿å—ï¼Œè€Œä¸ä½¿å®ƒçš„å†…å®¹æ¶ˆå¤±ã€‚ å› æ­¤ï¼Œåœ¨åˆ›å»º &lt;tr&gt; æ¯ä¸ªå…ƒç´ éœ€è¦å¤šä¸ªè¿­ä»£è¡¨æ—¶ï¼Œå®ƒå¯èƒ½å¾ˆæœ‰ç”¨ï¼Œä¸”å½“ä¸Žä»…åŽŸåž‹æ³¨é‡Šå—ç»“åˆä½¿ç”¨æ—¶å°¤å…¶æœ‰ç”¨ï¼š 1234567891011&lt;table&gt; &lt;!--/*/ &lt;th:block th:each="user : $&#123;users&#125;"&gt; /*/--&gt; &lt;tr&gt; &lt;td th:text="$&#123;user.login&#125;"&gt;...&lt;/td&gt; &lt;td th:text="$&#123;user.name&#125;"&gt;...&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td colspan="2" th:text="$&#123;user.address&#125;"&gt;...&lt;/td&gt; &lt;/tr&gt; &lt;!--/*/ &lt;/th:block&gt; /*/--&gt;&lt;/table&gt; å†…è”åœ¨ htmlæ¨¡æ¿ä¸­ï¼Œä¸ç›´æŽ¥åŸºäºŽæ ‡ç­¾ï¼Œè€Œå°† Thymeleaf èžå…¥åˆ°åˆ° html ï¼ŒjavaScript ï¼Œ css ä¸­ã€‚ æ¶‰åŠä¸€è§ˆ è¯´æ˜Ž [[]] è½¬ä¹‰è¡¨è¾¾å¼ [()] éžè½¬ä¹‰è¡¨è¾¾å¼ /*[[]]*/ è‡ªç„¶æ¨¡æ¿ HTML å†…è”è¡¨è¾¾å†…è” ä½†åœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½æ›´å–œæ¬¢å°†è¡¨è¾¾å¼ç›´æŽ¥å†™å…¥HTMLæ–‡æœ¬ï¼Œè¿™æ˜¯å¯ä»¥ä½¿ç”¨å†…è”è¡¨è¾¾å¼ [[]] æˆ– [()] ã€‚ æ³¨æ„ ï¼šè™½ç„¶çœ‹ä¸ŠåŽ»ä¼šæ›´ç®€æ´ï¼Œä½† Thymeleafè¡¨è¾¾å¼ ä¼šç›´æŽ¥å±•ç¤ºåœ¨é™æ€çŽ¯å¢ƒä¸­ï¼Œä¸åˆ©äºŽåŽŸåž‹è®¾è®¡ã€‚ 1234&lt;p&gt;Hello, [[$&#123;session.user.name&#125;]]!&lt;/p&gt;&lt;!-- ç­‰åŒäºŽ --&gt;&lt;p&gt;Hello, &lt;span th:text="$&#123;session.user.name&#125;"&gt;Sebastian&lt;/span&gt;!&lt;/p&gt; 1234&lt;p&gt;Hello, [($&#123;session.user.name&#125;)]!&lt;/p&gt;&lt;!-- ç­‰åŒäºŽ --&gt;&lt;p&gt;Hello, &lt;span th:utext="$&#123;session.user.name&#125;"&gt;Sebastian&lt;/span&gt;!&lt;/p&gt; ç¦ç”¨å†…è” å¯ä»¥çœ‹å‡º [[]] æ ‡è®°ä¼šè¢« Thymeleaf è§£æžï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¹¶ä¸å¥½ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ th:inline=&quot;none&quot; ç¦ç”¨æ­¤æœºåˆ¶ã€‚ 1&lt;p th:inline="none"&gt;A double array looks like this: [[1, 2, 3], [4, 5]]!&lt;/p&gt; JavaScript å†…è”JavaScriptå†…è”ä¸­ä¹Ÿæ”¯æŒ [[]] å’Œ [()] ï¼Œä½†éƒ½ä¸èƒ½ç¡®ä¿å–å€¼ä¸€å®šæ˜¯åˆé€‚çš„åˆæ³•çš„ jså˜é‡ ï¼Œæ‰€ä»¥æŽ¨èä½¿ç”¨ è‡ªç„¶æ¨¡æ¿ ï¼Œå³ /*[[]]*/ ã€‚è‡ªç„¶æ¨¡æ¿ä¹Ÿæ”¯æŒé»˜è®¤å€¼ï¼Œæ‰€ä»¥å¯¹é™æ€çŽ¯å¢ƒæ›´åŠ å‹å¥½ã€‚ å¿…é¡»ä½¿ç”¨ th:inline=&quot;javascript&quot; ä»¥ä¸‹æ–¹å¼æ˜Žç¡®å¯ç”¨JavaScript å†…è”æ¨¡å¼ï¼š 123456&lt;script th:inline="javascript"&gt; ... var username1 = /*[[$&#123;session.user.name&#125;]]*/ ; var username2 = /*[[$&#123;session.user.name&#125;]]*/ "Gertrud Kiwifruit"; ...&lt;/script&gt; CSS å†…è”CSSå†…è”ä¸­åŒæ ·æ”¯æŒ [[]] å’Œ [()] ï¼Œä½†æ›´æŽ¨èè‡ªç„¶æ¨¡æ¿ /*[[]]*/ ã€‚ å¿…é¡»ä½¿ç”¨ th:inline=&quot;css&quot; ä»¥ä¸‹æ–¹å¼æ˜Žç¡®å¯ç”¨csså†…è”æ¨¡å¼ï¼š 12345&lt;style th:inline="css"&gt; .main\ elems &#123; text-align: /*[[$&#123;align&#125;]]*/ left; &#125;&lt;/style&gt;]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Thymeleaf</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆOracleä¹‹SQLä¸­çš„å‡½æ•°ä¸Žè¡¨è¾¾å¼]]></title>
    <url>%2F2018%2F12%2F18%2F%E6%B5%85%E8%B0%88Oracle%E4%B9%8BSQL%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[é’ˆå¯¹ Oracleï¼Œæœ¬æ–‡ä¼šè°ˆä¸€è°ˆï¼Œåœ¨ sql ä¸­å¸¸ä¼šä½¿ç”¨åˆ°çš„å‡½æ•°å’Œè¡¨è¾¾å¼ï¼Œé€‚å½“çš„ä½¿ç”¨å®ƒä»¬ï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆçŽ‡å’Œè´¨é‡ã€‚ æœ¬æ–‡ç¤ºä¾‹å‡ä½¿ç”¨ oracle è‡ªå¸¦çš„ç¤ºä¾‹è¡¨ã€‚ æ¶‰åŠä¸€è§ˆ è¯´æ˜Ž CASE... WHEN... ç±»ä¼¼äºŽ IF/ELSE ã€‚ WITH... AS ç›¸å½“äºŽåˆ›å»ºä¸´æ—¶è¡¨ï¼Œé€‚ç”¨äºŽéœ€è¦é‡å¤å¤„ç†ä¸€ç±»æ•°æ® NVL() / NVL2() NULL å¤„ç†ï¼Œæ­¤æ—¶ç±»ä¼¼ IF/ELSE ã€‚ DECODE() å€¼å¤„ç†ï¼Œæ­¤æ—¶ç±»ä¼¼ IF/ELSE ã€‚ TRUNC() æ—¶é—´æˆªå–å‡½æ•°ã€‚ TO_CHAR() / TO_DATE() æ—¥æœŸç±»åž‹å’Œå­—ç¬¦ä¸²ç±»åž‹è½¬æ¢ã€‚ ROW_NUMBER() OVER ç»„å†…æŽ’åºï¼Œå¹¶ç»™å‡ºæŽ’åºçš„ç¼–å·ã€‚ LISTAGG(...) WITHIN GROUP(...) åˆ—å€¼æ‹¼æŽ¥ï¼Œä¸€èˆ¬é…åˆåˆ†ç»„ä½¿ç”¨ã€‚ START WITH...CONNECT BY PRIOR... å¯¹æ ‘ç»“æž„é€’å½’æŸ¥è¯¢ã€‚ å¸¸ç”¨å‡½æ•°å’Œè¡¨è¾¾å¼CASE... WHEN...ç±»ä¼¼äºŽ IF/ELSE 12345678910111213141516171819-- æ–¹å¼ä¸€select empno as å·¥å·, (CASE ename WHEN 'SMITH' THEN 'å²å¯†æ–¯' WHEN 'ALLEN' THEN 'è‰¾ä¼¦' ELSE ename END) as å§“åfrom emp;-- æ–¹å¼äºŒselect empno as å·¥å·, (CASE WHEN ename='SMITH' THEN 'å²å¯†æ–¯' WHEN ename='ALLEN' THEN 'è‰¾ä¼¦' ELSE ename END) as å§“åfrom emp; WITH... ASç›¸å½“äºŽåˆ›å»ºä¸´æ—¶è¡¨ï¼Œå½“éœ€è¦é‡å¤å¤„ç†ä¸€ç±»æ•°æ®æ—¶ï¼Œå¯ä»¥èµ·åˆ°ä¼˜åŒ–ä½œç”¨ã€‚ 12345678with a as (select * from emp where hiredate &gt; date'1981-01-01' and job = 'MANAGER'), b as (select * from emp where hiredate &lt; date'1981-06-01' and job = 'SALESMAN')select * from a where ename like '%A%' and ename not like '%B%'union allselect * from a where ename like '%B%' and ename not like '%A%'union allselect * from b DECODE()å€¼å¤„ç†ï¼Œå¯ä»¥è¾¾åˆ° IF/ELSE çš„ä½œç”¨ã€‚ DECODE(value, if1, then1, if2,then2, . . . else ) 1234select empno as å·¥å·, DECODE(ename, 'SMITH', 'å²å¯†æ–¯', 'ALLEN', 'è‰¾ä¼¦', ename) as å§“åfrom emp; NVL()NULL å¤„ç†ï¼Œå¯ä»¥è¾¾åˆ° IF/ELSE çš„ä½œç”¨ã€‚ ç¤ºä¾‹ è¯´æ˜Ž NVL(v1, v2) è‹¥v1ä¸ºnullæ—¶ï¼Œå–v2, å¦åˆ™å–æœ¬èº«v1 NVL2(v1, v2, v3) è‹¥v1ä¸ºnullæ—¶ï¼Œå–v3, å¦åˆ™å–v2 TRUNC()ç±»ä¼¼æˆªå–å‡½æ•°ï¼ŒæŒ‰ç…§æŒ‡å®šçš„æ ¼å¼æˆªå–è¾“å…¥çš„æ•°æ®ã€‚ 12-- date æ—¶é—´æ ¼å¼ï¼Œfmt æ—¥æœŸæ ¼å¼ã€‚è¯­æ³•æ ¼å¼ï¼štrunc(date [, 'fmt']) SYSDATE ï¼šç³»ç»Ÿæ—¶é—´ã€‚ ç¤ºä¾‹ 2018/3/19 14:31:13 ç»“æžœ è¯´æ˜Ž select trunc(sysdate, &#39;dd&#39;) from dual 2018/03/20 è¿”å›žå½“å‰æ—¶é—´ï¼šå¤© select trunc(sysdate, &#39;hh24&#39;) from dual 2018/3/20 14:00:00 è¿”å›žå½“å‰æ—¶é—´ï¼šå°æ—¶ select trunc(sysdate) from dual 2018/03/20 è¿”å›žå½“å‰æ—¶é—´ select trunc(sysdate, &#39;yy&#39;) from dual 2018/01/01 è¿”å›žå½“å¹´ç¬¬ä¸€å¤© select trunc(sysdate, &#39;mm&#39;) from dual 2018/03/01 è¿”å›žå½“æœˆçš„ç¬¬ä¸€å¤© select trunc(sysdate, &#39;d&#39;) from dual 2018/03/19 è¿”å›žå½“å‰ä¿¡æ¯çš„ç¬¬ä¸€å¤© select trunc(sysdate, &#39;mi&#39;) from dual 2018/3/19 14:31:00 è¿”å›žå½“å‰æ—¶é—´ï¼šåˆ†é’Ÿ TO_CHAR() / TO_DATE()è¿™é‡Œä»…è¯´æ˜Ž æ—¥æœŸç±»åž‹ å’Œ å­—ç¬¦ä¸²ç±»åž‹ çš„ç›¸äº’è½¬æ¢ã€‚ ç¤ºä¾‹ 2018/3/19 14:31:13 ç»“æžœ select to_char( sysdate, &#39;YYYY-MM-DD&#39;) from dual 2018/3/19 select to_date(&#39;2018/3/19&#39;, &#39;YYYY-MM-DD&#39;) from dual 2018/3/19 12-- sql è°ƒè¯•æ—¶ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ã€‚select date'2018-03-19' from dual; ROW_NUMBER() OVER12-- å°†è¡¨æŒ‰ç…§aå­—æ®µè¿›è¡Œåˆ†ç»„ï¼Œä¹‹åŽæŒ‰ç…§bå­—æ®µè¿›è¡Œç»„å†…æŽ’åºï¼Œå¹¶ç»™å‡ºæŽ’åºçš„ç¼–å·ã€‚ROW_NUMBER() OVER (PARTITION BY a ORDER BY b) æ ¹æ®å·¥ä½œè¿›è¡Œåˆ†ç»„ï¼Œå¹¶æŒ‰è–ªèµ„è¿›è¡Œé™åºæŽ’åã€‚ 123select empno,ename,job,sal, ROW_NUMBER() OVER(PARTITION BY job order by sal desc) as job_rankfrom emp 12345678910111213141516 EMPNO ENAME JOB SAL JOB_RANK---------- ---------- --------- ---------- ---------- 7902 FORD ANALYST 3000 1 7788 SCOTT ANALYST 3000 2 7934 MILLER CLERK 1300 1 7876 ADAMS CLERK 1100 2 7900 JAMES CLERK 950 3 7369 SMITH CLERK 800 4 7566 JONES MANAGER 2975 1 7698 BLAKE MANAGER 2850 2 7782 CLARK MANAGER 2450 3 7839 KING PRESIDENT 5000 1 7499 ALLEN SALESMAN 1600 1 7844 TURNER SALESMAN 1500 2 7654 MARTIN SALESMAN 1250 3 7521 WARD SALESMAN 1250 4 LISTAGG(...) WITHIN GROUP(...)åˆ—å€¼æ‹¼æŽ¥ï¼Œæ ¹æ® sal æŽ’åºã€‚ 123select listagg(ename, ',') within group(order by sal) as namefrom emp; 123NAME--------------------------------------------------------------------------------SMITH,JAMES,ADAMS,MARTIN,WARD,MILLER,TURNER,ALLEN,CLARK,BLAKE,JONES,FORD,SCOTT,KING ä¸€èˆ¬é…åˆåˆ†ç»„ä½¿ç”¨ã€‚ åˆ—ä¸¾å„éƒ¨é—¨çš„å‘˜å·¥ï¼Œå¹¶æŒ‰å·¥èµ„æŽ’åºã€‚ 12345select deptno, listagg(ename, ',') within group(order by sal) as namefrom empgroup by deptno; 12345DEPTNO NAME------- ---------------------------------------10 MILLER,CLARK,KING20 SMITH,ADAMS,JONES,FORD,SCOTT30 JAMES,MARTIN,WARD,TURNER,ALLEN,BLAKE START WITH...CONNECT BY PRIOR...å¯¹æ ‘ç»“æž„çš„é€’å½’æŸ¥è¯¢ã€‚ 123456SELECT * FROM T-- å¼€å§‹æ¡ä»¶ï¼ˆçˆ¶èŠ‚ç‚¹ä¸ºç©ºï¼‰START WITH p_id is null-- è¿žæŽ¥æ¡ä»¶ï¼šå‘priorè·Ÿéšçš„èŠ‚ç‚¹ç±»åž‹æ–¹å‘éåŽ†ï¼ˆå‘å­èŠ‚ç‚¹æ–¹å‘é€’å½’éåŽ†ï¼‰CONNECT BY PRIOR id = p_id-- ç­‰åŒ CONNECT BY p_id = PRIOR id ç›¸å…³å¸¸è§é—®é¢˜NULLé—®é¢˜å­—æ®µå¤„ç†å½“å­—æ®µä¸º null æ—¶ï¼Œå¸Œæœ›ç‰¹æ®Šå¤„ç†å¯ä»¥ä½¿ç”¨å‡½æ•°ï¼š NVL() , DECODE() , CASE...WHEN... ã€‚ æŽ’åºå¤„ç†å½“å­—æ®µä¸º null æ—¶ï¼Œé»˜è®¤çš„æŽ’åºå¯èƒ½ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œæ­¤æ—¶å¯ä»¥ç‰¹æ®Šå¤„ç†ã€‚ oracle ä¸­é»˜è®¤æŽ’åºæ—¶ï¼Œå½“å­—æ®µå€¼ä¸º null ï¼Œdesc æ—¶ï¼Œnull ä¼šåœ¨æœ€å‰é¢ï¼Œasc ä¼šåœ¨æœ€åŽé¢ã€‚ å­—æ®µå¤„ç†ï¼ŒæŽ’é™¤å¹²æ‰° NVL() , DECODE() , CASE...WHEN... ã€‚ nulls last / nulls first 1select * from emp order by sal desc nulls last; æ—¥æœŸé—®é¢˜æ—¶é—´é‡å  ä¸é‡å çš„æ¡ä»¶: t.endTime &lt; &#39;å‚æ•°å¼€å§‹æ—¶é—´&#39; : å½“å‰å¼€å§‹æ—¶é—´ å¤§äºŽ åŽ†å²ç»“æŸæ—¶é—´ã€‚ t.betginTime &gt; &#39;å‚æ•°ç»“æŸæ—¶é—´&#39; : å½“å‰ç»“æŸæ—¶é—´ å°äºŽ åŽ†å²å¼€å§‹æ—¶é—´ã€‚ 12-- èŽ·å¾—æ—¶é—´é‡å çš„æ•°æ®(éªŒè¯æ—¶é—´æ˜¯å¦é‡å )select ... from table t where ... and not ( t.betginTime &gt; 'å‚æ•°ç»“æŸæ—¶é—´' or t.endTime &lt; 'å‚æ•°å¼€å§‹æ—¶é—´' ) sequenceOracle ä¸­æ²¡æœ‰è‡ªå¢žä¸»é”®ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ sequence ä»£æ›¿ã€‚ 123DROP SEQUENCE TAX_SEQUENCE;CREATE SEQUENCE TAX_SEQUENCE INCREMENT BY 1 START WITH 100000 MAXVALUE 100000000 MINVALUE 1 NOCYCLECACHE 20 NOORDER; ä½¿ç”¨æ–¹å¼ 1234-- ç›´æŽ¥ä½¿ç”¨ï¼Œå¯ä»¥ç›´æŽ¥åœ¨ SQL ä¸­ä½¿ç”¨ã€‚TAX_SEQUENCE.NEXTVAL-- é—´æŽ¥ä½¿ç”¨ï¼Œä¾‹å¦‚æä¾›ç»™ Java ç¨‹åºã€‚select TAX_SEQUENCE.NEXTVAL from dual]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆSpringMVCæ³¨è§£]]></title>
    <url>%2F2018%2F11%2F13%2F%E6%B5%85%E8%B0%88SpringMVC%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»ä¸€ä¸‹åœ¨ Spring MVC ä¸­å¸¸ä¼šä½¿ç”¨çš„æ³¨è§£ã€‚ @Controller &amp; @RequestMapping@Controller@Controller ä½œç”¨äºŽç±»ï¼Œ Controller è´Ÿè´£å¤„ç†ä»Ž DispatcherServlet åˆ†å‘çš„è¯·æ±‚ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ @Controller å®žé™…æ˜¯ è¯´æ˜Žæ€§æ³¨è§£ ï¼Œå‡ ä¹Žç­‰åŒäºŽ @Component ï¼Œä¼šè¢« Spring è¯†åˆ«ä¸º bean ï¼Œéœ€è¦é…åˆ @RequestMapping æ‰èƒ½æˆä¸ºçœŸæ­£å¤„ç†è¯·æ±‚çš„å¤„ç†å™¨ã€‚ @RequestMapping@RequestMapping æ³¨è§£ä¼šå°† HTTP è¯·æ±‚æ˜ å°„åˆ° MVC å’Œ REST æŽ§åˆ¶å™¨çš„å¤„ç†æ–¹æ³•ä¸Šï¼Œä½œç”¨äºŽ Controller ç±»æˆ–æ–¹æ³•ã€‚ å±žæ€§ è¯´æ˜Ž value æŒ‡å®šè¯·æ±‚çš„å®žé™…åœ°å€ï¼ŒæŒ‡å®šçš„åœ°å€å¯ä»¥æ˜¯ URI Template æ¨¡å¼ã€‚ method æŒ‡å®šè¯·æ±‚çš„methodç±»åž‹ï¼Œ GET / POST / PUT / DELETE ç­‰ã€‚ consumes æŒ‡å®šå¤„ç†è¯·æ±‚çš„æäº¤å†…å®¹ç±»åž‹ï¼ˆContent-Typeï¼‰ï¼Œä¾‹å¦‚ï¼š application/json , text/html ã€‚ produces æŒ‡å®šè¿”å›žçš„å†…å®¹ç±»åž‹ï¼Œä»…å½“ request è¯·æ±‚å¤´ä¸­çš„( Accept )ç±»åž‹ä¸­åŒ…å«è¯¥æŒ‡å®šç±»åž‹æ‰è¿”å›žã€‚ params æŒ‡å®š request ä¸­å¿…é¡»åŒ…å«æŸäº›å‚æ•°å€¼æ˜¯ï¼Œæ‰è®©è¯¥æ–¹æ³•å¤„ç†ã€‚ headers æŒ‡å®š request ä¸­å¿…é¡»åŒ…å«æŸäº›æŒ‡å®šçš„ header å€¼ï¼Œæ‰èƒ½è®©è¯¥æ–¹æ³•å¤„ç†è¯·æ±‚ã€‚ @RequestParam &amp; @PathVariableä¸¤ä¸ªéƒ½æ˜¯ä½œç”¨äºŽ Controller æ–¹æ³•å‚æ•°ï¼Œç”¨äºŽå‚æ•°ç»‘å®šã€‚ æ³¨è§£ è¯´æ˜Ž @RequestParam ä¸»è¦ç”¨äºŽæŽ¥å—æ™®é€šçš„è¯·æ±‚å‚æ•°ï¼Œéžå¿…éœ€ã€‚ @PathVariable å–å‡º URI æ¨¡æ¿ä¸­çš„å˜é‡ä½œä¸ºå‚æ•°ï¼Œä¸»è¦ç”¨äºŽå¤„ç† RESTful é£Žæ ¼çš„è¯·æ±‚ã€‚ @RequestParam 1http://localhost:8080/Demo/list?userId=123 12345@RequestMapping(value = "/list", method = RequestMethod.GET)public String toUpload(@RequestParam String userId, Model model)&#123; model.addAttribute("userId", userId); return "upload";&#125; @PathVariable 1http://localhost:8080/Demo/list/123 12345@RequestMapping(value = "/list/&#123;userId&#125;", method = RequestMethod.GET)public String toUpload(@PathVariable String userId, Model model)&#123; model.addAttribute("userId", userId); return "upload";&#125; @RequestBody &amp; @ResponseBody æ³¨è§£ è¯´æ˜Ž @RequestBody ç”¨äºŽ Controller çš„æ–¹æ³•å‚æ•° ï¼Œä»Ž Request å¯¹è±¡çš„ Body æ•°æ®åŒºä¸­å–å‡ºæ•°æ®ã€‚ä¸€èˆ¬ç”¨äºŽè§£æžå­—ç¬¦ä¸²ç±»åž‹çš„ Json ä¿¡æ¯ã€‚ @ResponseBody ç”¨äºŽ Controller çš„æ–¹æ³• ï¼Œå°†è¿”å›žçš„å¯¹è±¡æ”¾å…¥åˆ° Response å¯¹è±¡çš„ Body æ•°æ®åŒºä¸­ã€‚ä½¿ç”¨åŽå°†ä¸ä¼šè¿”å›žé¡µé¢è€Œæ˜¯æ•°æ®ï¼Œä¸€èˆ¬ç”¨äºŽéž String çš„å¯¹è±¡ä½œä¸º json æ•°æ®è¿”å›žã€‚ @ModelAttribute &amp; @SessionAttributesè¿™ä¸¤ä¸ªæ³¨è§£å¯ä»¥å®žçŽ°åœ¨ä¸åŒçš„æ¨¡åž‹ï¼ˆmodelï¼‰å’ŒæŽ§åˆ¶å™¨ä¹‹é—´å…±äº«æ•°æ®ã€‚ æ³¨è§£ è¯´æ˜Ž @ModelAttribute ï¼ˆè‹¥ä½œç”¨äºŽæ™®é€šæ–¹æ³•ï¼‰ è‹¥ç”¨äºŽæ™®é€šæ–¹æ³•ï¼Œè¯¥ Controller çš„æ‰€æœ‰æ–¹æ³•åœ¨è°ƒç”¨å‰ï¼Œå…ˆæ‰§è¡Œæ­¤æ–¹æ³•ã€‚ @ModelAttribute ï¼ˆè‹¥ä½œç”¨äºŽ Controller çš„æ–¹æ³•å‚æ•°ï¼‰ è‹¥ä½œç”¨äºŽ Controller çš„æ–¹æ³•å‚æ•°ï¼Œè¿›è¡Œå‚æ•°ç»‘å®šï¼Œç±»ä¼¼ @RequestParam ã€‚ @SessionAttributes ç”¨äºŽç±»ä¸Šï¼Œå°†å€¼æ”¾åˆ°sessionä½œç”¨åŸŸä¸­ã€‚]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆSpringMVCæ•°æ®ç»‘å®š]]></title>
    <url>%2F2018%2F11%2F12%2F%E6%B5%85%E8%B0%88SpringMVC%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%2F</url>
    <content type="text"><![CDATA[Spring MVC æ‹¥æœ‰å¼ºå¤§çš„æ•°æ®ç»‘å®šæ•°æ®åŠŸèƒ½ ï¼Œæœ¬æ–‡ä»‹ç»ä¸€ä¸‹å…¶å¯¹å„ç§æ•°æ®ç±»åž‹çš„ç»‘å®šã€‚ æ•°æ®ç»‘å®š : å°†è¯·æ±‚ä¸­çš„å­—æ®µæŒ‰ç…§ åå­—åŒ¹é… çš„åŽŸåˆ™å¡«å…¥æ¨¡åž‹å¯¹è±¡ä¸­ã€‚ ç›¸å…³è¯·æ±‚æµ‹è¯•å¯ä»¥ä½¿ç”¨Chromeæ’ä»¶æäº¤ï¼ŒæŽ¨èï¼šRestlet Client ã€‚ åŸºæœ¬ç±»åž‹ &amp; åŒ…è£…ç±»åž‹ &amp; æ•°ç»„ å¯¹äºŽè¿™ç§ç±»åž‹çš„æ•°æ®ï¼Œç›´æŽ¥ä½¿ç”¨ åå­—åŒ¹é… å³å¯ï¼Œä¸éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚ åŸºæœ¬ç±»åž‹ &amp; åŒ…è£…ç±»åž‹ æŽ¨èç›´æŽ¥ä½¿ç”¨ åŒ…è£…ç±»åž‹ ä»£æ›¿ åŸºæœ¬ç±»åž‹ ã€‚ æ•°æ®ç±»åž‹ ä¼ é€’è¦æ±‚ ç±»åž‹è¦æ±‚ åŸºæœ¬ç±»åž‹ ï¼ˆå¦‚ int ï¼‰ é»˜è®¤å‚æ•°å¿…é¡»ä¼ ï¼Œåä¹‹ HTTP Status 500 ã€‚ ç±»åž‹å¿…é¡»ä¸€è‡´ï¼ˆå¦‚ int ï¼‰ï¼Œåä¹‹ HTTP Status 400 ã€‚ åŒ…è£…ç±»åž‹ ï¼ˆå¦‚ Integer ï¼‰ å‚æ•°å¯ä»¥ä¸ä¼ ï¼Œè‹¥å¦‚æ­¤ä¸º null ã€‚ ç±»åž‹å¿…é¡»ä¸€è‡´ï¼ˆå¦‚ int ï¼‰ï¼Œåä¹‹ HTTP Status 400 ã€‚ æ•°ç»„ æŽ¨èåªä½œç”¨äºŽ åŸºæœ¬ç±»åž‹ , åŒ…è£…ç±»åž‹ , String ã€‚ å¯¹äºŽ åŸºæœ¬ç±»åž‹ , åŒ…è£…ç±»åž‹ , String æ•°ç»„çš„æ•°æ®ç»‘å®šï¼Œå’Œå•ä¸ªæ•°æ®é‡‡å–çš„ ç»‘å®šæ–¹å¼ å’Œ æ³¨æ„ç‚¹ ç›¸åŒã€‚ å¯¹è±¡ç®€å•å¯¹è±¡ / å¤šå±‚çº§å¯¹è±¡ä¸ºäº†ä¾¿äºŽè®²è§£ï¼Œæœ¬æ–‡æ¨¡æ‹Ÿä½¿ç”¨ get è¯·æ±‚ç±»åž‹ï¼Œä¸”ä¸è¿›è¡Œè½¬ä¹‰ï¼ˆchrome ä¼šè‡ªåŠ¨è½¬ä¹‰ï¼‰ã€‚ 1234# ç®€å•å¯¹è±¡http://localhost:8080/binding/ObjectType1?username=Tom&amp;age=12# å¤šå±‚çº§å¯¹è±¡http://localhost:8080/binding/ObjectType1?username=Tom&amp;age=12&amp;contactInfo.phone=911 ä»¥ä¸‹æ˜¯ Controller çš„å¯¹åº”æ–¹æ³•ï¼Œ å…¶ä¸­ Userç±»åŒ…å«äº†åŒåå±žæ€§ã€‚ 123456/** ç»‘å®šç®€å•å¯¹è±¡ / ç»‘å®šå¤šå±‚çº§å¯¹è±¡ */@RequestMapping(value = "/binding/objectType1")@ResponseBodypublic User objectType1(User user)&#123; return user;&#125; åŒå±žæ€§å¤šå¯¹è±¡å› ä¸º SpringMVC æ˜¯é€šè¿‡ç±»çš„ setter è¿›è¡Œç»‘å®šçš„ï¼Œæ‰€ä»¥å½“ç»‘å®šå¤šä¸ªå¯¹è±¡ä¸”å…·æœ‰ç›¸åŒå±žæ€§æ—¶ï¼Œé»˜è®¤åŒå±žæ€§éƒ½ä¼šè¢«èµ‹å€¼ï¼Œè¿™æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚ 1http://localhost:8080/binding/ObjectType2?user.username=Tom&amp;age=12&amp;admin.username=Jack 12345678910111213141516/** ç»‘å®šåŒå±žæ€§å¤šå¯¹è±¡ï¼ˆUserå’ŒAdminå±žæ€§å®Œå…¨ç›¸åŒï¼‰ */@RequestMapping(value = "/binding/objectType2")@ResponseBodypublic String objectType2(User user, Admin admin)&#123; return user.toString() + admin.toString();&#125;/** åœ¨è¿›å…¥æ­¤Controllerå‰ï¼Œä¼šå…ˆåˆå§‹åŒ–æ­¤æ–¹æ³•ï¼Œå®Œæˆç»‘å®šï¼Œå†æ‰§è¡Œurlå¯¹åº”æ–¹æ³• */@InitBinder("user")public void initUser(WebDataBinder binder) &#123; /** å°†æœ‰user.å‰ç¼€çš„å±žæ€§ç»‘å®šåˆ°userå¯¹è±¡ä¸Šï¼ˆè‹¥æ²¡æœ‰å‰ç½®ï¼ŒåŒå±žæ€§éƒ½ä¼šèµ‹å€¼ï¼‰ */ binder.setFieldDefaultPrefix("user.");&#125;@InitBinder("admin")public void initAdmin(WebDataBinder binder) &#123; binder.setFieldDefaultPrefix("admin.");&#125; List &amp; Set &amp; Map Spring å¯¹äºŽæ­¤ç±»å¯¹è±¡ç»‘å®šéœ€è¦ä½¿ç”¨ æ•°æ®æ”¶é›†å¯¹è±¡ ã€‚ Listé€šè¿‡ æ•°æ®æ”¶é›†å¯¹è±¡ å†…çš„ setter è¿›è¡Œç»‘å®šï¼Œè§’æ ‡ç´¢å¼•å¯ç¡®å®š size ã€‚ 1http://localhost:8080/binging/listType?users[0].username=Tom&amp;users[1].username=Jack *From.java 12345678910111213141516171819public class UserListForm &#123; private List&lt;User&gt; users; public List&lt;User&gt; getUsers() &#123; return users; &#125; public void setUsers(List&lt;User&gt; users) &#123; this.users = users; &#125; @Override public String toString() &#123; return "UserListForm&#123;" + "users=" + users + '&#125;'; &#125;&#125; *Controller.java 123456/** ç»‘å®šlist */@RequestMapping(value = "/binging/listType")@ResponseBodypublic String listType(UserListForm userListForm)&#123; return userListForm.toString();&#125; Set ä¸æŽ¨èä½¿ç”¨ï¼Œå½“éœ€è¦åŽ»é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ List æŽ¥æ”¶å†ä½¿ç”¨ Set åŽ»é‡ã€‚ SpringMVC å¯¹ Set çš„æ”¯æŒä¸å¤ªå¥½ï¼Œä¸ä»…éœ€è¦ æ•°æ®æ”¶é›†å¯¹è±¡ å’Œæ‰‹åŠ¨åˆå§‹åŒ– Set ï¼Œè¿˜éœ€è¦å‰åŽå° size ä¸€è‡´ï¼ˆè‡ªå·±çš„demoæ˜¾ç¤ºï¼Œé‡å†™ equals å’Œ hashCode åŽæ— æ³•æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œå³ä½¿åˆ¤å®šä¸åŒï¼‰ã€‚ Map1http://localhost:8080/binding/mapType?users[&apos;X&apos;].username=Tom&amp;users[&apos;Y&apos;].username=Jack *Form.java 12345678910111213141516171819public class UserMapForm &#123; private Map&lt;String, User&gt; users; public Map&lt;String, User&gt; getUsers() &#123; return users; &#125; public void setUsers(Map&lt;String, User&gt; users) &#123; this.users = users; &#125; @Override public String toString() &#123; return "UserMapForm&#123;" + "users=" + users + '&#125;'; &#125;&#125; *Controller.java 123456/** ç»‘å®šmap */@RequestMapping(value = "mapType")@ResponseBodypublic String mapType(UserMapForm userMapForm)&#123; return userMapForm.toString();&#125; jsonç»‘å®š json æ•°æ®éœ€è¦ jackson-databind ä¾èµ–ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.5.4&lt;/version&gt;&lt;/dependency&gt; *.json 1234567&#123; "username": "Tom", "age": 12, "contactInfo":&#123; "phone": "1234567890" &#125;&#125; *Controller.java éœ€è¦ä½¿ç”¨ @RequestBodyæ³¨è§£ ã€‚ 123456/** ç»‘å®šjson */@RequestMapping(value = "jsonType")@ResponseBodypublic String jsonType(@RequestBody User user)&#123; return user.toString();&#125; xmlç»‘å®š xml æ•°æ®éœ€è¦ spring-oxm ä¾èµ–ã€‚ 123456&lt;!--xmlæ•°æ®ç»‘å®š--&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt; &lt;version&gt;4.1.9.RELEASE&lt;/version&gt;&lt;/dependency&gt; *.xml 12345&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;people&gt; &lt;name&gt;Jim&lt;/name&gt; &lt;age&gt;16&lt;/age&gt;&lt;/people&gt; *entity.java éœ€è¦ä½¿ç”¨ @XmlRootElement æ³¨è§£ã€‚ 123456789101112131415161718192021222324252627282930313233/** ä¸ºxmlç»‘å®šæä¾›çš„å®žä½“ç±»(æ³¨è§£éœ€è¦JDK1.7ä»¥ä¸Šæ”¯æŒ) */@XmlRootElement(name = "people")public class People &#123; private String name; private Integer age; @XmlElement(name = "name") public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @XmlElement(name = "age") public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; @Override public String toString() &#123; return "People&#123;" + "name='" + name + '\'' + ", age=" + age + '&#125;'; &#125;&#125; *Controller.java éœ€è¦ä½¿ç”¨ @RequestBody æ³¨è§£ã€‚ 123456789/** * ç»‘å®šxmlï¼ˆæŽ¨èä½¿ç”¨Restlet Clientè°ƒè¯• ï¼‰ * æ³¨æ„Peopleéœ€è¦ä½¿ç”¨æ³¨è§£ */@RequestMapping(value = "xmlType")@ResponseBodypublic String xmlType(@RequestBody People people)&#123; return people.toString();&#125; Date ä¸€èˆ¬å¼€å‘æ—¶ï¼Œå–œæ¬¢ä½¿ç”¨ String ç±»åž‹æŽ¥å—ï¼Œç„¶åŽåˆ° sql å±‚é¢è¿›è¡Œç±»åž‹è½¬æ¢ã€‚ 123456/** ä¸€èˆ¬ç»‘å®šæ—¶é—´ç±»åž‹æ–¹å¼ */@RequestMapping(value = "date")@ResponseBodypublic String date(@DateTimeFormat(iso = DateTimeFormat.ISO.DATE, pattern = "yyyy-MM-dd") Date date)&#123; return date.toString();&#125; è‡ªå®šä¹‰ç±»åž‹è½¬åŒ–å™¨ä½¿ç”¨è‡ªå®šä¹‰çš„ç±»åž‹è½¬åŒ–å™¨å¯ä»¥æ»¡è¶³ å¤æ‚å¤šæ ·çš„æ•°æ®ç»‘å®š ï¼Œè¿™é‡Œ æ¨¡æ‹Ÿ å¯¹ 2017-01-17 æ ¼å¼çš„å­—ç¬¦ä¸²ç»‘å®šåˆ° Date å¯¹è±¡ä¸Šã€‚ç±»ä¼¼çš„è¿˜å¯ä»¥ç»‘å®šï¼šå„ç§æ—¶é—´æ ¼å¼/è´§å¸æ ¼å¼/æ•°æ®æ ¼å¼ç­‰ã€‚ Spring æä¾›äº†ä¸€äº›ç±»åž‹è½¬åŒ–æŽ¥å£ï¼Œå¦‚ä¸‹ï¼š ç±»åž‹è½¬åŒ–æŽ¥å£ ç”¨é€” è¯´æ˜Ž PropertyEditor ä½œç”¨ å±€éƒ¨ ï¼›ç»‘å®šå€ŸåŠ© WebDataBinder ã€‚ Spring3 å‰ï¼Œå†…ç½®çš„å¯æ‰©å±•æ€§ã€‚ Formatter ä½œç”¨å±€éƒ¨/å…¨å±€ï¼›è‡ªåŠ¨ç»‘å®šï¼› å‚æ•°ä¸ºString ã€‚ Spring3 åŽï¼Œå†…ç½®çš„å¯æ‰©å±•æ€§ã€‚ Converter ä½œç”¨å±€éƒ¨/å…¨å±€ï¼›è‡ªåŠ¨ç»‘å®šï¼›å‚æ•°ä¸ºè‡ªå®šä¹‰ã€‚ Spring3 åŽï¼Œå†…ç½®çš„ä¸å¯æ‰©å±•æ€§ã€‚ â…  PropertyEditorè¿™ç§æ–¹å¼ åªèƒ½ä½œç”¨äºŽå±€éƒ¨ ï¼Œéœ€è¦é…åˆ @InitBinder ä½¿ç”¨ã€‚ 1http://localhost:8888/binding/date1?date1=2017-01-17 *Controller.java 123456789101112/** å€ŸåŠ©PropertyEditorè½¬æ¢æ•°æ®ï¼Œå®Œæˆç»‘å®š */@RequestMapping(value = "date1")@ResponseBodypublic String date1(Date date1)&#123; return date1.toString();&#125;@InitBinder("date1")public void initDate1(WebDataBinder binder)&#123; /** å°†å¯¹åº”æ ¼å¼çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸ºDateç±»åž‹(true:å¯ä»¥ä¸ºç©º) */ binder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat("yyyy-MM-dd"), true));&#125; â…¡ Formatterè¿™ç§æ–¹å¼ åªèƒ½æŽ¥å— String å‚æ•° ï¼Œéœ€è¦å®žçŽ° FormatteræŽ¥å£ ã€‚ 1http://localhost:8888/binding/date2?date2=2017-01-17 *Formatter.java è‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨ï¼Œå®žçŽ° FormatteræŽ¥å£ ã€‚ 123456789101112/** å®žçŽ°Formatterï¼Œè‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨Demo */public class MyDateFormatter implements Formatter&lt;Date&gt; &#123; public Date parse(String text, Locale locale) throws ParseException &#123; SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd"); return sdf.parse(text); &#125; public String print(Date object, Locale locale) &#123; return null; &#125;&#125; spring-web.xml æ³¨å†Œè‡ªå®šä¹‰æ ¼å¼åŒ–è½¬åŒ–å™¨ã€‚ 12345678910&lt;mvc:annotation-driven conversion-service="myDateFormatter"/&gt;&lt;!--æ³¨å†Œè‡ªå®šä¹‰æ ¼å¼åŒ–è½¬åŒ–å™¨--&gt;&lt;bean id="myDateFormatter" class="org.springframework.format.support.FormattingConversionServiceFactoryBean"&gt; &lt;property name="formatters"&gt; &lt;set&gt; &lt;bean class="org.demo.web.formatter.MyDateFormatter" /&gt; &lt;/set&gt; &lt;/property&gt;&lt;/bean&gt; *Controller.java 123456/** å€ŸåŠ©Formatterè½¬æ¢æ•°æ®ï¼Œå®Œæˆç»‘å®šï¼ˆå…¨å±€ï¼‰ */@RequestMapping(value = "date2")@ResponseBodypublic String date2(Date date2)&#123; return date2.toString();&#125; â…¢ Converterè¿™ç§æ–¹å¼å¯ä»¥æŽ¥å—è‡ªå®šä¹‰ç±»åž‹ï¼Œéœ€è¦å®žçŽ°å®žçŽ° ConverteræŽ¥å£ ã€‚ 1http://localhost:8888/binding/date3?date3=2017-01-17 *Converter.java è‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨ï¼Œå®žçŽ° ConverteræŽ¥å£ ã€‚ 123456789101112/** å®žçŽ°Converterï¼Œè‡ªå®šä¹‰æ ¼å¼åŒ–è½¬æ¢å™¨Demo */public class MyDateConverter implements Converter&lt;String, Date&gt; &#123; public Date convert(String source) &#123; SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd"); try &#123; return sdf.parse(source); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; spring-web.xml æ³¨å†Œè‡ªå®šä¹‰æ ¼å¼åŒ–è½¬åŒ–å™¨ã€‚ 12345678910&lt;mvc:annotation-driven conversion-service="myDateConverter"/&gt;&lt;!--æ³¨å†Œè‡ªå®šä¹‰æ ¼å¼åŒ–è½¬åŒ–å™¨--&gt;&lt;bean id="myDateConverter" class="org.springframework.format.support.FormattingConversionServiceFactoryBean"&gt; &lt;property name="converters"&gt; &lt;set&gt; &lt;bean class="org.demo.web.converter.MyDateConverter"/&gt; &lt;/set&gt; &lt;/property&gt;&lt;/bean&gt; *Controller.java 123456/** å€ŸåŠ©Converterè½¬æ¢æ•°æ®ï¼Œå®Œæˆç»‘å®šï¼ˆå…¨å±€ï¼‰ */@RequestMapping(value = "date3")@ResponseBodypublic String date3(Date date3)&#123; return date3.toString();&#125;]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆSpring DIæ³¨è§£]]></title>
    <url>%2F2018%2F11%2F09%2F%E6%B5%85%E8%B0%88Spring-DI%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[Spring åœ¨ç®¡ç† Bean æ—¶ä¼šä½¿ç”¨åˆ°å„ç§æ³¨è§£ ï¼Œæœ¬æ–‡ä»‹ç»ä¸€ä¸‹å¼€å‘ä¸­å¸¸ä¼šç”¨åˆ°çš„æ³¨è§£ã€‚ ä»¥ä¸‹æ˜¯å¸¸ç”¨DIæ³¨è§£æ¯”è¾ƒï¼š DI å¸¸ç”¨æ³¨è§£ è¯´æ˜Ž ç”¨é€” @Autowired è‡ªåŠ¨è£…é…ï¼Œä»ŽApplicationContextä¸­å–å‡º åŒç±»åž‹ çš„beanè£…é…åˆ°è¢«æ³¨è§£é¡¹ä¸Šã€‚ å±žæ€§ / setter / æž„é€ å™¨ @Qualifier å› ä¸º @Autowired æŒ‰ç…§ç±»åž‹è‡ªåŠ¨è£…é…å¯èƒ½å­˜åœ¨å¤šä¸ªbeanå®žä¾‹ï¼Œå¯ä»¥ç”¨ @Qualifier(&quot;beanId&quot;) é™å®š id ç­›é€‰å‡ºæŒ‡å®šçš„beanã€‚ xml ä¸­ä¹Ÿæœ‰qualifier æ ‡ç­¾ã€‚ é…åˆ @AutoWired ä½¿ç”¨ï¼Œé™å®š id ï¼Œ ä½†ä¸æŽ¨èä½¿ç”¨ ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ @Resource ä»£æ›¿ã€‚ @Resource è£…é…èµ„æºï¼Œé»˜è®¤ä»ŽApplicationContextä¸­å–å‡º åŒå çš„beanè£…é…åˆ°è¢«æ³¨è§£é¡¹ä¸Šã€‚@Resource å¯ä»¥é€šè¿‡ byName / byType ä¸¤ç§æ–¹å¼ï¼Œåªæ˜¯ä¸€èˆ¬ä½¿ç”¨é»˜è®¤ byName åŒ¹é…è£…è½½ã€‚ å±žæ€§ / setter @Required è¡¨ç¤ºè¢«ä¿®é¥°å±žæ€§é¡¹ï¼Œåœ¨åˆå§‹åŒ–æ—¶ä¸€å®šè¦é…ç½®æ˜Žç¡®å€¼ã€‚ setter @Requiredè¡¨ç¤ºè¢«ä¿®é¥°å±žæ€§é¡¹ï¼Œåœ¨åˆå§‹åŒ–æ—¶ä¸€å®šè¦é…ç½®æ˜Žç¡®å€¼ã€‚å¯ä»¥ç”¨äºŽå±žæ€§ / setterã€‚ @Autowiredè‡ªåŠ¨è£…é…ï¼Œä»ŽApplicationContextä¸­å–å‡º åŒç±»åž‹ çš„beanè£…é…åˆ°è¢«æ³¨è§£é¡¹ä¸Šã€‚å¯ä»¥ç”¨äºŽ å±žæ€§ / setter / æž„é€ å™¨ã€‚ æ³¨æ„äº‹é¡¹ : å½“æ²¡æœ‰åˆé€‚çš„beanæ—¶ä¼šæŠ›å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ @Autowired(required=false) é¿å…ã€‚ æ¯ä¸ªç±»åªæœ‰ä¸€ä¸ªæž„é€ å™¨å¯ä»¥è¢«æ ‡è®°ä¸º required=true ã€‚ä½† å½“æœ‰å¿…è¦å±žæ€§æ—¶æŽ¨èç”¨ @Required ã€‚ å¯ä»¥æ³¨è§£Springä¼—æ‰€å‘¨çŸ¥çš„è§£æžä¾èµ–æ€§æŽ¥å£ï¼Œå³springè‡ªå¸¦beanã€‚ å¦‚ BeanFactory , Applicationcontext , Environment , ResourceLoader , ApplicationEventPublisher , MessageSource ç­‰ã€‚ @Autowired ä¸èƒ½æ³¨è§£ BeanPostProcessor / BeanFactoryPostProcessor ï¼Œå¯ä»¥ä½¿ç”¨ @Bean ä»£æ›¿ã€‚ å› ä¸º @Autowired ä¸º BeanPostProcessor å¤„ç†ï¼Œä¼šäº§ç”Ÿå¾ªçŽ¯ä¾èµ–ã€‚ å¯ä»¥ç”¨æ¥è£…é…List/Stringçš„Mapç­‰é›†åˆï¼Œå¦‚æžœå¸Œæœ›Listæœ‰åºï¼Œå¯ä»¥ä½¿ç”¨ @Order(n) æˆ–ä½¿beanå®žçŽ° Ordered æŽ¥å£ã€‚ @Qualifierå› ä¸º @Autowired æŒ‰ç…§ç±»åž‹è‡ªåŠ¨è£…é…å¯èƒ½å­˜åœ¨å¤šä¸ªbeanå®žä¾‹ï¼Œå¯ä»¥ç”¨ @Qualifier(&quot;beanId&quot;) é™å®š id ç­›é€‰å‡ºæŒ‡å®šçš„beanã€‚ xml ä¸­ä¹Ÿæœ‰qualifieræ ‡ç­¾ ã€‚é…åˆ @AutoWired ä½¿ç”¨ï¼Œé™å®š id ï¼Œ ä½† ä¸æŽ¨èä½¿ç”¨ ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ @Resource ä»£æ›¿ã€‚ å’Œ @Component ä¸€æ ·ï¼Œå¯ä»¥ç”¨ä½œå…ƒæ³¨è§£ï¼Œè‡ªå®šä¹‰é™å®šæ³¨è§£ã€‚ å³ä½¿ä¸ä½¿ç”¨ @Qualifier ä½œæ³¨è§£ä¾ç„¶å¯ä»¥æ³¨å†Œè‡ªå·±çš„qualifieræ³¨è§£ç±»åž‹ã€‚ 12345678&lt;bean id="customAutowireConfigurer" class="org.springframework.beans.factory.annotation.CustomAutowireConfigurer"&gt; &lt;property name="customQualifierTypes"&gt; &lt;set&gt; &lt;value&gt;example.CustomQualifier&lt;/value&gt; &lt;/set&gt; &lt;/property&gt;&lt;/bean&gt; @Resource JSR-250 æ ‡å‡†çš„æ³¨è§£ï¼Œåœ¨ Java EE 5/6 é€šç”¨ï¼ŒspringåŒæ ·æ”¯æŒã€‚ è£…é…èµ„æºï¼Œé»˜è®¤ä»ŽApplicationContextä¸­å–å‡º åŒå çš„beanè£…é…åˆ°è¢«æ³¨è§£é¡¹ä¸Šã€‚ç”¨äºŽå±žæ€§/åªæœ‰ä¸€ä¸ªå¤šå‚æ•° setter å…¶å®ž @Resource å¯ä»¥é€šè¿‡ byName / byType ä¸¤ç§æ–¹å¼ï¼Œåªæ˜¯ä¸€èˆ¬ä½¿ç”¨é»˜è®¤ byName åŒ¹é…è£…è½½ã€‚ æ³¨æ„äº‹é¡¹ : é›†åˆ/Mapç±»åž‹å¾ˆå¤šéƒ½æ— æ³•é€šè¿‡ç±»åž‹ç›´æŽ¥åŒ¹é…ï¼Œ å³ @Autowired ä¸å¯ä½¿ç”¨ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨å”¯ä¸€åç§° id è¿›è¡ŒåŒ¹é…ã€‚ ä½¿ç”¨ name å±žæ€§å¯ä»¥æŒ‡å®šè¢«æ³¨å…¥beançš„åç§°ï¼Œé»˜è®¤æ˜¯å±žæ€§çš„åç§°æˆ–setteråç§° ä¹‹åŽï¼Œä¼šç”± ApplicationContext ä¸­çš„ CommonAnnotationBeanPostProcessor å‘çŽ°å¹¶å¤„ç†ã€‚ å½“ CommonAnnotationBeanPostProcessor åœ¨ ApplicationContext ä¸­æ³¨å†Œï¼Œä¸ä»…èƒ½è¯†åˆ« JSR-250 çš„ @Resource ï¼Œè¿˜æ”¯æŒ Spring2.5 å¼•å…¥çš„ç”¨äºŽåˆå§‹åŒ–å›žè°ƒ/é”€æ¯å›žè°ƒçš„ @PostConstruct / @PreDestroy ã€‚ @BeanåŸºäºŽjavaçš„å®¹å™¨æ³¨è§£ï¼Œé…ç½®å’Œåˆå§‹åŒ–ä¸€ä¸ªç”±SpringIocå®¹å™¨ç®¡ç†çš„æ–°å¯¹è±¡çš„æ–¹æ³•ï¼Œç±»åž‹äºŽ xml é…ç½®ä¸­çš„ &lt;bean&gt;&lt;/bean&gt; ã€‚é€šå¸¸é…åˆ @Configuration ä½¿ç”¨ã€‚ ä»¥ä¸‹çš„ java é…ç½® å’Œ xmlé…ç½® ç­‰æ•ˆã€‚ 12345678@Configurationpublic class AppConfig&#123; @Bean public DemoService myService()&#123; return new DemoServiceImpl(); &#125;&#125; 123&lt;beans&gt; &lt;bean id="myService" class="org.Demo.Service.MyServiceImpl"/&gt;&lt;/beans&gt; å¯ä»¥ä½¿ç”¨ @Scope æ³¨è§£æŽ§åˆ¶ä½œç”¨åŸŸå’Œä»£ç†æ–¹å¼ã€‚ 123456789@Configurationpublic class AppConfig&#123; @Bean(name = "myService", initMethod="init", destroyMethod="cleanup") @Scope(value = "session", proxyMode = ScopedProxyMode.TARGET_CLASS) public DemoService myService()&#123; return new DemoServiceImpl(); &#125;&#125; æ³¨æ„äº‹é¡¹ : @Bean çš„nameé»˜è®¤æ˜¯æ–¹æ³•åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ @Bean(&quot;Demo&quot;) è‡ªå®šä¹‰beanåç§°ã€‚ å¯ä»¥ä½¿ç”¨ @Bean(initMethod=&quot;init&quot;) å’Œ @Bean(destroyMethod=&quot;cleanup&quot;) æŒ‡å®šåˆå§‹åŒ–å’Œé”€æ¯beançš„æ–¹æ³•ï¼ˆä¸€èˆ¬åœ¨returnçš„ç±»ä¸­å®šä¹‰ç›¸å…³æ–¹æ³•ï¼‰ã€‚ åŸºäºŽæ³›åž‹çš„è‡ªåŠ¨è£…é…ï¼ˆ//TODOï¼‰ @Bean å’Œ @Autowired é…åˆå¯ä»¥å®žçŽ°æ³›åž‹çš„è‡ªåŠ¨è£…é…ã€‚ @Inject / @Nameä»Ž Spring3.0 å¼€å§‹æ”¯æŒ JSR330 æ ‡å‡†æ³¨è§£ï¼ˆä¾èµ–æ³¨å…¥æ³¨è§£ï¼‰ï¼Œå…¶æ‰«ææ–¹å¼ä¸ŽSpringæ³¨è§£ä¸€è‡´ã€‚ éœ€è¦ä»¥ä¸‹ä¾èµ–: 12345&lt;dependency&gt; &lt;groupId&gt;javax.inject&lt;/groupId&gt; &lt;artifactId&gt;javax.inject&lt;/artifactId&gt; &lt;version&gt;1&lt;/version&gt;&lt;/dependency&gt; @Inject @Inject ç­‰æ•ˆäºŽ @Autowired ï¼Œå¯ä»¥ç”¨ä½œç±»ï¼Œå±žæ€§ï¼Œæ–¹æ³•ï¼Œæž„é€ å™¨ã€‚ @Name å¯ä»¥è¡¨ç¤ºbeanï¼Œå’Œ @Component ç­‰æ•ˆã€‚ å¯ä»¥é™åˆ¶ä¾èµ–æ³¨å…¥çš„beanåç§°ï¼Œå’Œ @Resource ç­‰æ•ˆã€‚]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµ…è°ˆå­—ç¬¦ç¼–ç ]]></title>
    <url>%2F2018%2F11%2F07%2F%E6%B5%85%E8%B0%88%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%2F</url>
    <content type="text"><![CDATA[ç¼–ç¨‹ä¸­å¸¸ä¼šé‡åˆ°ä¸€äº›å­—ç¬¦å¤„ç†é—®é¢˜ï¼Œè¿™é‡Œæ¥ä»‹ç»ä¸€ä¸‹å‰åŽå°å…³äºŽå­—ç¬¦ç¼–ç çš„é—®é¢˜ã€‚ å¸¸è§çš„å­—ç¬¦ç¼–ç ç§ç±»å¦‚ä¸‹ï¼š å¸¸ç”¨å­—ç¬¦ç¼–ç  æè¿° è¡¥å……è¯´æ˜Ž ASCII 1å­—èŠ‚ï¼Œå­—ç¬¦èŒƒå›´0-127ï¼ŒåŒ…å«26ä¸ªåŸºæœ¬æ‹‰ä¸å­—æ¯ã€é˜¿æ‹‰ä¼¯æ•°ç›®å­—å’Œè‹±å¼æ ‡ç‚¹ç¬¦å·ã€‚ åªèƒ½æ˜¾ç¤ºçŽ°ä»£ç¾Žå›½è‹±è¯­ï¼Œå³ä½¿å…¶æ‰©å±• EASCII ï¼ˆå­—ç¬¦èŒƒå›´0-255ï¼‰ä¹Ÿåªè§£å†³äº†éƒ¨åˆ†è¥¿æ¬§è¯­è¨€çš„æ˜¾ç¤ºã€‚ ISO-8859-1 1å­—èŠ‚ï¼Œå­—ç¬¦èŒƒå›´0-255ï¼Œå…¼å®¹ ASCII ã€‚ åªæ”¯æŒæ¬§æ´²è¯­è¨€ï¼Œåœ¨å…¶ä»–ç¼–ç çš„é…åˆä¸‹å¯ä»¥æ˜¾ç¤ºä¸­æ–‡ç­‰ã€‚ GB2312 / GBK 1-2å­—èŠ‚ï¼Œå…¼å®¹ ISO-8859-1 ï¼Œä¸€èˆ¬asciiç å 1å­—èŠ‚ï¼Œå…¶ä»–å 2å­—èŠ‚ã€‚ GB2312 æ”¯æŒç®€ä½“å­—ï¼› GBK æ”¯æŒç®€/ç¹ä½“å­—ï¼Œå…¼å®¹ GB2312 ã€‚ï¼ˆæ³¨æ„ï¼šåŒºåˆ†å…¨è§’å’ŒåŠè§’ï¼‰ Unicode å®šé•¿2å­—èŠ‚ï¼ˆä¹Ÿæœ‰4å­—èŠ‚çš„ï¼‰ã€‚ ä¸å…¼å®¹ä»»ä½•ç¼–ç  ï¼Œä½†æ˜¯å®šé•¿ç¼–ç ä¾¿äºŽè®¡ç®—æœºå¤„ç†ã€‚åŒ…å«æ‰€æœ‰è¯­è¨€çš„å­—ç¬¦ï¼Œä½†å ç”¨ç©ºé—´å¤§ã€‚ UTF-8 1-6å­—èŠ‚ï¼Œä¸€èˆ¬è‹±æ–‡å 1å­—èŠ‚ï¼Œä¸­æ–‡å 3å­—èŠ‚ï¼ŒåŒ…å«æ‰€æœ‰è¯­è¨€ã€‚å…¼å®¹ ISO-8859-1 ã€‚ é’ˆå¯¹ Unicode ä¸Ž ISO-8859-1 ä¸å…¼å®¹ï¼Œä¸”å ç”¨ç©ºé—´å¤§çš„é—®é¢˜ï¼Œäº§ç”Ÿäº† UTF-8 ã€‚utf8ä¸ºUTF-8çš„ç®€å†™ï¼Œåªæœ‰æ•°æ®åº“(mysql)ä¸­ä½¿ç”¨utf8ï¼Œå…¶ä»–æŽ¨èä½¿ç”¨UTF-8ï¼ˆIEå¯èƒ½ä¸è¯†åˆ«utf8ï¼‰ã€‚ HTML ç¼–ç é—®é¢˜å› ä¸ºHTMLè¯­è¨€çš„æœ¬èº«ç‰¹æ€§å¯¼è‡´ä¸€äº›å­—ç¬¦éœ€è¦è½¬æ¢ä¸º å­—ç¬¦å®žä½“ æ‰å¯ä½¿ç”¨ã€‚è¿™å®žé™…ä¸Šæ˜¯å¸¸è§çš„ è½¬ä¹‰ æ“ä½œï¼Œ å’Œæœ¬æ–‡æ‰€è¦è¯´çš„çš„ ç¼–ç  å¹¶ä¸æ˜¯ä¸€ä»¶äº‹ã€‚ åœ¨çº¿å·¥å…·ï¼šHTMLç¼–ç /è§£ç  ï¼Œ å¸¸è§è½¬ä¹‰ç¬¦å·å¦‚ä¸‹ï¼š ç¬¦å·ï¼ˆæè¿°ï¼‰ HTMLè½¬ä¹‰ XHTMLè½¬ä¹‰ ï¼ˆç©ºæ ¼ï¼‰ &amp;nbsp; &amp;#160; &lt;ï¼ˆå¤§äºŽå·ï¼‰ &amp;lt; &amp;#60; &gt; ï¼ˆå°äºŽå·ï¼‰ &amp;gt; &amp;#62; &quot; ï¼ˆå†’å·ï¼‰ &amp;quot; &amp;#34; URL ç¼–ç é—®é¢˜URL åªèƒ½ä½¿ç”¨ ASCII å­—ç¬¦é›† æ¥é€šè¿‡å› ç‰¹ç½‘è¿›è¡Œå‘é€ï¼Œæ‰€ä»¥ éžASCII éœ€è¦ç¼–ç æ‰å¯ä»¥åœ¨URLä¸­ä½¿ç”¨ã€‚ URL ç¼–ç ä½¿ç”¨ â€œ%â€ å…¶åŽè·Ÿéšä¸¤ä½çš„åå…­è¿›åˆ¶æ•°æ¥æ›¿æ¢éž ASCII å­—ç¬¦ã€‚ URL ä¸èƒ½åŒ…å«ç©ºæ ¼ã€‚URL ç¼–ç é€šå¸¸ä½¿ç”¨ + æ¥æ›¿æ¢ç©ºæ ¼ã€‚ å‰ç«¯ç¼–ç encodeURI() ä¸Ž encodeURIComponent() å¸¸ç”¨æ–¹æ³• è¯´æ˜Ž encodeURI() å¸¸ç”¨äºŽURLæ•´ä½“ç¼–ç ï¼Œä¸ä¼šå¯¹URLä¿ç•™å­—ç¬¦è¿›è¡ŒURLè½¬ä¹‰ï¼Œå¦‚ ? / ! / : ç­‰å…±10ä¸ªã€‚ encodeURIComponent() å¸¸ç”¨äºŽå‚æ•°å€¼ç¼–ç ï¼Œä¼šå¯¹URLä¿ç•™å­—ç¬¦è¿›è¡ŒURLè½¬ä¹‰ã€‚ URL ä¿ç•™å­—ç¬¦URL å…·æœ‰ä¸€äº›ä¿ç•™å­—ç¬¦ï¼Œä»–ä»¬å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå½“ä¼ å‚ä¸­æœ‰ä¿ç•™å­—ç¬¦ï¼Œåº”è¯¥è½¬ä¹‰ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¼‚å¸¸ã€‚ URL ä¿ç•™å­—ç¬¦ è¯´æ˜Ž + è¡¨ç¤ºç©ºæ ¼ã€‚ / ç”¨äºŽåˆ†éš”ç›®å½•æˆ–å­ç›®å½•ã€‚ ? ç”¨äºŽåˆ†éš” URL å’Œå‚æ•°ã€‚ % æŒ‡å®šç‰¹æ®Šå­—ç¬¦ã€‚ # è¡¨ç¤ºé¡µé¢ä¸­çš„ä¹¦ç­¾ã€‚ &amp; å‚æ•°é—´çš„åˆ†éš”ç¬¦ã€‚ = æŒ‡å®šå‚æ•°çš„å€¼ã€‚ äºŒæ¬¡ç¼–è§£ç é—®é¢˜ ä¸€èˆ¬å­—ç¬¦ä¹±ç é—®é¢˜ï¼Œæ˜¯å› ä¸º c/s æˆ– b/s å­—ç¬¦é›†ä¸åŒé€ æˆçš„ï¼Œæ‰€ä»¥å…ˆå®¢æˆ·ç«¯ç¼–ç ï¼ŒåŽæœåŠ¡ç«¯è§£ç å³å¯é¿å…ã€‚ä½†æ˜¯æˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ï¼Œæœ‰æ—¶ ä¸ç¼–è§£ç  / ç¼–è§£ç  / ä¸¤æ¬¡ç¼–è§£ç  éƒ½ä¸ä¼šå‡ºçŽ°å­—ç¬¦ä¹±ç é—®é¢˜ã€‚ ä¸ºäº†ä¾¿äºŽç†è§£ï¼Œéœ€è¦çŸ¥é“ä»¥ä¸‹ä¿¡æ¯ï¼š URLåªèƒ½å­˜åœ¨ ASCIIå­—ç¬¦ ã€‚ Tomcatçš„ request.getParameter(paramName) é»˜è®¤æ˜¯ iso-8859-1 è§£ç ã€‚ encodeURI() ä¸Ž encodeURIComponent() ä½¿ç”¨çš„æ˜¯ UTF-8 ç¼–ç ã€‚ UTF-8 / ISO-8859-1 / GBK åŒ…å« ASCII ä¸”éƒ½æ˜¯ç›¸åŒçš„ç å€¼ã€‚ ä»¥ä¸‹ä¸ºå­—ç¬¦ ä¸­ çš„äºŒæ¬¡ç¼–è§£ç è¿‡ç¨‹ï¼š å› ä¸ºç¬¬ä¸€æ¬¡ç¼–ç åŽåªå­˜åœ¨ ASCIIå­—ç¬¦ ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡ UTF-8ç¼–ç  ç­‰åŒäºŽ iso-8859-1ç¼–ç  ã€‚ 12// js : äºŒæ¬¡ç¼–ç encodeURI(encodeURI(paramName)); 1234// servlet : äºŒæ¬¡è§£ç URLDecoder.decode(request.getParameter(paramName), "UTF-8")// struts2 : äºŒæ¬¡è§£ç URLDecoder.decode(URLDecoder.decode(paramName, "UTF-8"), "UTF-8"); HTTP ç¼–ç é—®é¢˜ç†è§£äº†äºŒæ¬¡ç¼–ç é—®é¢˜æˆ‘ä»¬å°±å¯ä»¥åˆ†æžå’Œè§£å†³ getæ–¹æ³• ä¹±ç é—®é¢˜ï¼Œä½†å¯¹äºŽ SpringMVC è¿˜æœ‰æ›´æ–¹ä¾¿çš„æ–¹æ³•ã€‚ ä»¥ä¸‹åªé’ˆå¯¹ SpringMVC ä¹±ç é—®é¢˜ ã€‚ GETä¿®æ”¹ tomcat é…ç½®æ–‡ä»¶ conf/server.xml ï¼Œæ·»åŠ ç¼–ç å’Œå·¥ç¨‹ç¼–ç ä¸€è‡´ï¼ŒæŽ¨èä½¿ç”¨ UTF-8 ã€‚ å› ä¸º URL åªèƒ½å­˜åœ¨ ASCII å­—ç¬¦é›† ï¼Œæ‰€ä»¥æµè§ˆå™¨é»˜è®¤ä¼šå¯¹æ±‰å­—è¿›è¡Œç¼–ç ã€‚ 123&lt;Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" URIEncoding="UTF-8"/&gt; POSTåœ¨ web.xml ä¸­é…ç½® CharacterEncodingFilter å³å¯ã€‚ 1234567891011121314151617&lt;!--å­—ç¬¦è¿‡æ»¤å™¨ï¼ˆåªé’ˆå¯¹postï¼‰--&gt;&lt;filter&gt; &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; IDE ç›¸å…³IDEA ä¸­çš„ Reload ä¸Ž Convertä¸€èˆ¬IDEä¼šä½¿ç”¨å…¶é»˜è®¤è®¾ç½®è§£è¯»æ–‡ä»¶ï¼Œå¦‚æžœIDEçš„å­—ç¬¦é›†å’Œæ–‡ä»¶æœ¬èº«çš„å­—ç¬¦é›†ä¸åŒå°±ä¼šå‡ºçŽ°ä¹±ç ã€‚ æ­¤æ—¶å¯ä»¥æ”¹å˜ç¼–ç æ–¹å¼ï¼Œå¦‚IDEAä¸­ä¼šå‡ºçŽ°ä¸¤ç§æ–¹å¼ã€‚ Reload : é‡è½½ï¼Œä½¿ç”¨æŒ‡å®šçš„ç¼–ç æ–¹å¼è§£è¯»æ–‡ä»¶ï¼Œæ–‡ä»¶æœ¬èº«ç¼–ç ä¸æ”¹å˜ã€‚ Convert : è½¬å˜ï¼Œå°†å½“å‰çœ‹åˆ°çš„å†…å®¹ä»¥æŒ‡å®šçš„ç¼–ç æ–¹å¼å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶æœ¬èº«ç¼–ç å¯èƒ½æ”¹å˜ã€‚]]></content>
      <categories>
        <category>â‘¡ çŸ¥è¯†æ¢³ç†</category>
      </categories>
      <tags>
        <tag>å­—ç¬¦ç¼–ç </tag>
        <tag>HTML</tag>
        <tag>URL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨GitHub Pagesæ­å»ºä¸ªäººåšå®¢]]></title>
    <url>%2F2018%2F10%2F31%2F%E4%BD%BF%E7%94%A8GitHub-Pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[æœ¬æ•™ç¨‹åŸºäºŽ Mac ç³»ç»Ÿï¼Œæ‰€ç”¨æŒ‡ä»¤å¯èƒ½ä¸é€‚ç”¨å…¶ä»–å¹³å°ï¼ ä½¿ç”¨ GitHub Pages + Hexo + NexT å¿«é€Ÿæ­å»ºä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ä¸ªäººåšå®¢ã€‚ å‡†å¤‡å·¥ä½œ Git : æœ¬åœ°éœ€è¦å®‰è£… gitã€‚ Github : æ‹¥æœ‰è´¦å·ï¼Œé…ç½®å¥½ SSH keysï¼Œå¹¶äº†è§£åŸºæœ¬æ“ä½œï¼Œå¦‚ï¼šåˆ›å»ºè¿œç¨‹ä»“åº“ç­‰ã€‚ Node.js : Hero å’Œ NexT æ˜¯åŸºäºŽ Node.js çš„ï¼Œå¯ä»¥åˆ°Node.jså®˜ç½‘ä¸‹è½½ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ã€‚ åˆè§æˆæ•ˆï¼šGitHub Pages + Hexoå®‰è£… Hexo Hexoå®˜ç½‘æ•™ç¨‹ å½“ Node.js å’Œ Git éƒ½å®‰è£…å¥½åŽ ï¼Œç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ sudo npm install -g hexo æ˜¯ä¸æ˜¯å¡ä½äº†ï¼Œæ²¡ååº”ï¼ŸðŸ˜ è¿™å°±å¯¹äº†ï¼Œå¥½å¥½æ„Ÿå—å¤©æœçˆ¸çˆ¸å¯¹ä½ çš„çˆ± ðŸ¤£ ã€‚ã€‚ã€‚ å¯èƒ½ npm æ²¡æ³•ä½¿ç”¨ï¼Œéœ€è¦å®‰è£… cnpm ï¼Œè¿™æ˜¯æ·˜å®çš„åšçš„é•œåƒã€‚ 12345$ npm install -g cnpm --registry=https://registry.npm.taobao.org$ sudo cnpm install -g hexo# æŸ¥çœ‹ç‰ˆæœ¬$ hexo -v åˆå§‹åŒ– Hexoåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¦‚ hexoï¼‰ï¼Œä½œä¸ºç«™ç‚¹æ ¹ç›®å½•ï¼Œç”¨äºŽå­˜æ”¾ Hexo ç­‰é…ç½®æ–‡ä»¶ã€‚ 1234$ cd hexo$ hexo init$ hexo install ä»¥ä¸‹ä¸º Hexo é»˜è®¤ç›®å½•ç»“æž„ï¼š 12345678910111213.â”œâ”€â”€ README.mdâ”œâ”€â”€ _config.yml # ç«™ç‚¹é…ç½®æ–‡ä»¶â”œâ”€â”€ db.json â”œâ”€â”€ .deploy # hexo d ç”Ÿæˆï¼Œéƒ¨ç½²åˆ°GitHubä¸Šçš„å†…å®¹ç›®å½•â”œâ”€â”€ node_modules â”œâ”€â”€ package.json # hexoå‚æ•°å’Œæ‰€ä¾èµ–æ’ä»¶â”œâ”€â”€ public # hexo g ç”Ÿæˆï¼Œè¾“å‡ºçš„é™æ€ç½‘é¡µå†…å®¹ç›®å½•â”œâ”€â”€ scaffolds # layoutæ¨¡æ¿æ–‡ä»¶ç›®å½•ï¼Œå…¶ä¸­çš„mdæ–‡ä»¶å¯ä»¥ç¼–è¾‘â”œâ”€â”€ source # æ–‡ç« æºç ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„markdownå¯ä»¥è¢«hexoè§£æžâ”‚ â”œâ”€â”€ _drafts # è‰ç¨¿æ–‡ç« ï¼Œä¸ä¼šå‘å¸ƒï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆï¼šhexo new draft "è‰ç¨¿å"â”‚ â”œâ”€â”€ _posts # å‘å¸ƒæ–‡ç« â””â”€â”€ themes # ä¸»é¢˜æ–‡ä»¶ç›®å½• å¯åŠ¨ Hero æœåŠ¡å™¨ å¯ä»¥ç¼©å†™æˆ $ hexo s 1$ hexo server å¦‚æžœä¸€èµ·é¡ºåˆ©ï¼Œå¯ä»¥åœ¨ http://localhost:4000 çœ‹åˆ°å¯åŠ¨é¡µé¢ã€‚ è¿™å°±æ˜¯å½“å‰åšå®¢çš„é¢è²Œï¼Œä½¿ç”¨çš„æ˜¯ Hexo çš„é»˜è®¤ä¸»é¢˜ï¼Œåªæ˜¯è¿˜åœ¨æœ¬åœ°ã€‚ å°† Hexo éƒ¨ç½²åˆ° GitHub Pagesåˆ›å»º GitHub Pages ä»“åº“ï¼Œå³åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªæ™®é€šä»“åº“ï¼Œä½†æ˜¯è¦ç¬¦åˆä»¥ä¸‹å‘½åè§„åˆ™ï¼š ç”¨æˆ·å.github.io ã€‚ è¯¥ä»“åº“åœ°å€ä¸ºï¼šhttps://github.com/ç”¨æˆ·å/ç”¨æˆ·å.github.io.git ä¿®æ”¹ ç«™ç‚¹é…ç½®æ–‡ä»¶ åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ _config.ymlã€‚ å…¶ä¸­ï¼Œä¸€ä»½ä½äºŽç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äºŽä¸»é¢˜ç›®å½•ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºŽé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚ ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜Žä¸­ï¼Œå°†å‰è€…ç§°ä¸º ç«™ç‚¹é…ç½®æ–‡ä»¶ ï¼Œ åŽè€…ç§°ä¸º ä¸»é¢˜é…ç½®æ–‡ä»¶ ã€‚ 123$ cd hexo$ vim _config.yml ä¿®æ”¹ repository ä»“åº“ä½ç½®ï¼š æ³¨æ„ : å·åŽé¢è¦åŠ ç©ºæ ¼ ã€‚ 1234deploy: type: git repository: https://github.com/ç”¨æˆ·å/ç”¨æˆ·å.github.io.git branch: master ç”Ÿæˆç½‘ç«™é™æ€é¡µé¢ å¯ä»¥ç¼©å†™æˆ $ hexo g 1$ hexo generate 123456è‹¥å‡ºçŽ°å¦‚ä¸‹æŠ¥é”™ï¼šERROR Local hexo not found in ~/hexoERROR Try runing: &apos;npm install hexo --save&apos;åˆ™æ‰§è¡Œå‘½ä»¤ï¼š$ cnpm install hexo --saveè‹¥æ— æŠ¥é”™ï¼Œè‡ªè¡Œå¿½ç•¥æ­¤æ­¥éª¤ã€‚ æŠŠç½‘ç«™éƒ¨ç½²åˆ° GitHub å¯ä»¥ç¼©å†™æˆ $ hexo d 1$ hexo deploy 1234è‹¥æŠ¥é”™ï¼šæ— æ³•è¿žæŽ¥gitæˆ–æ‰¾ä¸åˆ°gitåˆ™æ‰§è¡Œå‘½ä»¤ï¼š$ cnpm install hexo-deployer-git --saveè‹¥æ— æŠ¥é”™ï¼Œè‡ªè¡Œå¿½ç•¥æ­¤æ­¥éª¤ã€‚ å¦‚æžœä¸€åˆ‡é¡ºåˆ©ï¼Œä¸€èˆ¬éœ€è¦ç­‰å¾…3åˆ†é’Ÿï¼Œå°±å¯ä»¥åœ¨ https://ç”¨æˆ·å.github.io çœ‹åˆ°å’Œä¹‹å‰æ‰€è§çš„åšå®¢é¡µé¢äº†ã€‚ è¿™è¡¨æ˜Žä½ çš„åšå®¢ç½‘ç«™å·²ç»å‘å¸ƒæˆåŠŸï¼Œä¹‹å‰çš„ä»“åº“ ç”¨æˆ·å.github.io ä¹Ÿæ›´æ–°äº†ï¼Œå°±æ˜¯ä¹‹å‰ç”Ÿæˆçš„é™æ€ç½‘é¡µï¼Œ ä¸åŒ…å«ä½ çš„MarkDownæºæ–‡ä»¶ ã€‚ å®‰è£…ä¸»é¢˜ NexT å®‰è£… NexT èƒ½ç¾ŽåŒ– Hexo ï¼Œè€Œä¸”å…¶è¿˜æä¾›äº†å¾ˆå¤šæ’ä»¶ï¼Œå®Œå–„åšå®¢åŠŸèƒ½ã€‚ ç»†èŠ‚è¯·å‚è€ƒï¼š NexTå®˜ç½‘ ä¸‹è½½ä¸»é¢˜123$ cd hexo# å°† next å…‹éš†åˆ° hexo/themes/next ç›®å½•git clone https://github.com/iissnan/hexo-theme-next themes/next ä»¥ä¸‹ä¸º NexT é»˜è®¤ç›®å½•ç»“æž„ï¼š 12345678910111213141516171819202122232425262728293031323334353637â”œâ”€â”€ .github #gitä¿¡æ¯â”œâ”€â”€ languages #å¤šè¯­è¨€| â”œâ”€â”€ default.yml #é»˜è®¤è¯­è¨€| â””â”€â”€ zh-Hans.yml #ç®€ä½“ä¸­æ–‡| â””â”€â”€ zh-tw.yml #ç¹ä½“ä¸­æ–‡â”œâ”€â”€ layout #å¸ƒå±€ï¼Œæ ¹ç›®å½•ä¸‹çš„*.ejsæ–‡ä»¶æ˜¯å¯¹ä¸»é¡µï¼Œåˆ†é¡µï¼Œå­˜æ¡£ç­‰çš„æŽ§åˆ¶| â”œâ”€â”€ _custom #å¯ä»¥è‡ªå·±ä¿®æ”¹çš„æ¨¡æ¿ï¼Œè¦†ç›–åŽŸæœ‰æ¨¡æ¿| | â”œâ”€â”€ _header.swig #å¤´éƒ¨æ ·å¼| | â”œâ”€â”€ _sidebar.swig #ä¾§è¾¹æ æ ·å¼| â”œâ”€â”€ _macro #å¯ä»¥è‡ªå·±ä¿®æ”¹çš„æ¨¡æ¿ï¼Œè¦†ç›–åŽŸæœ‰æ¨¡æ¿| | â”œâ”€â”€ post.swig #æ–‡ç« æ¨¡æ¿| | â”œâ”€â”€ reward.swig #æ‰“èµæ¨¡æ¿| | â”œâ”€â”€ sidebar.swig #ä¾§è¾¹æ æ¨¡æ¿| â”œâ”€â”€ _partial #å±€éƒ¨çš„å¸ƒå±€| | â”œâ”€â”€ head #å¤´éƒ¨æ¨¡æ¿| | â”œâ”€â”€ search #æœç´¢æ¨¡æ¿| | â”œâ”€â”€ share #åˆ†äº«æ¨¡æ¿| â”œâ”€â”€ _script #å±€éƒ¨çš„å¸ƒå±€| â”œâ”€â”€ _third-party #ç¬¬ä¸‰æ–¹æ¨¡æ¿| â”œâ”€â”€ _layout.swig #ä¸»é¡µé¢æ¨¡æ¿| â”œâ”€â”€ index.swig #ä¸»é¡µé¢æ¨¡æ¿| â”œâ”€â”€ page #é¡µé¢æ¨¡æ¿| â””â”€â”€ tag.swig #tagæ¨¡æ¿â”œâ”€â”€ scripts #scriptæºç | â”œâ”€â”€ tags #tagsçš„scriptæºç | â”œâ”€â”€ marge.js #é¡µé¢æ¨¡æ¿â”œâ”€â”€ source #æºç | â”œâ”€â”€ css #cssæºç | | â”œâ”€â”€ _common #*.stylåŸºç¡€css| | â”œâ”€â”€ _custom #*.stylå±€éƒ¨css| | â””â”€â”€ _mixins #mixinsçš„css| â”œâ”€â”€ fonts #å­—ä½“| â”œâ”€â”€ images #å›¾ç‰‡| â”œâ”€â”€ uploads #æ·»åŠ çš„æ–‡ä»¶| â””â”€â”€ js #javascriptæºä»£ç â”œâ”€â”€ _config.yml #ä¸»é¢˜é…ç½®æ–‡ä»¶â””â”€â”€ README.md #ç”¨GitHubçš„éƒ½çŸ¥é“ å¯åŠ¨ä¸»é¢˜ ä¿®æ”¹ ç«™ç‚¹é…ç½®æ–‡ä»¶ ï¼Œä¿®æ”¹ theme å­—æ®µã€‚ 1theme: next éªŒè¯ä¸»é¢˜ å¯åŠ¨ Hexo æœ¬åœ°ç«™ç‚¹ï¼Œå¹¶å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå¯ä»¥çœ‹åˆ°å¼‚å¸¸ä¿¡æ¯ã€‚ 1$ hexo s --debug Blog æµç¨‹ Hexo å®‰è£…æˆåŠŸåŽï¼Œå°±å¯ä»¥å‘å¸ƒåšå®¢äº†ã€‚å‘å¸ƒæµç¨‹å¦‚ä¸‹ï¼š å¯ä»¥ä¸ä½¿ç”¨æŒ‡ä»¤ï¼Œç›´æŽ¥ åˆ é™¤ å’Œ æ–°å»º æ–‡ä»¶ã€‚ 123456789101112# åˆ›å»ºæ–‡ç« ï¼Œä¼šåœ¨ hexo/source/_posts æ–°å»º md æ–‡ä»¶$ hexo new "æ–‡ç« åå­—"# æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)$ hexo clean# ç”Ÿæˆç¼“å­˜å’Œé™æ€æ–‡ä»¶$ hexo g# å¯åŠ¨ Hexo æœ¬åœ°ç«™ç‚¹ï¼Œé¢„è§ˆæ•ˆæžœã€‚$ hexo s# é‡æ–°éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œå°†æ–‡ç« å‘å¸ƒåˆ° GitHub$ hexo d ç«™ç‚¹æ–‡ä»¶ç®¡ç†å®Œæˆä»¥ä¸Šæ­¥éª¤åŽï¼Œè¿˜ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š ç«™ç‚¹å¼€å‘çŽ¯å¢ƒåªå­˜åœ¨æœ¬åœ°ï¼Œä¸åˆ©äºŽéšæ—¶ç®¡ç†ç«™ç‚¹ã€‚ å®žé™…å‘å¸ƒçš„æ˜¯ md è¢«è½¬å˜åŽçš„ html æ–‡ä»¶ï¼Œmd æºæ–‡ä»¶æ²¡æœ‰è¢«æœ‰æ•ˆä¿ç®¡ã€‚ ðŸ¤£å–œå¤§æ™®å¥”ï¼Œ 2019.01.07 ï¼ŒGitHub å·²æä¾›å…è´¹ç§æœ‰ä»“åº“ï¼Œç«™ç‚¹æ–‡ä»¶æ”¾åˆ°ç§æœ‰ä»“åº“å°±å¥½ï¼ï¼ï¼ åˆ›å»ºåˆ†æ”¯ç®¡ç†å¯¹äºŽä»¥ä¸Šé—®é¢˜ï¼Œå¯ä»¥åœ¨ GitHub Pages ä»“åº“åˆ›å»ºäº†ä¸€ä¸ªåˆ†æ”¯ï¼Œæ¥ä¿ç®¡ç«™ç‚¹çŽ¯å¢ƒï¼Œå…¶ä¹Ÿå°±åŒ…å«äº† md æºæ–‡ä»¶ã€‚å…·ä½“æ“ä½œ ï¼Œå¦‚ä¸‹ï¼š 1234567# å…‹éš† GitHub Pages ä»“åº“$ git clone git@github.com:ç”¨æˆ·å/ç”¨æˆ·å.github.io.git# æŸ¥çœ‹å½“å‰åˆ†æ”¯$ git branch# åˆ›å»º å¹¶ åˆ‡æ¢ åˆ°åˆ†æ”¯ config$ git checkout -b config æ¸…ç©ºæ–‡ä»¶å¤¹(ä»…ä¿ç•™.git)ï¼Œå°† hexo æ–‡ä»¶å†…æ‰€æœ‰æ–‡ä»¶ æ‹·è´åˆ° å…¶ä¸­ ã€‚ å› ä¸º next ä¹Ÿæ˜¯ä¸ª git ä»“åº“ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤å…¶ .git ç›®å½•ï¼Œæˆ–è€…æ ¹æ®æç¤ºæ“ä½œã€‚ 1234# å°† git ä»“åº“å˜åŠ¨ä¿å­˜ï¼Œå¹¶ push åˆ° è¿œç¨‹ä»“åº“åˆ†æ”¯ config$ git add .$ git commit -m "GitHub Pages ç«™ç‚¹çŽ¯å¢ƒ"$ git push origin config å¯ä»¥ç™»å½• GitHubï¼Œå°† è¿œç¨‹é»˜è®¤åˆ†æ”¯ åˆ‡æ¢ä¸º config ã€‚ å®žé™…ä¸Šï¼Œ masteråˆ†æ”¯ å­˜æ”¾çš„æ˜¯ç«™ç‚¹çš„é™æ€æ–‡ä»¶ï¼Œå…¶éƒ½æ˜¯ç”± Hexo è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ masteråˆ†æ”¯ å¯¹æˆ‘ä»¬è€Œè¨€æ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼Œä»¥åŽå†ä¹Ÿä¸ç”¨åˆ‡æ¢åˆ° masteråˆ†æ”¯ äº†ã€‚]]></content>
      <categories>
        <category>â‘£ éº»ç“œæ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Blog</tag>
        <tag>Hexo</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å»ºç«™æ—¥å¿—]]></title>
    <url>%2F2018%2F10%2F30%2F%E5%BB%BA%E7%AB%99%E6%97%A5%E5%BF%97%2F</url>
    <content type="text"><![CDATA[2019-06-03 ä¿®æ”¹äº† code é«˜äº® ï¼ˆ custom.styl ï¼‰ã€‚ 2019-05-03å‡çº§ NexT : 7.0.1 -&gt; 7.1.1+ è§£å†³ hexo-symbols-count-time å­—æ•°ç»Ÿè®¡ä¸¥é‡ä¸å‡†é—®é¢˜ã€‚ 2019-04-05 å›¾ç‰‡é¢„è§ˆ: fancybox3 å»¶è¿ŸåŠ è½½: lazyload 2019-03-08 æ·»åŠ å®žæ—¶åœ¨çº¿èŠå¤© : DaoVoice ã€‚ æœç´¢åŠŸèƒ½åˆ‡æ¢ : Algolia Search -&gt; Local Search ã€‚ å¼€å¯ç‰ˆæƒå£°æ˜Žã€‚ 2019-03-03 å‡çº§ NexT : 5.1.4 -&gt; 7.0.1 è‡ªå®šä¹‰æ ·å¼è¿ç§»: highlight.styl , theme.styl post-details.js , algolia-search.styl ç­‰ã€‚ æ·»åŠ  v6+ ç§»é™¤å’Œå˜æ›´çš„æ’ä»¶ : è¿›åº¦æ¡: theme-next-pace åŠ¨ç”»: theme-next-canvas-nest å­—æ•°ç»Ÿè®¡: hexo-symbols-count-time Hexo æ·»åŠ èŒèŒå“’ðŸ˜ : live2d hexo-helper-live2d live2dæ¨¡åž‹: live2d-widget-models æ¨¡åž‹é¢„è§ˆ æ ‡ç­¾æ ·å¼ä¿®æ”¹ æ–‡ç« æ ‡ç­¾æ ·å¼ä¿®æ”¹ï¼ˆ custom.styl ï¼‰ã€‚ æ–‡ç« æ‘˜è¦æ·»åŠ æ ‡ç­¾ï¼ˆ post.swig , custom.styl ï¼‰ã€‚ 2019-02-13 ä¿®æ”¹ MakeDown è¯­æ³•æ¸²æŸ“æ ·å¼ã€‚ è°ƒæ•´ code è¿‡å°ï¼ˆ highlight.styl ï¼‰ã€‚ è°ƒæ•´ td ç­‰å®½çš„ä¸å½“æ ·å¼ï¼ˆ tables.styl ï¼‰ã€‚ è‡ªå®šä¹‰è¯­æ³•é«˜äº®æ ·å¼ï¼ˆ theme.styl ï¼‰ã€‚ åŽ»é™¤ä¿®æ”¹æ–‡ç« åŽï¼Œæ–‡ç« ç›®å½•çš„æ–°å¢žåŠ æ ‡è¯†ï¼ˆ post-details.js ï¼‰ã€‚ 2019-02-02ðŸ¤£ç”±äºŽå°†ç«™ç‚¹çŽ¯å¢ƒåˆ†ç¦»ç­‰ï¼Œå¯¼è‡´æ‰€æœ‰ç«™ç‚¹æäº¤è®°å½•ä¸¢å¤±ï¼Œæ‰€ä»¥æ„Ÿè§‰æœ‰å¿…è¦è®°å½•ç«™ç‚¹å‘å±•ã€‚ ä»¥ä¸‹ä¸ºä¸¢å¤±çš„ç«™ç‚¹æäº¤è®°å½•æ¦‚è¦ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼š æ ¹æ® å®˜æ–¹æ–‡æ¡£ å®šåˆ¶äº† NexT é…ç½®æ–‡ä»¶ã€‚ å¯åŠ¨ algolia-searchæ’ä»¶ï¼Œå¹¶ä¿®æ”¹æœç´¢åˆ—è¡¨ä¸æ˜¾ç¤ºåˆ†é¡µçš„ bugï¼ˆalgolia-search.stylï¼‰ã€‚ 2018-10-30åŸºäºŽ GitHub Pages + Hexo + NexT æ­å»ºåšå®¢ã€‚ NexT ä¸º 5.1.4ç‰ˆæœ¬ã€‚ NexTå®˜æ–¹ NexTä»“åº“]]></content>
  </entry>
</search>
